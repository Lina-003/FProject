/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={893:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(81),r=n.n(i),s=n(645),o=n.n(s)()(r());o.push([e.id,".class-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    flex-direction: row;\n    background-color: black;\n    margin-left: 40px;\n    margin-right: 40px;\n    padding: 1rem;\n    box-shadow: 0px 6px 40px rgba(214.84, 214.84, 214.84, 0.06);\n}\n\n#Buscador {\n    background-color: black;\n    font-size: 14px;\n    color: #ededed;\n    background-size: 24px;\n    width: 400px;\n    border: 1px solid #ededed;\n    border-radius: 4px;\n    padding: 9px 9px 9px 30px;\n    outline: none;\n}\n\nbutton {\n    padding: 10px;\n    background-color: #ededed;\n    color: black;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n}\n\n.class-header .class-right button:hover {\n    background-color: #d1d1d1;\n}\n\nh3 {\n    color: white;\n    font-size: 14px;\n    font-weight:500;\n    font-family: 'Inter', sans-serif;\n    cursor: pointer;\n}\n\nimg {\n    cursor: pointer;\n}\n\n.class-header .class-right {\n    display: flex;\n    align-items: center;\n}\n\n.class-header .class-left {\n    display: flex;\n    align-items: center;\n    gap: 80px;\n}",""]);const a=o},946:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(81),r=n.n(i),s=n(645),o=n.n(s)()(r());o.push([e.id,"\nh1 {\n    font-family: 'Inter', sans-serif;\n    color: white;\n    font-size: 15px;\n}\n\nh3 {\n    font-family: 'Inter', sans-serif;\n    color: white;\n    font-size: 14px;\n    font-weight: normal;\n    \n}\n\nimg {\n    display: grid;\n    border-radius: 15px;\n    height:267.57px;\n    width: 100%;\n    overflow: hidden;\n    object-fit: cover;\n    cursor: pointer;\n}\n",""]);const a=o},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var h=[].concat(e[l]);i&&o[h[0]]||(void 0!==s&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=s),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),r&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=r):h[4]="".concat(r)),t.push(h))}},t}},81:e=>{e.exports=function(e){return e[1]}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={id:i,exports:{}};return e[i](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;!function(e){e.STORE="STORE"}(e||(e={}));var t,i,r,s;!function(e){e.NAVIGATE="NAVIGATE"}(t||(t={})),(r=i||(i={})).SAVE_COMMENT="SAVE_COMMENT",r.GET_COMMENT="GET_COMMENT",function(e){e.DASHBOARD="DASHBOARD",e.REGIONS="REGIONS",e.CLIMATE="CLIMATE",e.SPOTSELECT="SPOTSELECT",e.LOGIN="LOGIN"}(s||(s={}));const o={screen:s.LOGIN,products:[]};let a=(({key:e,defaultValue:t})=>{const n=localStorage.getItem(e)||sessionStorage.getItem(e);return n?JSON.parse(n):t})({key:e.STORE,defaultValue:o}),c=[];const l=t=>{const n=((e,t)=>{const{type:n,payload:r}=e;switch(n){case"NAVIGATE":t.screen=r;break;case i.SAVE_COMMENT:return t.products=[...t.products,r],t;case i.GET_COMMENT:return t.products=r,t;default:return t}return t})(t,JSON.parse(JSON.stringify(a)));var r;a=n,r=n,(({key:e,value:t,session:n=!1})=>{const i=n?sessionStorage:localStorage,r=JSON.stringify(t);i.setItem(e,r)})({key:e.STORE,value:r}),c.forEach((e=>e.render()))},h=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const r=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=r>>2,h=(3&r)<<4|o>>4;let u=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(u=64)),i.push(n[l],n[h],n[u],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(h(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==s||null==o||null==a)throw new d;const c=r<<2|s>>4;if(i.push(c),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class d extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f=function(e){return function(e){const t=h(e);return u.encodeByteArray(t,!0)}(e).replace(/\./g,"")},p=function(e){try{return u.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},m=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&p(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},g=e=>{var t,n;return null===(n=null===(t=m())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},v=()=>{var e;return null===(e=m())||void 0===e?void 0:e.config},y=e=>{var t;return null===(t=m())||void 0===t?void 0:t[`_${e}`]};class w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function E(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class b extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,b.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_.prototype.create)}}class _{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(I,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new b(i,o,n)}}const I=/\{\$([^}]+)}/g;function T(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(C(n)&&C(s)){if(!T(n,s))return!1}else if(n!==s)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function C(e){return null!==e&&"object"==typeof e}function S(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function A(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function k(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class R{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=N),void 0===i.error&&(i.error=N),void 0===i.complete&&(i.complete=N);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function N(){}function D(e){return e&&e._delegate?e._delegate:e}class O{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const P="[DEFAULT]";class L{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new w;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:P})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=P){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=P){return this.instances.has(e)}getOptions(e=P){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===P?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e=P){return this.component?this.component.multipleInstances?e:P:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class M{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new L(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const x=[];var U,F;(F=U||(U={}))[F.DEBUG=0]="DEBUG",F[F.VERBOSE=1]="VERBOSE",F[F.INFO=2]="INFO",F[F.WARN=3]="WARN",F[F.ERROR=4]="ERROR",F[F.SILENT=5]="SILENT";const V={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},j=U.INFO,B={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},H=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=B[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class ${constructor(e){this.name=e,this._logLevel=j,this._logHandler=H,this._userLogHandler=null,x.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in U))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?V[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...e),this._logHandler(this,U.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...e),this._logHandler(this,U.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,U.INFO,...e),this._logHandler(this,U.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,U.WARN,...e),this._logHandler(this,U.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...e),this._logHandler(this,U.ERROR,...e)}}const z=(e,t)=>t.some((t=>e instanceof t));let G,q;const K=new WeakMap,W=new WeakMap,Q=new WeakMap,X=new WeakMap,J=new WeakMap;let Y={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return W.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Q.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ee(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Z(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(q||(q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(te(this),e),ee(K.get(this))}:function(...e){return ee(t.apply(te(this),e))}:function(e,...n){const i=t.call(te(this),e,...n);return Q.set(i,e.sort?e.sort():[e]),ee(i)}:(e instanceof IDBTransaction&&function(e){if(W.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));W.set(e,t)}(e),z(e,G||(G=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Y):e);var t}function ee(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(ee(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&K.set(t,e)})).catch((()=>{})),J.set(t,e),t}(e);if(X.has(e))return X.get(e);const t=Z(e);return t!==e&&(X.set(e,t),J.set(t,e)),t}const te=e=>J.get(e),ne=["get","getKey","getAll","getAllKeys","count"],ie=["put","add","delete","clear"],re=new Map;function se(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(re.get(t))return re.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=ie.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!ne.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&s.done]))[0]};return re.set(t,s),s}var oe;oe=Y,Y={...oe,get:(e,t,n)=>se(e,t)||oe.get(e,t,n),has:(e,t)=>!!se(e,t)||oe.has(e,t)};class ae{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ce="@firebase/app",le="0.9.22",he=new $("@firebase/app"),ue="[DEFAULT]",de={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fe=new Map,pe=new Map;function me(e,t){try{e.container.addComponent(t)}catch(n){he.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ge(e){const t=e.name;if(pe.has(t))return he.debug(`There were multiple attempts to register component ${t}.`),!1;pe.set(t,e);for(const t of fe.values())me(t,e);return!0}function ve(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const ye=new _("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class we{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new O("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ye.create("app-deleted",{appName:this._name})}}const Ee="10.5.2";function be(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:ue,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!=typeof r||!r)throw ye.create("bad-app-name",{appName:String(r)});if(n||(n=v()),!n)throw ye.create("no-options");const s=fe.get(r);if(s){if(T(n,s.options)&&T(i,s.config))return s;throw ye.create("duplicate-app",{appName:r})}const o=new M(r);for(const e of pe.values())o.addComponent(e);const a=new we(n,i,o);return fe.set(r,a),a}function _e(e=ue){const t=fe.get(e);if(!t&&e===ue&&v())return be();if(!t)throw ye.create("no-app",{appName:e});return t}function Ie(e,t,n){var i;let r=null!==(i=de[e])&&void 0!==i?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${r}" with version "${t}":`];return s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void he.warn(e.join(" "))}ge(new O(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}const Te="firebase-heartbeat-database",Ce=1,Se="firebase-heartbeat-store";let Ae=null;function ke(){return Ae||(Ae=function(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=ee(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(ee(o.result),e.oldVersion,e.newVersion,ee(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Te,Ce,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Se)}}).catch((e=>{throw ye.create("idb-open",{originalErrorMessage:e.message})}))),Ae}async function Re(e,t){try{const n=(await ke()).transaction(Se,"readwrite"),i=n.objectStore(Se);await i.put(t,Ne(e)),await n.done}catch(e){if(e instanceof b)he.warn(e.message);else{const t=ye.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});he.warn(t.message)}}}function Ne(e){return`${e.name}!${e.options.appId}`}class De{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Pe(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Oe();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Oe(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),Le(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Le(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=f(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Oe(){return(new Date).toISOString().substring(0,10)}class Pe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await ke();return await t.transaction(Se).objectStore(Se).get(Ne(e))}catch(e){if(e instanceof b)he.warn(e.message);else{const t=ye.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});he.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Le(e){return f(JSON.stringify({version:2,heartbeats:e})).length}function Me(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}ge(new O("platform-logger",(e=>new ae(e)),"PRIVATE")),ge(new O("heartbeat",(e=>new De(e)),"PRIVATE")),Ie(ce,le,""),Ie(ce,le,"esm2017"),Ie("fire-js",""),Ie("firebase","10.5.2","app"),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const xe=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ue=new _("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fe=new $("@firebase/auth");function Ve(e,...t){Fe.logLevel<=U.ERROR&&Fe.error(`Auth (${Ee}): ${e}`,...t)}function je(e,...t){throw He(e,...t)}function Be(e,...t){return He(e,...t)}function He(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return Ue.create(e,...t)}function $e(e,t,...n){if(!e)throw He(t,...n)}function ze(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ve(t),new Error(t)}function Ge(e,t){e||ze(t)}function qe(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ke(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function We(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Ke()||"https:"===Ke()||function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Qe{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ge(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(E())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return We()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Xe(e,t){Ge(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Je{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void ze("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void ze("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void ze("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ye={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ze=new Qe(3e4,6e4);function et(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function tt(e,t,n,i,r={}){return nt(e,r,(async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const o=S(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Je.fetch()(rt(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},r))}))}async function nt(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Ye),t);try{const t=new ot(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw at(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw at(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw at(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw at(e,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(e,t,n){const i=Object.assign(Object.assign({},xe()),{[t]:n});return new _("auth","Firebase",i).create(t,{appName:e.name})}(e,a,o);je(e,a)}}catch(t){if(t instanceof b)throw t;je(e,"network-request-failed",{message:String(t)})}}async function it(e,t,n,i,r={}){const s=await tt(e,t,n,i,r);return"mfaPendingCredential"in s&&je(e,"multi-factor-auth-required",{_serverResponse:s}),s}function rt(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?Xe(e.config,r):`${e.config.apiScheme}://${r}`}function st(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ot{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Be(this.auth,"network-request-failed"))),Ze.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function at(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Be(e,t,i);return r.customData._tokenResponse=n,r}function ct(e){return void 0!==e&&void 0!==e.enterprise}class lt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return st(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}function ht(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function ut(e){return 1e3*Number(e)}function dt(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return Ve("JWT malformed, contained fewer than 3 sections"),null;try{const e=p(n);return e?JSON.parse(e):(Ve("Failed to decode base64 JWT payload"),null)}catch(e){return Ve("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function ft(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof b&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class pt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class mt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ht(this.lastLoginAt),this.creationTime=ht(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function gt(e){var t;const n=e.auth,i=await e.getIdToken(),r=await ft(e,async function(e,t){return tt(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));$e(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Me(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const h=e.isAnonymous,u=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!h&&u,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new mt(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class vt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(void 0!==e.idToken,"internal-error"),$e(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=dt(e);return $e(t,"internal-error"),$e(void 0!==t.exp,"internal-error"),$e(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return $e(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await nt(e,{},(async()=>{const n=S({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=rt(e,i,"/v1/token",`key=${r}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Je.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new vt;return n&&($e("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&($e("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&($e("number"==typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vt,this.toJSON())}_performRefresh(){return ze("not implemented")}}function yt(e,t){$e("string"==typeof e||void 0===e,"internal-error",{appName:t})}class wt{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=Me(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new mt(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await ft(this,this.stsTokenManager.getToken(this.auth,e));return $e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=D(e),i=await n.getIdToken(t),r=dt(i);$e(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:ht(ut(r.auth_time)),issuedAtTime:ht(ut(r.iat)),expirationTime:ht(ut(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=D(e);await gt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await gt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ft(this,async function(e,t){return tt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,c,l;const h=null!==(n=t.displayName)&&void 0!==n?n:void 0,u=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:E,providerData:b,stsTokenManager:_}=t;$e(y&&_,e,"internal-error");const I=vt.fromJSON(this.name,_);$e("string"==typeof y,e,"internal-error"),yt(h,e.name),yt(u,e.name),$e("boolean"==typeof w,e,"internal-error"),$e("boolean"==typeof E,e,"internal-error"),yt(d,e.name),yt(f,e.name),yt(p,e.name),yt(m,e.name),yt(g,e.name),yt(v,e.name);const T=new wt({uid:y,auth:e,email:u,emailVerified:w,displayName:h,isAnonymous:E,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:v});return b&&Array.isArray(b)&&(T.providerData=b.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t,n=!1){const i=new vt;i.updateFromServerResponse(t);const r=new wt({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await gt(r),r}}const Et=new Map;function bt(e){Ge(e instanceof Function,"Expected a class definition");let t=Et.get(e);return t?(Ge(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Et.set(e,t),t)}class _t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_t.type="NONE";const It=_t;function Tt(e,t,n){return`firebase:${e}:${t}:${n}`}class Ct{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Tt(this.userKey,i.apiKey,r),this.fullPersistenceKey=Tt("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Ct(bt(It),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||bt(It);const s=Tt(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const i=wt._fromJSON(e,t);n!==r&&(o=i),r=n;break}}catch(e){}const a=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(e){}}))),new Ct(r,e,n)):new Ct(r,e,n)}}function St(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Nt(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(At(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ot(t))return"Blackberry";if(Pt(t))return"Webos";if(kt(t))return"Safari";if((t.includes("chrome/")||Rt(t))&&!t.includes("edge/"))return"Chrome";if(Dt(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function At(e=E()){return/firefox\//i.test(e)}function kt(e=E()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Rt(e=E()){return/crios\//i.test(e)}function Nt(e=E()){return/iemobile/i.test(e)}function Dt(e=E()){return/android/i.test(e)}function Ot(e=E()){return/blackberry/i.test(e)}function Pt(e=E()){return/webos/i.test(e)}function Lt(e=E()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Mt(e=E()){return Lt(e)||Dt(e)||Pt(e)||Ot(e)||/windows phone/i.test(e)||Nt(e)}function xt(e,t=[]){let n;switch(e){case"Browser":n=St(E());break;case"Worker":n=`${St(E())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ee}/${i}`}class Ut{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(e){i(e)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class Ft{constructor(e){var t,n,i,r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class Vt{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bt(this),this.idTokenSubscription=new Bt(this),this.beforeStateQueue=new Ut(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ue,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bt(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Ct.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gt(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?D(e):null;return t&&$e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(bt(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return tt(e,"GET","/v2/passwordPolicy",et(e,t))}(this),t=new Ft(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bt(e)||this._popupRedirectResolver;$e(t,this,"argument-error"),this.redirectPersistenceManager=await Ct.create(this,[bt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(o,this,"internal-error"),o.then((()=>{s||r(this.currentUser)})),"function"==typeof t){const r=e.addObserver(t,n,i);return()=>{s=!0,r()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){Fe.logLevel<=U.WARN&&Fe.warn(`Auth (${Ee}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function jt(e){return D(e)}class Bt{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new R(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ht(e){return new Promise(((t,n)=>{const i=document.createElement("script");var r,s;i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=Be("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",(null!==(s=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==s?s:document).appendChild(i)}))}function $t(e){return`__${e}${Math.floor(1e6*Math.random())}`}class zt{constructor(e){this.type="recaptcha-enterprise",this.auth=jt(e)}async verify(e="verify",t=!1){function n(t,n,i){const r=window.grecaptcha;ct(r)?r.enterprise.ready((()=>{r.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{(async function(e,t){return tt(e,"GET","/v2/recaptchaConfig",et(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new lt(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((r=>{if(!t&&ct(window.grecaptcha))n(r,e,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));Ht("https://www.google.com/recaptcha/enterprise.js?render="+r).then((()=>{n(r,e,i)})).catch((e=>{i(e)}))}})).catch((e=>{i(e)}))}))}}async function Gt(e,t,n,i=!1){const r=new zt(e);let s;try{s=await r.verify(n)}catch(e){s=await r.verify(n,!0)}const o=Object.assign({},t);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}function qt(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Kt(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Wt{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ze("not implemented")}_getIdTokenResponse(e){return ze("not implemented")}_linkToIdToken(e,t){return ze("not implemented")}_getReauthenticationResolver(e){return ze("not implemented")}}async function Qt(e,t){return it(e,"POST","/v1/accounts:signInWithPassword",et(e,t))}class Xt extends Wt{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Xt(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Xt(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t,n,i){var r;if(null===(r=e._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Gt(e,t,n,"getOobCode"===n);return i(e,r)}return i(e,t).catch((async r=>{if("auth/missing-recaptcha-token"===r.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const r=await Gt(e,t,n,"getOobCode"===n);return i(e,r)}return Promise.reject(r)}))}(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Qt);case"emailLink":return async function(e,t){return it(e,"POST","/v1/accounts:signInWithEmailLink",et(e,t))}(e,{email:this._email,oobCode:this._password});default:je(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return async function(e,t){return tt(e,"POST","/v1/accounts:update",t)}(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return it(e,"POST","/v1/accounts:signInWithEmailLink",et(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:je(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Jt(e,t){return it(e,"POST","/v1/accounts:signInWithIdp",et(e,t))}class Yt extends Wt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Yt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):je("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=Me(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Yt(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return Jt(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Jt(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jt(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=S(t)}return e}}const Zt={USER_NOT_FOUND:"user-not-found"};class en extends Wt{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new en({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new en({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return it(e,"POST","/v1/accounts:signInWithPhoneNumber",et(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await it(e,"POST","/v1/accounts:signInWithPhoneNumber",et(e,t));if(n.temporaryProof)throw at(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return it(e,"POST","/v1/accounts:signInWithPhoneNumber",et(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Zt)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new en({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class tn{constructor(e){var t,n,i,r,s,o;const a=A(k(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);$e(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=A(k(e)).link,n=t?A(k(t)).deep_link_id:null,i=A(k(e)).deep_link_id;return(i?A(k(i)).link:null)||i||n||t||e}(e);try{return new tn(t)}catch(e){return null}}}class nn{constructor(){this.providerId=nn.PROVIDER_ID}static credential(e,t){return Xt._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=tn.parseLink(t);return $e(n,"argument-error"),Xt._fromEmailAndCode(e,n.code,n.tenantId)}}nn.PROVIDER_ID="password",nn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",nn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class rn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class sn extends rn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class on extends sn{constructor(){super("facebook.com")}static credential(e){return Yt._fromParams({providerId:on.PROVIDER_ID,signInMethod:on.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return on.credentialFromTaggedObject(e)}static credentialFromError(e){return on.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return on.credential(e.oauthAccessToken)}catch(e){return null}}}on.FACEBOOK_SIGN_IN_METHOD="facebook.com",on.PROVIDER_ID="facebook.com";class an extends sn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Yt._fromParams({providerId:an.PROVIDER_ID,signInMethod:an.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return an.credentialFromTaggedObject(e)}static credentialFromError(e){return an.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return an.credential(t,n)}catch(e){return null}}}an.GOOGLE_SIGN_IN_METHOD="google.com",an.PROVIDER_ID="google.com";class cn extends sn{constructor(){super("github.com")}static credential(e){return Yt._fromParams({providerId:cn.PROVIDER_ID,signInMethod:cn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cn.credentialFromTaggedObject(e)}static credentialFromError(e){return cn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return cn.credential(e.oauthAccessToken)}catch(e){return null}}}cn.GITHUB_SIGN_IN_METHOD="github.com",cn.PROVIDER_ID="github.com";class ln extends sn{constructor(){super("twitter.com")}static credential(e,t){return Yt._fromParams({providerId:ln.PROVIDER_ID,signInMethod:ln.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ln.credentialFromTaggedObject(e)}static credentialFromError(e){return ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return ln.credential(t,n)}catch(e){return null}}}ln.TWITTER_SIGN_IN_METHOD="twitter.com",ln.PROVIDER_ID="twitter.com";class hn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const r=await wt._fromIdTokenResponse(e,n,i),s=un(n);return new hn({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=un(n);return new hn({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function un(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class dn extends b{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,dn.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new dn(e,t,n,i)}}function fn(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw dn._fromErrorAndOperation(e,n,t,i);throw n}))}new WeakMap;const pn="__sak";class mn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pn,"1"),this.storage.removeItem(pn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class gn extends mn{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=E();return kt(e)||Lt(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Mt(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);!function(){const e=E();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||r===e.newValue||e.newValue===e.oldValue?i():setTimeout(i,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gn.type="LOCAL";const vn=gn;class yn extends mn{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}yn.type="SESSION";const wn=yn;class En{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new En(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async e=>e(t.origin,r))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function bn(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}En.receivers=[];class _n{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const c=bn("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(l),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function In(){return window}function Tn(){return void 0!==In().WorkerGlobalScope&&"function"==typeof In().importScripts}const Cn="firebaseLocalStorageDb",Sn="firebaseLocalStorage",An="fbase_key";class kn{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Rn(e,t){return e.transaction([Sn],t?"readwrite":"readonly").objectStore(Sn)}function Nn(){const e=indexedDB.open(Cn,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Sn,{keyPath:An})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Sn)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Cn);return new kn(e).toPromise()}(),t(await Nn()))}))}))}async function Dn(e,t,n){const i=Rn(e,!0).put({[An]:t,value:n});return new kn(i).toPromise()}function On(e,t){const n=Rn(e,!0).delete(t);return new kn(n).toPromise()}class Pn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Nn()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=En._getInstance(Tn()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new _n(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Nn();return await Dn(e,pn,"1"),await On(e,pn),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Dn(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Rn(e,!1).get(t),i=await new kn(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>On(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Rn(e,!1).getAll();return new kn(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Pn.type="LOCAL";const Ln=Pn;$t("rcb"),new Qe(3e4,6e4);class Mn{constructor(e){this.providerId=Mn.PROVIDER_ID,this.auth=jt(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var i;const r=await n.verify();try{let s;if($e("string"==typeof r,e,"argument-error"),$e("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){$e("enroll"===t.type,e,"internal-error");const n=await function(e,t){return tt(e,"POST","/v2/accounts/mfaEnrollment:start",et(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{$e("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;$e(n,e,"missing-multi-factor-info");const o=await function(e,t){return tt(e,"POST","/v2/accounts/mfaSignIn:start",et(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return tt(e,"POST","/v1/accounts:sendVerificationCode",et(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}(this.auth,e,D(t))}static credential(e,t){return en._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Mn.credentialFromTaggedObject(t)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?en._fromTokenResponse(t,n):null}}Mn.PROVIDER_ID="phone",Mn.PHONE_SIGN_IN_METHOD="phone";class xn extends Wt{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jt(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jt(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jt(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Un(e){return async function(e,t,n=!1){const i="signIn",r=await fn(e,i,t),s=await hn._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}(e.auth,new xn(e),e.bypassAuthState)}function Fn(e){const{auth:t,user:n}=e;return $e(n,t,"internal-error"),async function(e,t,n=!1){const{auth:i}=e,r="reauthenticate";try{const s=await ft(e,fn(i,r,t,e),n);$e(s.idToken,i,"internal-error");const o=dt(s.idToken);$e(o,i,"internal-error");const{sub:a}=o;return $e(e.uid===a,i,"user-mismatch"),hn._forOperation(e,r,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&je(i,"user-mismatch"),e}}(n,new xn(e),e.bypassAuthState)}async function Vn(e){const{auth:t,user:n}=e;return $e(n,t,"internal-error"),async function(e,t,n=!1){const i=await ft(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return hn._forOperation(e,"link",i)}(n,new xn(e),e.bypassAuthState)}class jn{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Un;case"linkViaPopup":case"linkViaRedirect":return Vn;case"reauthViaPopup":case"reauthViaRedirect":return Fn;default:je(this.auth,"internal-error")}}resolve(e){Ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Bn=new Qe(2e3,1e4);class Hn extends jn{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Hn.currentPopupAction&&Hn.currentPopupAction.cancel(),Hn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){Ge(1===this.filter.length,"Popup operations only handle one event");const e=bn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Be(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Be(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Bn.get())};e()}}Hn.currentPopupAction=null;const $n="pendingRedirect",zn=new Map;class Gn extends jn{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=zn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Tt($n,e.config.apiKey,e.name)}(t),i=function(e){return bt(e._redirectPersistence)}(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}zn.set(this.auth._key(),e)}return this.bypassAuthState||zn.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function qn(e,t){zn.set(e._key(),t)}async function Kn(e,t,n=!1){const i=jt(e),r=function(e,t){return t?bt(t):($e(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(i,t),s=new Gn(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class Wn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Xn(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Be(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qn(e))}saveEventToCache(e){this.cachedEventUids.add(Qn(e)),this.lastProcessedEventTime=Date.now()}}function Qn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Xn({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const Jn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yn=/^https?/;function Zn(e){const t=qe(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Yn.test(n))return!1;if(Jn.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const ei=new Qe(3e4,6e4);function ti(){const e=In().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let ni=null;function ii(e){return ni=ni||function(e){return new Promise(((t,n)=>{var i,r,s;function o(){ti(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ti(),n(Be(e,"network-request-failed"))},timeout:ei.get()})}if(null===(r=null===(i=In().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=In().gapi)||void 0===s?void 0:s.load)){const t=$t("iframefcb");return In()[t]=()=>{gapi.load?o():n(Be(e,"network-request-failed"))},Ht(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw ni=null,e}))}(e),ni}const ri=new Qe(5e3,15e3),si={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ai(e){const t=e.config;$e(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Xe(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:Ee},r=oi.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${S(i).slice(1)}`}const ci={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class li{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const hi=encodeURIComponent("fac");async function ui(e,t,n,i,r,s){$e(e.config.authDomain,e,"auth-domain-config-required"),$e(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Ee,eventId:r};if(t instanceof rn){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof sn){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];const c=await e._getAppCheckToken(),l=c?`#${hi}=${encodeURIComponent(c)}`:"";return`${function({config:e}){return e.emulator?Xe(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${S(a).slice(1)}${l}`}const di="webStorageSupport",fi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wn,this._completeRedirectFn=Kn,this._overrideRedirectResult=qn}async _openPopup(e,t,n,i){var r;return Ge(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),function(e,t,n,i=500,r=600){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},ci),{width:i.toString(),height:r.toString(),top:s,left:o}),l=E().toLowerCase();n&&(a=Rt(l)?"_blank":n),At(l)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=E()){var t;return Lt(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new li(null);const u=window.open(t||"",a,h);$e(u,e,"popup-blocked");try{u.focus()}catch(e){}return new li(u)}(e,await ui(e,t,n,qe(),i),bn())}async _openRedirect(e,t,n,i){return await this._originValidation(e),r=await ui(e,t,n,qe(),i),In().location.href=r,new Promise((()=>{}));var r}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Ge(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await ii(e),n=In().gapi;return $e(n,e,"internal-error"),t.open({where:document.body,url:ai(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:si,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=Be(e,"network-request-failed"),s=In().setTimeout((()=>{i(r)}),ri.get());function o(){In().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{i(r)}))}))))}(e),n=new Wn(e);return t.register("authEvent",(t=>($e(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(di,{type:di},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[di];void 0!==r&&t(!!r),je(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return tt(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(Zn(e))return}catch(e){}je(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Mt()||kt()||Lt()}};var pi="@firebase/auth",mi="1.3.2";class gi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const vi=y("authIdTokenMaxAge")||300;let yi=null;var wi;wi="Browser",ge(new O("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;$e(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:wi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xt(wi)},c=new Vt(n,i,r,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(bt);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(c,t),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),ge(new O("auth-internal",(e=>{return t=jt(e.getProvider("auth").getImmediate()),new gi(t);var t}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ie(pi,mi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(wi)),Ie(pi,mi,"esm2017");var Ei,bi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_i={},Ii=Ii||{},Ti=bi||self;function Ci(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Si(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ai="closure_uid_"+(1e9*Math.random()>>>0),ki=0;function Ri(e,t,n){return e.call.apply(e.bind,arguments)}function Ni(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Di(e,t,n){return(Di=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ri:Ni).apply(null,arguments)}function Oi(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Pi(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function Li(){this.s=this.s,this.o=this.o}Li.prototype.s=!1,Li.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Ai)&&e[Ai]||(e[Ai]=++ki))},Li.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Mi=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function xi(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function Ui(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(Ci(n)){const t=e.length||0,i=n.length||0;e.length=t+i;for(let r=0;r<i;r++)e[t+r]=n[r]}else e.push(n)}}function Fi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Fi.prototype.h=function(){this.defaultPrevented=!0};var Vi=function(){if(!Ti.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ti.addEventListener("test",(()=>{}),t),Ti.removeEventListener("test",(()=>{}),t)}catch(e){}return e}();function ji(e){return/^[\s\xa0]*$/.test(e)}function Bi(){var e=Ti.navigator;return e&&(e=e.userAgent)?e:""}function Hi(e){return-1!=Bi().indexOf(e)}function $i(e){return $i[" "](e),e}$i[" "]=function(){};var zi,Gi,qi,Ki=Hi("Opera"),Wi=Hi("Trident")||Hi("MSIE"),Qi=Hi("Edge"),Xi=Qi||Wi,Ji=Hi("Gecko")&&!(-1!=Bi().toLowerCase().indexOf("webkit")&&!Hi("Edge"))&&!(Hi("Trident")||Hi("MSIE"))&&!Hi("Edge"),Yi=-1!=Bi().toLowerCase().indexOf("webkit")&&!Hi("Edge");function Zi(){var e=Ti.document;return e?e.documentMode:void 0}e:{var er="",tr=(Gi=Bi(),Ji?/rv:([^\);]+)(\)|;)/.exec(Gi):Qi?/Edge\/([\d\.]+)/.exec(Gi):Wi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gi):Yi?/WebKit\/(\S+)/.exec(Gi):Ki?/(?:Version)[ \/]?(\S+)/.exec(Gi):void 0);if(tr&&(er=tr?tr[1]:""),Wi){var nr=Zi();if(null!=nr&&nr>parseFloat(er)){zi=String(nr);break e}}zi=er}Ti.document&&Wi?qi=Zi()||parseInt(zi,10)||void 0:qi=void 0;var ir=qi;function rr(e,t){if(Fi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ji){e:{try{$i(t.nodeName);var r=!0;break e}catch(e){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:sr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&rr.$.h.call(this)}}Pi(rr,Fi);var sr={2:"touch",3:"pen",4:"mouse"};rr.prototype.h=function(){rr.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var or="closure_listenable_"+(1e6*Math.random()|0),ar=0;function cr(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.la=r,this.key=++ar,this.fa=this.ia=!1}function lr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function hr(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function ur(e){const t={};for(const n in e)t[n]=e[n];return t}const dr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fr(e,t){let n,i;for(let t=1;t<arguments.length;t++){for(n in i=arguments[t],i)e[n]=i[n];for(let t=0;t<dr.length;t++)n=dr[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function pr(e){this.src=e,this.g={},this.h=0}function mr(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=Mi(r,t);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(lr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function gr(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==i)return r}return-1}pr.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=gr(e,t,i,r);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new cr(t,this.src,s,!!i,r)).ia=n,e.push(t)),t};var vr="closure_lm_"+(1e6*Math.random()|0),yr={};function wr(e,t,n,i,r){if(i&&i.once)return br(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)wr(e,t[s],n,i,r);return null}return n=kr(n),e&&e[or]?e.O(t,n,Si(i)?!!i.capture:!!i,r):Er(e,t,n,!1,i,r)}function Er(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var o=Si(r)?!!r.capture:!!r,a=Sr(e);if(a||(e[vr]=a=new pr(e)),(n=a.add(t,n,i,o,s)).proxy)return n;if(i=function(){const e=Cr;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)Vi||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(Tr(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function br(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)br(e,t[s],n,i,r);return null}return n=kr(n),e&&e[or]?e.P(t,n,Si(i)?!!i.capture:!!i,r):Er(e,t,n,!0,i,r)}function _r(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)_r(e,t[s],n,i,r);else i=Si(i)?!!i.capture:!!i,n=kr(n),e&&e[or]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=gr(s=e.g[t],n,i,r))&&(lr(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=Sr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=gr(t,n,i,r)),(n=-1<e?t[e]:null)&&Ir(n))}function Ir(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[or])mr(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(Tr(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Sr(t))?(mr(n,e),0==n.h&&(n.src=null,t[vr]=null)):lr(e)}}}function Tr(e){return e in yr?yr[e]:yr[e]="on"+e}function Cr(e,t){if(e.fa)e=!0;else{t=new rr(t,this);var n=e.listener,i=e.la||e.src;e.ia&&Ir(e),e=n.call(i,t)}return e}function Sr(e){return(e=e[vr])instanceof pr?e:null}var Ar="__closure_events_fn_"+(1e9*Math.random()>>>0);function kr(e){return"function"==typeof e?e:(e[Ar]||(e[Ar]=function(t){return e.handleEvent(t)}),e[Ar])}function Rr(){Li.call(this),this.i=new pr(this),this.S=this,this.J=null}function Nr(e,t){var n,i=e.J;if(i)for(n=[];i;i=i.J)n.push(i);if(e=e.S,i=t.type||t,"string"==typeof t)t=new Fi(t,e);else if(t instanceof Fi)t.target=t.target||e;else{var r=t;fr(t=new Fi(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=Dr(o,i,!0,t)&&r}if(r=Dr(o=t.g=e,i,!0,t)&&r,r=Dr(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=Dr(o=t.g=n[s],i,!1,t)&&r}function Dr(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&mr(e.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}Pi(Rr,Li),Rr.prototype[or]=!0,Rr.prototype.removeEventListener=function(e,t,n,i){_r(this,e,t,n,i)},Rr.prototype.N=function(){if(Rr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)lr(n[i]);delete t.g[e],t.h--}}this.J=null},Rr.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},Rr.prototype.P=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var Or=Ti.JSON.stringify;function Pr(){var e=jr;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Lr=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Mr),(e=>e.reset()));class Mr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function xr(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ur(e){Ti.setTimeout((()=>{throw e}),0)}let Fr,Vr=!1,jr=new class{constructor(){this.h=this.g=null}add(e,t){const n=Lr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Br=()=>{const e=Ti.Promise.resolve(void 0);Fr=()=>{e.then(Hr)}};var Hr=()=>{for(var e;e=Pr();){try{e.h.call(e.g)}catch(e){Ur(e)}var t=Lr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Vr=!1};function $r(e,t){Rr.call(this),this.h=e||1,this.g=t||Ti,this.j=Di(this.qb,this),this.l=Date.now()}function zr(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Gr(e,t,n){if("function"==typeof e)n&&(e=Di(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Di(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ti.setTimeout(e,t||0)}function qr(e){e.g=Gr((()=>{e.g=null,e.i&&(e.i=!1,qr(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Pi($r,Rr),(Ei=$r.prototype).ga=!1,Ei.T=null,Ei.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Nr(this,"tick"),this.ga&&(zr(this),this.start()))}},Ei.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ei.N=function(){$r.$.N.call(this),zr(this),delete this.g};class Kr extends Li{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:qr(this)}N(){super.N(),this.g&&(Ti.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(e){Li.call(this),this.h=e,this.g={}}Pi(Wr,Li);var Qr=[];function Xr(e,t,n,i){Array.isArray(n)||(n&&(Qr[0]=n.toString()),n=Qr);for(var r=0;r<n.length;r++){var s=wr(t,n[r],i||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Jr(e){hr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ir(e)}),e),e.g={}}function Yr(){this.g=!0}function Zr(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return Or(n)}catch(e){return t}}(e,n)+(i?" "+i:"")}))}Wr.prototype.N=function(){Wr.$.N.call(this),Jr(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yr.prototype.Ea=function(){this.g=!1},Yr.prototype.info=function(){};var es={},ts=null;function ns(){return ts=ts||new Rr}function is(e){Fi.call(this,es.Ta,e)}function rs(e){const t=ns();Nr(t,new is(t))}function ss(e,t){Fi.call(this,es.STAT_EVENT,e),this.stat=t}function os(e){const t=ns();Nr(t,new ss(t,e))}function as(e,t){Fi.call(this,es.Ua,e),this.size=t}function cs(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Ti.setTimeout((function(){e()}),t)}es.Ta="serverreachability",Pi(is,Fi),es.STAT_EVENT="statevent",Pi(ss,Fi),es.Ua="timingevent",Pi(as,Fi);var ls={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},hs={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function us(){}function ds(e){return e.h||(e.h=e.i())}function fs(){}us.prototype.h=null;var ps,ms={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function gs(){Fi.call(this,"d")}function vs(){Fi.call(this,"c")}function ys(){}function ws(e,t,n,i){this.l=e,this.j=t,this.m=n,this.W=i||1,this.U=new Wr(this),this.P=bs,e=Xi?125:void 0,this.V=new $r(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Es}function Es(){this.i=null,this.g="",this.h=!1}Pi(gs,Fi),Pi(vs,Fi),Pi(ys,us),ys.prototype.g=function(){return new XMLHttpRequest},ys.prototype.i=function(){return{}},ps=new ys;var bs=45e3,_s={},Is={};function Ts(e,t,n){e.L=1,e.v=$s(Fs(t)),e.s=n,e.S=!0,Cs(e,null)}function Cs(e,t){e.G=Date.now(),Rs(e),e.A=Fs(e.v);var n=e.A,i=e.W;Array.isArray(i)||(i=[String(i)]),no(n.i,"t",i),e.C=0,n=e.l.J,e.h=new Es,e.g=ia(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Kr(Di(e.Pa,e,e.g),e.O)),Xr(e.U,e.g,"readystatechange",e.nb),t=e.I?ur(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),rs(),function(e,t,n,i,r,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var h=l[0];l=l[1];var u=h.split("_");o=2<=u.length&&"type"==u[1]?o+(h+"=")+l+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Ss(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.l.Ha}function As(e,t,n){let i,r=!0;for(;!e.J&&e.C<n.length;){if(i=ks(e,n),i==Is){4==t&&(e.o=4,os(14),r=!1),Zr(e.j,e.m,null,"[Incomplete Response]");break}if(i==_s){e.o=4,os(15),Zr(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}Zr(e.j,e.m,i,null),Ls(e,i)}Ss(e)&&i!=Is&&i!=_s&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,os(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Qo(t),t.M=!0,os(11))):(Zr(e.j,e.m,n,"[Invalid Chunked Response]"),Ps(e),Os(e))}function ks(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?Is:(n=Number(t.substring(n,i)),isNaN(n)?_s:(i+=1)+n>t.length?Is:(t=t.slice(i,i+n),e.C=i+n,t))}function Rs(e){e.Y=Date.now()+e.P,Ns(e,e.P)}function Ns(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=cs(Di(e.lb,e),t)}function Ds(e){e.B&&(Ti.clearTimeout(e.B),e.B=null)}function Os(e){0==e.l.H||e.J||Yo(e.l,e)}function Ps(e){Ds(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,zr(e.V),Jr(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Ls(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||lo(n.i,e)))if(!e.K&&lo(n.i,e)&&3==n.H){try{var i=n.Ja.g.parse(t)}catch(e){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Jo(n),Bo(n)}Wo(n),os(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=cs(Di(n.ib,n),6e3));if(1>=co(n.i)&&n.oa){try{n.oa()}catch(e){}n.oa=void 0}}else ea(n,11)}else if((e.K||n.g==e)&&Jo(n),!ji(t))for(r=n.Ja.g.parse(t),t=0;t<r.length;t++){let l=r[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const r=l[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const h=l[5];null!=h&&"number"==typeof h&&0<h&&(i=1.5*h,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ho(s,s.h),s.h=null))}if(i.F){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.Da=e,Hs(i.I,i.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((i=n).wa=na(i,i.J?i.pa:null,i.Y),o.K){uo(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.B&&(Ds(a),Rs(a)),i.g=o}else Ko(i);0<n.j.length&&$o(n)}else"stop"!=l[0]&&"close"!=l[0]||ea(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?ea(n,7):jo(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}rs()}catch(e){}}function Ms(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ci(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(Ci(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}(e),i=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(Ci(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],n&&n[s],e)}(Ei=ws.prototype).setTimeout=function(e){this.P=e},Ei.nb=function(e){e=e.target;const t=this.M;t&&3==Lo(e)?t.l():this.Pa(e)},Ei.Pa=function(e){try{if(e==this.g)e:{const h=Lo(this.g);var t=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||Xi||this.g&&(this.h.h||this.g.ja()||Mo(this.g)))){this.J||4!=h||7==t||rs(),Ds(this);var n=this.g.da();this.ca=n;t:if(Ss(this)){var i=Mo(this.g);e="";var r=i.length,s=4==Lo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ps(this),Os(this);var o="";break t}this.h.i=new Ti.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,i,r,s,o){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ji(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.o=3,os(12),Ps(this),Os(this);break e}Zr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ls(this,n)}this.S?(As(this,h,o),Xi&&this.i&&3==h&&(Xr(this.U,this.V,"tick",this.mb),this.V.start())):(Zr(this.j,this.m,o,null),Ls(this,o)),4==h&&Ps(this),this.i&&!this.J&&(4==h?Yo(this.l,this):(this.i=!1,Rs(this)))}else(function(e){const t={};e=(e.g&&2<=Lo(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(ji(e[i]))continue;var n=xr(e[i]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[r]||[];t[r]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,os(12)):(this.o=0,os(13)),Ps(this),Os(this)}}}catch(e){}},Ei.mb=function(){if(this.g){var e=Lo(this.g),t=this.g.ja();this.C<t.length&&(Ds(this),As(this,e,t),this.i&&4!=e&&Rs(this))}},Ei.cancel=function(){this.J=!0,Ps(this)},Ei.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(rs(),os(17)),Ps(this),this.o=2,Os(this)):Ns(this,this.Y-e)};var xs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Us(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Us){this.h=e.h,Vs(this,e.j),this.s=e.s,this.g=e.g,js(this,e.m),this.l=e.l;var t=e.i,n=new Ys;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Bs(this,n),this.o=e.o}else e&&(t=String(e).match(xs))?(this.h=!1,Vs(this,t[1]||"",!0),this.s=zs(t[2]||""),this.g=zs(t[3]||"",!0),js(this,t[4]),this.l=zs(t[5]||"",!0),Bs(this,t[6]||"",!0),this.o=zs(t[7]||"")):(this.h=!1,this.i=new Ys(null,this.h))}function Fs(e){return new Us(e)}function Vs(e,t,n){e.j=n?zs(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function js(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Bs(e,t,n){t instanceof Ys?(e.i=t,function(e,t){t&&!e.j&&(Zs(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(eo(this,t),no(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Gs(t,Xs)),e.i=new Ys(t,e.h))}function Hs(e,t,n){e.i.set(t,n)}function $s(e){return Hs(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function zs(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Gs(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,qs),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function qs(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Us.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Gs(t,Ks,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Gs(t,Ks,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Gs(n,"/"==n.charAt(0)?Qs:Ws,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Gs(n,Js)),e.join("")};var Ks=/[#\/\?@]/g,Ws=/[#\?:]/g,Qs=/[#\?]/g,Xs=/[#\?@]/g,Js=/#/g;function Ys(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Zs(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function eo(e,t){Zs(e),t=io(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function to(e,t){return Zs(e),t=io(e,t),e.g.has(t)}function no(e,t,n){eo(e,t),0<n.length&&(e.i=null,e.g.set(io(e,t),xi(n)),e.h+=n.length)}function io(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ei=Ys.prototype).add=function(e,t){Zs(this),this.i=null,e=io(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ei.forEach=function(e,t){Zs(this),this.g.forEach((function(n,i){n.forEach((function(n){e.call(t,n,i,this)}),this)}),this)},Ei.ta=function(){Zs(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let e=0;e<r.length;e++)n.push(t[i])}return n},Ei.Z=function(e){Zs(this);let t=[];if("string"==typeof e)to(this,e)&&(t=t.concat(this.g.get(io(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ei.set=function(e,t){return Zs(this),this.i=null,to(this,e=io(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ei.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Ei.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),e.push(r)}}return this.i=e.join("&")};var ro=class{constructor(e,t){this.g=e,this.map=t}};function so(e){this.l=e||oo,e=Ti.PerformanceNavigationTiming?0<(e=Ti.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Ti.g&&Ti.g.Ka&&Ti.g.Ka()&&Ti.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var oo=10;function ao(e){return!!e.h||!!e.g&&e.g.size>=e.j}function co(e){return e.h?1:e.g?e.g.size:0}function lo(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ho(e,t){e.g?e.g.add(t):e.h=t}function uo(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function fo(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return xi(e.i)}so.prototype.cancel=function(){if(this.i=fo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var po=class{stringify(e){return Ti.JSON.stringify(e,void 0)}parse(e){return Ti.JSON.parse(e,void 0)}};function mo(){this.g=new po}function go(e,t,n){const i=n||"";try{Ms(e,(function(e,n){let r=e;Si(e)&&(r=Or(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(e){throw t.push(i+"type="+encodeURIComponent("_badmap")),e}}function vo(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(e){}}function yo(e){this.l=e.ec||null,this.j=e.ob||!1}function wo(e,t){Rr.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Eo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pi(yo,us),yo.prototype.g=function(){return new wo(this.l,this.j)},yo.prototype.i=function(e){return function(){return e}}({}),Pi(wo,Rr);var Eo=0;function bo(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function _o(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Io(e)}function Io(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ei=wo.prototype).open=function(e,t){if(this.readyState!=Eo)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Io(this)},Ei.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Ti).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Ei.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_o(this)),this.readyState=Eo},Ei.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Io(this)),this.g&&(this.readyState=3,Io(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Ti.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;bo(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Ei.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?_o(this):Io(this),3==this.readyState&&bo(this)}},Ei.Za=function(e){this.g&&(this.response=this.responseText=e,_o(this))},Ei.Ya=function(e){this.g&&(this.response=e,_o(this))},Ei.ka=function(){this.g&&_o(this)},Ei.setRequestHeader=function(e,t){this.v.append(e,t)},Ei.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ei.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(wo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var To=Ti.JSON.parse;function Co(e){Rr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=So,this.L=this.M=!1}Pi(Co,Rr);var So="",Ao=/^https?$/i,ko=["POST","PUT"];function Ro(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,No(e),Oo(e)}function No(e){e.F||(e.F=!0,Nr(e,"complete"),Nr(e,"error"))}function Do(e){if(e.h&&void 0!==Ii&&(!e.C[1]||4!=Lo(e)||2!=e.da()))if(e.v&&4==Lo(e))Gr(e.La,0,e);else if(Nr(e,"readystatechange"),4==Lo(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===o){var r=String(e.I).match(xs)[1]||null;!r&&Ti.self&&Ti.self.location&&(r=Ti.self.location.protocol.slice(0,-1)),i=!Ao.test(r?r.toLowerCase():"")}n=i}if(n)Nr(e,"complete"),Nr(e,"success");else{e.m=6;try{var s=2<Lo(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.da()+"]",No(e)}}finally{Oo(e)}}}function Oo(e,t){if(e.g){Po(e);const n=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Nr(e,"ready");try{n.onreadystatechange=i}catch(e){}}}function Po(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Ti.clearTimeout(e.A),e.A=null)}function Lo(e){return e.g?e.g.readyState:0}function Mo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case So:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function xo(e){let t="";return hr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Uo(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=xo(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Hs(e,t,n))}function Fo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Vo(e){this.Ga=0,this.j=[],this.l=new Yr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Fo("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Fo("baseRetryDelayMs",5e3,e),this.hb=Fo("retryDelaySeedMs",1e4,e),this.eb=Fo("forwardChannelMaxRetries",2,e),this.xa=Fo("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new so(e&&e.concurrentRequestLimit),this.Ja=new mo,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function jo(e){if(Ho(e),3==e.H){var t=e.W++,n=Fs(e.I);if(Hs(n,"SID",e.K),Hs(n,"RID",t),Hs(n,"TYPE","terminate"),Go(e,n),(t=new ws(e,e.l,t)).L=2,t.v=$s(Fs(n)),n=!1,Ti.navigator&&Ti.navigator.sendBeacon)try{n=Ti.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!n&&Ti.Image&&((new Image).src=t.v,n=!0),n||(t.g=ia(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Rs(t)}ta(e)}function Bo(e){e.g&&(Qo(e),e.g.cancel(),e.g=null)}function Ho(e){Bo(e),e.u&&(Ti.clearTimeout(e.u),e.u=null),Jo(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Ti.clearTimeout(e.m),e.m=null)}function $o(e){if(!ao(e.i)&&!e.m){e.m=!0;var t=e.Na;Fr||Br(),Vr||(Fr(),Vr=!0),jr.add(t,e),e.C=0}}function zo(e,t){var n;n=t?t.m:e.W++;const i=Fs(e.I);Hs(i,"SID",e.K),Hs(i,"RID",n),Hs(i,"AID",e.V),Go(e,i),e.o&&e.s&&Uo(i,e.o,e.s),n=new ws(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=qo(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ho(e.i,n),Ts(n,i,t)}function Go(e,t){e.na&&hr(e.na,(function(e,n){Hs(t,n,e)})),e.h&&Ms({},(function(e,n){Hs(t,n,e)}))}function qo(e,t,n){n=Math.min(e.j.length,n);var i=e.h?Di(e.h.Va,e.h,e):null;e:{var r=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=t,0>n)t=Math.max(0,r[o].g-100),s=!1;else try{go(a,e,"req"+n+"_")}catch(e){i&&i(a)}}if(s){i=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,i}function Ko(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Fr||Br(),Vr||(Fr(),Vr=!0),jr.add(t,e),e.A=0}}function Wo(e){return!(e.g||e.u||3<=e.A||(e.ba++,e.u=cs(Di(e.Ma,e),Zo(e,e.A)),e.A++,0))}function Qo(e){null!=e.B&&(Ti.clearTimeout(e.B),e.B=null)}function Xo(e){e.g=new ws(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Fs(e.wa);Hs(t,"RID","rpc"),Hs(t,"SID",e.K),Hs(t,"AID",e.V),Hs(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Hs(t,"TO",e.qa),Hs(t,"TYPE","xmlhttp"),Go(e,t),e.o&&e.s&&Uo(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=$s(Fs(t)),n.s=null,n.S=!0,Cs(n,e)}function Jo(e){null!=e.v&&(Ti.clearTimeout(e.v),e.v=null)}function Yo(e,t){var n=null;if(e.g==t){Jo(e),Qo(e),e.g=null;var i=2}else{if(!lo(e.i,t))return;n=t.F,uo(e.i,t),i=1}if(0!=e.H)if(t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.G;var r=e.C;Nr(i=ns(),new as(i,n)),$o(e)}else Ko(e);else if(3==(r=t.o)||0==r&&0<t.ca||!(1==i&&function(e,t){return!(co(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=cs(Di(e.Na,e,t),Zo(e,e.C)),e.C++,0)))}(e,t)||2==i&&Wo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:ea(e,5);break;case 4:ea(e,10);break;case 3:ea(e,6);break;default:ea(e,2)}}function Zo(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ea(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var i=Di(e.pb,e);n||(n=new Us("//www.google.com/images/cleardot.gif"),Ti.location&&"http"==Ti.location.protocol||Vs(n,"https"),$s(n)),function(e,t){const n=new Yr;if(Ti.Image){const i=new Image;i.onload=Oi(vo,n,i,"TestLoadImage: loaded",!0,t),i.onerror=Oi(vo,n,i,"TestLoadImage: error",!1,t),i.onabort=Oi(vo,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=Oi(vo,n,i,"TestLoadImage: timeout",!1,t),Ti.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(n.toString(),i)}else os(2);e.H=0,e.h&&e.h.za(t),ta(e),Ho(e)}function ta(e){if(e.H=0,e.ma=[],e.h){const t=fo(e.i);0==t.length&&0==e.j.length||(Ui(e.ma,t),Ui(e.ma,e.j),e.i.i.length=0,xi(e.j),e.j.length=0),e.h.ya()}}function na(e,t,n){var i=n instanceof Us?Fs(n):new Us(n);if(""!=i.g)t&&(i.g=t+"."+i.g),js(i,i.m);else{var r=Ti.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new Us(null);i&&Vs(s,i),t&&(s.g=t),r&&js(s,r),n&&(s.l=n),i=s}return n=e.F,t=e.Da,n&&t&&Hs(i,n,t),Hs(i,"VER",e.ra),Go(e,i),i}function ia(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Co(new yo({ob:!0})):new Co(e.va)).Oa(e.J),t}function ra(){}function sa(){if(Wi&&!(10<=Number(ir)))throw Error("Environmental error: no available transport.")}function oa(e,t){Rr.call(this),this.g=new Vo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ji(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ji(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new la(this)}function aa(e){gs.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ca(){vs.call(this),this.status=1}function la(e){this.g=e}function ha(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ua(e,t,n){n||(n=0);var i=Array(16);if("string"==typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var s=e.g[3],o=t+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(t^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+s&4294967295}function da(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var s=0|e[r];i&&s==t||(n[r]=s,i=!1)}this.g=n}(Ei=Co.prototype).Oa=function(e){this.M=e},Ei.ha=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ps.g(),this.C=this.u?ds(this.u):ds(ps),this.g.onreadystatechange=Di(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(e){return void Ro(this,e)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),r=Ti.FormData&&e instanceof Ti.FormData,!(0<=Mi(ko,t))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Po(this),0<this.B&&((this.L=function(e){return Wi&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Di(this.ua,this)):this.A=Gr(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){Ro(this,e)}},Ei.ua=function(){void 0!==Ii&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nr(this,"timeout"),this.abort(8))},Ei.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Nr(this,"complete"),Nr(this,"abort"),Oo(this))},Ei.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Oo(this,!0)),Co.$.N.call(this)},Ei.La=function(){this.s||(this.G||this.v||this.l?Do(this):this.kb())},Ei.kb=function(){Do(this)},Ei.isActive=function(){return!!this.g},Ei.da=function(){try{return 2<Lo(this)?this.g.status:-1}catch(e){return-1}},Ei.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},Ei.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),To(t)}},Ei.Ia=function(){return this.m},Ei.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ei=Vo.prototype).ra=8,Ei.H=1,Ei.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const r=new ws(this,this.l,e);let s=this.s;if(this.U&&(s?(s=ur(s),fr(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=qo(this,r,t),Hs(n=Fs(this.I),"RID",e),Hs(n,"CVER",22),this.F&&Hs(n,"X-HTTP-Session-Id",this.F),Go(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(xo(s)))+"&"+t:this.o&&Uo(n,this.o,s)),ho(this.i,r),this.bb&&Hs(n,"TYPE","init"),this.P?(Hs(n,"$req",t),Hs(n,"SID","null"),r.aa=!0,Ts(r,n,null)):Ts(r,n,t),this.H=2}}else 3==this.H&&(e?zo(this,e):0==this.j.length||ao(this.i)||zo(this))},Ei.Ma=function(){if(this.u=null,Xo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=cs(Di(this.jb,this),e)}},Ei.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,os(10),Bo(this),Xo(this))},Ei.ib=function(){null!=this.v&&(this.v=null,Bo(this),Wo(this),os(19))},Ei.pb=function(e){e?(this.l.info("Successfully pinged google.com"),os(2)):(this.l.info("Failed to ping google.com"),os(1))},Ei.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ei=ra.prototype).Ba=function(){},Ei.Aa=function(){},Ei.za=function(){},Ei.ya=function(){},Ei.isActive=function(){return!0},Ei.Va=function(){},sa.prototype.g=function(e,t){return new oa(e,t)},Pi(oa,Rr),oa.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;os(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=na(e,null,e.Y),$o(e)},oa.prototype.close=function(){jo(this.g)},oa.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Or(e),e=n);t.j.push(new ro(t.fb++,e)),3==t.H&&$o(t)},oa.prototype.N=function(){this.g.h=null,delete this.j,jo(this.g),delete this.g,oa.$.N.call(this)},Pi(aa,gs),Pi(ca,vs),Pi(la,ra),la.prototype.Ba=function(){Nr(this.g,"a")},la.prototype.Aa=function(e){Nr(this.g,new aa(e))},la.prototype.za=function(e){Nr(this.g,new ca)},la.prototype.ya=function(){Nr(this.g,"b")},Pi(ha,(function(){this.blockSize=-1})),ha.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ha.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=this.m,r=this.h,s=0;s<t;){if(0==r)for(;s<=n;)ua(this,e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(i[r++]=e.charCodeAt(s++),r==this.blockSize){ua(this,i),r=0;break}}else for(;s<t;)if(i[r++]=e[s++],r==this.blockSize){ua(this,i),r=0;break}}this.h=r,this.i+=t},ha.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var fa={};function pa(e){return-128<=e&&128>e?function(e,t){var n=fa;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=function(e){return new da([0|e],0>e?-1:0)}(e)}(e):new da([0|e],0>e?-1:0)}function ma(e){if(isNaN(e)||!isFinite(e))return va;if(0>e)return _a(ma(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=ga;return new da(t,0)}var ga=4294967296,va=pa(0),ya=pa(1),wa=pa(16777216);function Ea(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function ba(e){return-1==e.h}function _a(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new da(n,~e.h).add(ya)}function Ia(e,t){return e.add(_a(t))}function Ta(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Ca(e,t){this.g=e,this.h=t}function Sa(e,t){if(Ea(t))throw Error("division by zero");if(Ea(e))return new Ca(va,va);if(ba(e))return t=Sa(_a(e),t),new Ca(_a(t.g),_a(t.h));if(ba(t))return t=Sa(e,_a(t)),new Ca(_a(t.g),t.h);if(30<e.g.length){if(ba(e)||ba(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ya,i=t;0>=i.X(e);)n=Aa(n),i=Aa(i);var r=ka(n,1),s=ka(i,1);for(i=ka(i,2),n=ka(n,2);!Ea(i);){var o=s.add(i);0>=o.X(e)&&(r=r.add(n),s=o),i=ka(i,1),n=ka(n,1)}return t=Ia(e,r.R(t)),new Ca(r,t)}for(r=va;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(s=ma(n)).R(t);ba(o)||0<o.X(e);)o=(s=ma(n-=i)).R(t);Ea(s)&&(s=ya),r=r.add(s),e=Ia(e,o)}return new Ca(r,e)}function Aa(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.D(i)<<1|e.D(i-1)>>>31;return new da(n,e.h)}function ka(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,r=[],s=0;s<i;s++)r[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new da(r,e.h)}(Ei=da.prototype).ea=function(){if(ba(this))return-_a(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.D(n);e+=(0<=i?i:ga+i)*t,t*=ga}return e},Ei.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Ea(this))return"0";if(ba(this))return"-"+_a(this).toString(e);for(var t=ma(Math.pow(e,6)),n=this,i="";;){var r=Sa(n,t).g,s=((0<(n=Ia(n,r.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Ea(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},Ei.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Ei.X=function(e){return ba(e=Ia(this,e))?-1:Ea(e)?0:1},Ei.abs=function(){return ba(this)?_a(this):this},Ei.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,r=0;r<=t;r++){var s=i+(65535&this.D(r))+(65535&e.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(e.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new da(n,-2147483648&n[n.length-1]?-1:0)},Ei.R=function(e){if(Ea(this)||Ea(e))return va;if(ba(this))return ba(e)?_a(this).R(_a(e)):_a(_a(this).R(e));if(ba(e))return _a(this.R(_a(e)));if(0>this.X(wa)&&0>e.X(wa))return ma(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<e.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=e.D(r)>>>16,c=65535&e.D(r);n[2*i+2*r]+=o*c,Ta(n,2*i+2*r),n[2*i+2*r+1]+=s*c,Ta(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Ta(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Ta(n,2*i+2*r+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new da(n,0)},Ei.gb=function(e){return Sa(this,e).h},Ei.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)&e.D(i);return new da(n,this.h&e.h)},Ei.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)|e.D(i);return new da(n,this.h|e.h)},Ei.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)^e.D(i);return new da(n,this.h^e.h)},sa.prototype.createWebChannel=sa.prototype.g,oa.prototype.send=oa.prototype.u,oa.prototype.open=oa.prototype.m,oa.prototype.close=oa.prototype.close,ls.NO_ERROR=0,ls.TIMEOUT=8,ls.HTTP_ERROR=6,hs.COMPLETE="complete",fs.EventType=ms,ms.OPEN="a",ms.CLOSE="b",ms.ERROR="c",ms.MESSAGE="d",Rr.prototype.listen=Rr.prototype.O,Co.prototype.listenOnce=Co.prototype.P,Co.prototype.getLastError=Co.prototype.Sa,Co.prototype.getLastErrorCode=Co.prototype.Ia,Co.prototype.getStatus=Co.prototype.da,Co.prototype.getResponseJson=Co.prototype.Wa,Co.prototype.getResponseText=Co.prototype.ja,Co.prototype.send=Co.prototype.ha,Co.prototype.setWithCredentials=Co.prototype.Oa,ha.prototype.digest=ha.prototype.l,ha.prototype.reset=ha.prototype.reset,ha.prototype.update=ha.prototype.j,da.prototype.add=da.prototype.add,da.prototype.multiply=da.prototype.R,da.prototype.modulo=da.prototype.gb,da.prototype.compare=da.prototype.X,da.prototype.toNumber=da.prototype.ea,da.prototype.toString=da.prototype.toString,da.prototype.getBits=da.prototype.D,da.fromNumber=ma,da.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return _a(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=ma(Math.pow(n,8)),r=va,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=ma(Math.pow(n,o)),r=r.R(o).add(ma(a))):r=(r=r.R(i)).add(ma(a))}return r};var Ra=_i.createWebChannelTransport=function(){return new sa},Na=_i.getStatEventTarget=function(){return ns()},Da=_i.ErrorCode=ls,Oa=_i.EventType=hs,Pa=_i.Event=es,La=_i.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ma=_i.FetchXmlHttpFactory=yo,xa=_i.WebChannel=fs,Ua=_i.XhrIo=Co,Fa=(_i.Md5=ha,_i.Integer=da);const Va="@firebase/firestore";class ja{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ja.UNAUTHENTICATED=new ja(null),ja.GOOGLE_CREDENTIALS=new ja("google-credentials-uid"),ja.FIRST_PARTY=new ja("first-party-uid"),ja.MOCK_USER=new ja("mock-user");let Ba="10.5.2";const Ha=new $("@firebase/firestore");function $a(){return Ha.logLevel}function za(e,...t){if(Ha.logLevel<=U.DEBUG){const n=t.map(Ka);Ha.debug(`Firestore (${Ba}): ${e}`,...n)}}function Ga(e,...t){if(Ha.logLevel<=U.ERROR){const n=t.map(Ka);Ha.error(`Firestore (${Ba}): ${e}`,...n)}}function qa(e,...t){if(Ha.logLevel<=U.WARN){const n=t.map(Ka);Ha.warn(`Firestore (${Ba}): ${e}`,...n)}}function Ka(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Wa(e="Unexpected state"){const t=`FIRESTORE (${Ba}) INTERNAL ASSERTION FAILED: `+e;throw Ga(t),new Error(t)}function Qa(e,t){e||Wa()}function Xa(e,t){return e}const Ja={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ya extends b{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Za{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ec{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ja.UNAUTHENTICATED)))}shutdown(){}}class nc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ic{constructor(e){this.t=e,this.currentUser=ja.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Za;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Za,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},o=e=>{za("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(za("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Za)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(za("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Qa("string"==typeof t.accessToken),new ec(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Qa(null===e||"string"==typeof e),new ja(e)}}class rc{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ja.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sc{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new rc(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ja.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class oc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ac{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&za("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,za("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{za("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?i(e):za("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Qa("string"==typeof e.token),this.R=e.token,new oc(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class lc{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=cc(40);for(let i=0;i<n.length;++i)t.length<20&&n[i]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return t}}function hc(e,t){return e<t?-1:e>t?1:0}function uc(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}class dc{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ya(Ja.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ya(Ja.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ya(Ja.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ya(Ja.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dc.fromMillis(Date.now())}static fromDate(e){return dc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new dc(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?hc(this.nanoseconds,e.nanoseconds):hc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fc{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fc(e)}static min(){return new fc(new dc(0,0))}static max(){return new fc(new dc(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class pc{constructor(e,t,n){void 0===t?t=0:t>e.length&&Wa(),void 0===n?n=e.length-t:n>e.length-t&&Wa(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===pc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pc?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mc extends pc{construct(e,t,n){return new mc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ya(Ja.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new mc(t)}static emptyPath(){return new mc([])}}const gc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vc extends pc{construct(e,t,n){return new vc(e,t,n)}static isValidIdentifier(e){return gc.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vc.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vc(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Ya(Ja.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new Ya(Ja.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ya(Ja.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(s=!s,i++):"."!==t||s?(n+=t,i++):(r(),i++)}if(r(),s)throw new Ya(Ja.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vc(t)}static emptyPath(){return new vc([])}}class yc{constructor(e){this.path=e}static fromPath(e){return new yc(mc.fromString(e))}static fromName(e){return new yc(mc.fromString(e).popFirst(5))}static empty(){return new yc(mc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yc(new mc(e.slice()))}}function wc(e){return new Ec(e.readTime,e.key,-1)}class Ec{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ec(fc.min(),yc.empty(),-1)}static max(){return new Ec(fc.max(),yc.empty(),-1)}}function bc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=yc.comparator(e.documentKey,t.documentKey),0!==n?n:hc(e.largestBatchId,t.largestBatchId))}const _c="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ic{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Tc(e){if(e.code!==Ja.FAILED_PRECONDITION||e.message!==_c)throw e;za("LocalStore","Unexpectedly lost primary lease")}class Cc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Wa(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Cc(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Cc?t:Cc.resolve(t)}catch(e){return Cc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Cc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Cc.reject(t)}static resolve(e){return new Cc(((t,n)=>{t(e)}))}static reject(e){return new Cc(((t,n)=>{n(e)}))}static waitFor(e){return new Cc(((t,n)=>{let i=0,r=0,s=!1;e.forEach((e=>{++i,e.next((()=>{++r,s&&r===i&&t()}),(e=>n(e)))})),s=!0,r===i&&t()}))}static or(e){let t=Cc.resolve(!1);for(const n of e)t=t.next((e=>e?Cc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}static mapArray(e,t){return new Cc(((n,i)=>{const r=e.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===r&&n(s)}),(e=>i(e)))}}))}static doWhile(e,t){return new Cc(((n,i)=>{const r=()=>{!0===e()?t().next((()=>{r()}),i):n()};r()}))}}function Sc(e){return"IndexedDbTransactionError"===e.name}class Ac{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function kc(e){return null==e}function Rc(e){return 0===e&&1/e==-1/0}Ac._e=-1;function Nc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Dc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Oc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Pc{constructor(e,t){this.comparator=e,this.root=t||Mc.EMPTY}insert(e,t){return new Pc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mc.BLACK,null,null))}remove(e){return new Pc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lc(this.root,e,this.comparator,!0)}}class Lc{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mc{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:Mc.RED,this.left=null!=i?i:Mc.EMPTY,this.right=null!=r?r:Mc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new Mc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Mc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Mc.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Wa();if(this.right.isRed())throw Wa();const e=this.left.check();if(e!==this.right.check())throw Wa();return e+(this.isRed()?0:1)}}Mc.EMPTY=null,Mc.RED=!0,Mc.BLACK=!1,Mc.EMPTY=new class{constructor(){this.size=0}get key(){throw Wa()}get value(){throw Wa()}get color(){throw Wa()}get left(){throw Wa()}get right(){throw Wa()}copy(e,t,n,i,r){return this}insert(e,t,n){return new Mc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xc{constructor(e){this.comparator=e,this.data=new Pc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Uc(this.data.getIterator())}getIteratorFrom(e){return new Uc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof xc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new xc(this.comparator);return t.data=e,t}}class Uc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Fc{constructor(e){this.fields=e,e.sort(vc.comparator)}static empty(){return new Fc([])}unionWith(e){let t=new xc(vc.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new Fc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Vc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class jc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Vc("Invalid base64 string: "+e):e}}(e);return new jc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new jc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return hc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jc.EMPTY_BYTE_STRING=new jc("");const Bc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hc(e){if(Qa(!!e),"string"==typeof e){let t=0;const n=Bc.exec(e);if(Qa(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:$c(e.seconds),nanos:$c(e.nanos)}}function $c(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function zc(e){return"string"==typeof e?jc.fromBase64String(e):jc.fromUint8Array(e)}function Gc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function qc(e){const t=e.mapValue.fields.__previous_value__;return Gc(t)?qc(t):t}function Kc(e){const t=Hc(e.mapValue.fields.__local_write_time__.timestampValue);return new dc(t.seconds,t.nanos)}class Wc{constructor(e,t,n,i,r,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Qc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Qc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Qc&&e.projectId===this.projectId&&e.database===this.database}}const Xc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Jc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Gc(e)?4:cl(e)?9007199254740991:10:Wa()}function Yc(e,t){if(e===t)return!0;const n=Jc(e);if(n!==Jc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Kc(e).isEqual(Kc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Hc(e.timestampValue),i=Hc(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return zc(e.bytesValue).isEqual(zc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return $c(e.geoPointValue.latitude)===$c(t.geoPointValue.latitude)&&$c(e.geoPointValue.longitude)===$c(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return $c(e.integerValue)===$c(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=$c(e.doubleValue),i=$c(t.doubleValue);return n===i?Rc(n)===Rc(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return uc(e.arrayValue.values||[],t.arrayValue.values||[],Yc);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(Nc(n)!==Nc(i))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===i[e]||!Yc(n[e],i[e])))return!1;return!0}(e,t);default:return Wa()}}function Zc(e,t){return void 0!==(e.values||[]).find((e=>Yc(e,t)))}function el(e,t){if(e===t)return 0;const n=Jc(e),i=Jc(t);if(n!==i)return hc(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return hc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=$c(e.integerValue||e.doubleValue),i=$c(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return tl(e.timestampValue,t.timestampValue);case 4:return tl(Kc(e),Kc(t));case 5:return hc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=zc(e),i=zc(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let e=0;e<n.length&&e<i.length;e++){const t=hc(n[e],i[e]);if(0!==t)return t}return hc(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=hc($c(e.latitude),$c(t.latitude));return 0!==n?n:hc($c(e.longitude),$c(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let e=0;e<n.length&&e<i.length;++e){const t=el(n[e],i[e]);if(t)return t}return hc(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Xc.mapValue&&t===Xc.mapValue)return 0;if(e===Xc.mapValue)return 1;if(t===Xc.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let e=0;e<i.length&&e<s.length;++e){const t=hc(i[e],s[e]);if(0!==t)return t;const o=el(n[i[e]],r[s[e]]);if(0!==o)return o}return hc(i.length,s.length)}(e.mapValue,t.mapValue);default:throw Wa()}}function tl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return hc(e,t);const n=Hc(e),i=Hc(t),r=hc(n.seconds,i.seconds);return 0!==r?r:hc(n.nanos,i.nanos)}function nl(e){return il(e)}function il(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Hc(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return zc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return yc.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=il(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+=`${r}:${il(e.fields[r])}`;return n+"}"}(e.mapValue):Wa()}function rl(e){return!!e&&"integerValue"in e}function sl(e){return!!e&&"arrayValue"in e}function ol(e){return!!e&&"mapValue"in e}function al(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Dc(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=al(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=al(e.arrayValue.values[n]);return t}return Object.assign({},e)}function cl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class ll{constructor(e){this.value=e}static empty(){return new ll({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ol(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=al(t)}setAll(e){let t=vc.emptyPath(),n={},i=[];e.forEach(((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=al(e):i.push(r.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());ol(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];ol(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Dc(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new ll(al(this.value))}}function hl(e){const t=[];return Dc(e.fields,((e,n)=>{const i=new vc([e]);if(ol(n)){const e=hl(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new Fc(t)}class ul{constructor(e,t,n,i,r,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ul(e,0,fc.min(),fc.min(),fc.min(),ll.empty(),0)}static newFoundDocument(e,t,n,i){return new ul(e,1,t,fc.min(),n,i,0)}static newNoDocument(e,t){return new ul(e,2,t,fc.min(),fc.min(),ll.empty(),0)}static newUnknownDocument(e,t){return new ul(e,3,t,fc.min(),fc.min(),ll.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ll.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ll.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fc.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ul&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ul(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class dl{constructor(e,t){this.position=e,this.inclusive=t}}function fl(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(i=s.field.isKeyField()?yc.comparator(yc.fromName(o.referenceValue),n.key):el(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function pl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Yc(e.position[n],t.position[n]))return!1;return!0}class ml{constructor(e,t="asc"){this.field=e,this.dir=t}}function gl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class vl{}class yl extends vl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Cl(e,t,n):"array-contains"===t?new Rl(e,n):"in"===t?new Nl(e,n):"not-in"===t?new Dl(e,n):"array-contains-any"===t?new Ol(e,n):new yl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Sl(e,n):new Al(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(el(t,this.value)):null!==t&&Jc(this.value)===Jc(t)&&this.matchesComparison(el(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Wa()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wl extends vl{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new wl(e,t)}matches(e){return El(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function El(e){return"and"===e.op}function bl(e){return function(e){for(const t of e.filters)if(t instanceof wl)return!1;return!0}(e)&&El(e)}function _l(e){if(e instanceof yl)return e.field.canonicalString()+e.op.toString()+nl(e.value);if(bl(e))return e.filters.map((e=>_l(e))).join(",");{const t=e.filters.map((e=>_l(e))).join(",");return`${e.op}(${t})`}}function Il(e,t){return e instanceof yl?function(e,t){return t instanceof yl&&e.op===t.op&&e.field.isEqual(t.field)&&Yc(e.value,t.value)}(e,t):e instanceof wl?function(e,t){return t instanceof wl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,i)=>e&&Il(n,t.filters[i])),!0)}(e,t):void Wa()}function Tl(e){return e instanceof yl?function(e){return`${e.field.canonicalString()} ${e.op} ${nl(e.value)}`}(e):e instanceof wl?function(e){return e.op.toString()+" {"+e.getFilters().map(Tl).join(" ,")+"}"}(e):"Filter"}class Cl extends yl{constructor(e,t,n){super(e,t,n),this.key=yc.fromName(n.referenceValue)}matches(e){const t=yc.comparator(e.key,this.key);return this.matchesComparison(t)}}class Sl extends yl{constructor(e,t){super(e,"in",t),this.keys=kl(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Al extends yl{constructor(e,t){super(e,"not-in",t),this.keys=kl(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function kl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>yc.fromName(e.referenceValue)))}class Rl extends yl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sl(t)&&Zc(t.arrayValue,this.value)}}class Nl extends yl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zc(this.value.arrayValue,t)}}class Dl extends yl{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zc(this.value.arrayValue,t)}}class Ol extends yl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Zc(this.value.arrayValue,e)))}}class Pl{constructor(e,t=null,n=[],i=[],r=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ce=null}}function Ll(e,t=null,n=[],i=[],r=null,s=null,o=null){return new Pl(e,t,n,i,r,s,o)}function Ml(e){const t=Xa(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>_l(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),kc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>nl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>nl(e))).join(",")),t.ce=e}return t.ce}function xl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!gl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Il(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!pl(e.startAt,t.startAt)&&pl(e.endAt,t.endAt)}class Ul{constructor(e,t=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Fl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Vl(e){const t=Xa(e);if(null===t.le){t.le=[];const e=new Set;for(const n of t.explicitOrderBy)t.le.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",i=function(e){let t=new xc(vc.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);i.forEach((i=>{e.has(i.canonicalString())||i.isKeyField()||t.le.push(new ml(i,n))})),e.has(vc.keyField().canonicalString())||t.le.push(new ml(vc.keyField(),n))}return t.le}function jl(e){const t=Xa(e);return t.he||(t.he=function(e,t){if("F"===e.limitType)return Ll(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ml(e.field,t)}));const n=e.endAt?new dl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new dl(e.startAt.position,e.startAt.inclusive):null;return Ll(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}(t,Vl(e))),t.he}function Bl(e,t,n){return new Ul(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Hl(e,t){return xl(jl(e),jl(t))&&e.limitType===t.limitType}function $l(e){return`${Ml(jl(e))}|lt:${e.limitType}`}function zl(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Tl(e))).join(", ")}]`),kc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>nl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>nl(e))).join(",")),`Target(${t})`}(jl(e))}; limitType=${e.limitType})`}function Gl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):yc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Vl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=fl(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,Vl(e),t)||e.endAt&&!function(e,t,n){const i=fl(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,Vl(e),t))}(e,t)}function ql(e,t,n){const i=e.field.isKeyField()?yc.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?el(i,r):Wa()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Wa()}}class Kl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,i]of n)if(this.equalsFn(t,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],e))return void(i[n]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Dc(this.inner,((t,n)=>{for(const[t,i]of n)e(t,i)}))}isEmpty(){return Oc(this.inner)}size(){return this.innerSize}}const Wl=new Pc(yc.comparator);function Ql(){return Wl}const Xl=new Pc(yc.comparator);function Jl(...e){let t=Xl;for(const n of e)t=t.insert(n.key,n);return t}function Yl(e){let t=Xl;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Zl(){return th()}function eh(){return th()}function th(){return new Kl((e=>e.toString()),((e,t)=>e.isEqual(t)))}const nh=new Pc(yc.comparator),ih=new xc(yc.comparator);function rh(...e){let t=ih;for(const n of e)t=t.add(n);return t}const sh=new xc(hc);function oh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rc(t)?"-0":t}}function ah(e){return{integerValue:""+e}}function ch(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Rc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?ah(t):oh(e,t)}class lh{constructor(){this._=void 0}}function hh(e,t,n){return e instanceof fh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Gc(t)&&(t=qc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ph?mh(e,t):e instanceof gh?vh(e,t):function(e,t){const n=dh(e,t),i=wh(n)+wh(e.Ie);return rl(n)&&rl(e.Ie)?ah(i):oh(e.serializer,i)}(e,t)}function uh(e,t,n){return e instanceof ph?mh(e,t):e instanceof gh?vh(e,t):n}function dh(e,t){return e instanceof yh?function(e){return rl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class fh extends lh{}class ph extends lh{constructor(e){super(),this.elements=e}}function mh(e,t){const n=Eh(t);for(const t of e.elements)n.some((e=>Yc(e,t)))||n.push(t);return{arrayValue:{values:n}}}class gh extends lh{constructor(e){super(),this.elements=e}}function vh(e,t){let n=Eh(t);for(const t of e.elements)n=n.filter((e=>!Yc(e,t)));return{arrayValue:{values:n}}}class yh extends lh{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function wh(e){return $c(e.integerValue||e.doubleValue)}function Eh(e){return sl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class bh{constructor(e,t){this.version=e,this.transformResults=t}}class _h{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _h}static exists(e){return new _h(void 0,e)}static updateTime(e){return new _h(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ih(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Th{}function Ch(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Mh(e.key,_h.none()):new Nh(e.key,e.data,_h.none());{const n=e.data,i=ll.empty();let r=new xc(vc.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new Dh(e.key,i,new Fc(r.toArray()),_h.none())}}function Sh(e,t,n){e instanceof Nh?function(e,t,n){const i=e.value.clone(),r=Ph(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof Dh?function(e,t,n){if(!Ih(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=Ph(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(Oh(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ah(e,t,n,i){return e instanceof Nh?function(e,t,n,i){if(!Ih(e.precondition,t))return n;const r=e.value.clone(),s=Lh(e.fieldTransforms,i,t);return r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof Dh?function(e,t,n,i){if(!Ih(e.precondition,t))return n;const r=Lh(e.fieldTransforms,i,t),s=t.data;return s.setAll(Oh(e)),s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,i):function(e,t,n){return Ih(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function kh(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),r=dh(i.transform,e||null);null!=r&&(null===n&&(n=ll.empty()),n.set(i.field,r))}return n||null}function Rh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&uc(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ph&&t instanceof ph||e instanceof gh&&t instanceof gh?uc(e.elements,t.elements,Yc):e instanceof yh&&t instanceof yh?Yc(e.Ie,t.Ie):e instanceof fh&&t instanceof fh}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Nh extends Th{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Dh extends Th{constructor(e,t,n,i,r=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Oh(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function Ph(e,t,n){const i=new Map;Qa(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,uh(o,a,n[r]))}return i}function Lh(e,t,n){const i=new Map;for(const r of e){const e=r.transform,s=n.data.field(r.field);i.set(r.field,hh(e,s,t))}return i}class Mh extends Th{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xh extends Th{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Uh{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const i=this.mutations[t];i.key.isEqual(e.key)&&Sh(i,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ah(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ah(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=eh();return this.mutations.forEach((i=>{const r=e.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=t.has(i.key)?null:o;const a=Ch(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(fc.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),rh())}isEqual(e){return this.batchId===e.batchId&&uc(this.mutations,e.mutations,((e,t)=>Rh(e,t)))&&uc(this.baseMutations,e.baseMutations,((e,t)=>Rh(e,t)))}}class Fh{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Qa(e.mutations.length===n.length);let i=nh;const r=e.mutations;for(let e=0;e<r.length;e++)i=i.insert(r[e].key,n[e].version);return new Fh(e,t,n,i)}}class Vh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}var jh,Bh;(Bh=jh||(jh={}))[Bh.OK=0]="OK",Bh[Bh.CANCELLED=1]="CANCELLED",Bh[Bh.UNKNOWN=2]="UNKNOWN",Bh[Bh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bh[Bh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bh[Bh.NOT_FOUND=5]="NOT_FOUND",Bh[Bh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bh[Bh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bh[Bh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bh[Bh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bh[Bh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bh[Bh.ABORTED=10]="ABORTED",Bh[Bh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bh[Bh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bh[Bh.INTERNAL=13]="INTERNAL",Bh[Bh.UNAVAILABLE=14]="UNAVAILABLE",Bh[Bh.DATA_LOSS=15]="DATA_LOSS",new Fa([4294967295,4294967295],0),Error;class Hh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $h(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function zh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Gh(e,t){return $h(e,t.toTimestamp())}function qh(e){return Qa(!!e),fc.fromTimestamp(function(e){const t=Hc(e);return new dc(t.seconds,t.nanos)}(e))}function Kh(e,t){return function(e){return new mc(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Wh(e,t){return Kh(e.databaseId,t.path)}function Qh(e){const t=function(e){const t=mc.fromString(e);return Qa(function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}(t)),t}(e);return 4===t.length?mc.emptyPath():function(e){return Qa(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}(t)}function Xh(e,t,n){return{name:Wh(e,t),fields:n.value.mapValue.fields}}function Jh(e){let t=Qh(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Qa(1===i);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Yh(e);return t instanceof wl&&bl(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new ml(Zh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,kc(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new dl(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new dl(n,t)}(n.endAt)),function(e,t,n,i,r,s,o,a){return new Ul(e,t,n,i,r,s,o,a)}(t,r,o,s,a,"F",c,l)}function Yh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Zh(e.unaryFilter.field);return yl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Zh(e.unaryFilter.field);return yl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Zh(e.unaryFilter.field);return yl.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Zh(e.unaryFilter.field);return yl.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Wa()}}(e):void 0!==e.fieldFilter?function(e){return yl.create(Zh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wa()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return wl.create(e.compositeFilter.filters.map((e=>Yh(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Wa()}}(e.compositeFilter.op))}(e):Wa()}function Zh(e){return vc.fromServerFormat(e.fieldPath)}function eu(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}class tu{constructor(e){this.ut=e}}function nu(e){const t=Jh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Bl(t,t.limit,"L"):t}class iu{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et($c(e.integerValue));else if("doubleValue"in e){const n=$c(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Rc(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt(`${n.seconds||""}`),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(zc(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?cl(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Wa()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const e of Object.keys(n))this.At(e,t),this.Pt(n[e],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const e of n)this.Pt(e,t)}ft(e,t){this.Tt(t,37),yc.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}iu.St=new iu;class ru{constructor(){this.on=new su}addToCollectionParentIndex(e,t){return this.on.add(t),Cc.resolve()}getCollectionParents(e,t){return Cc.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return Cc.resolve()}deleteFieldIndex(e,t){return Cc.resolve()}deleteAllFieldIndexes(e){return Cc.resolve()}createTargetIndexes(e,t){return Cc.resolve()}getDocumentsMatchingTarget(e,t){return Cc.resolve(null)}getIndexType(e,t){return Cc.resolve(0)}getFieldIndexes(e,t){return Cc.resolve([])}getNextCollectionGroupToUpdate(e){return Cc.resolve(null)}getMinOffset(e,t){return Cc.resolve(Ec.min())}getMinOffsetFromCollectionGroup(e,t){return Cc.resolve(Ec.min())}updateCollectionGroup(e,t,n){return Cc.resolve()}updateIndexEntries(e,t){return Cc.resolve()}}class su{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new xc(mc.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new xc(mc.comparator)).toArray()}}new Uint8Array(0);class ou{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ou(e,ou.DEFAULT_COLLECTION_PERCENTILE,ou.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}ou.DEFAULT_COLLECTION_PERCENTILE=10,ou.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ou.DEFAULT=new ou(41943040,ou.DEFAULT_COLLECTION_PERCENTILE,ou.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ou.DISABLED=new ou(-1,0,0);class au{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new au(0)}static Nn(){return new au(-1)}}class cu{constructor(){this.changes=new Kl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ul.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Cc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class hu{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Ah(n.mutation,e,Fc.empty(),dc.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,rh()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=rh()){const i=Zl();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((e=>{let t=Jl();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Zl();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,rh())))}populateOverlays(e,t,n){const i=[];return n.forEach((e=>{t.has(e)||i.push(e)})),this.documentOverlayCache.getOverlays(e,i).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,i){let r=Ql();const s=th(),o=th();return t.forEach(((e,t)=>{const o=n.get(t.key);i.has(t.key)&&(void 0===o||o.mutation instanceof Dh)?r=r.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Ah(o.mutation,t,o.mutation.getFieldMask(),dc.now())):s.set(t.key,Fc.empty())})),this.recalculateAndSaveOverlays(e,r).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new lu(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=th();let i=new Pc(((e,t)=>e-t)),r=rh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const r of e)r.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Fc.empty();o=r.applyToLocalView(s,o),n.set(e,o);const a=(i.get(r.batchId)||rh()).add(e);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=eh();c.forEach((e=>{if(!r.has(e)){const i=Ch(t.get(e),n.get(e));null!==i&&l.set(e,i),r=r.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return Cc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,i){return function(e){return yc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):function(e){return null!==e.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):Cc.resolve(Zl());let o=-1,a=r;return s.next((t=>Cc.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(t)?Cc.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,r))).next((()=>this.computeViews(e,a,t,rh()))).next((e=>({batchId:o,changes:Yl(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new yc(t)).next((e=>{let t=Jl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const r=t.collectionGroup;let s=Jl();return this.indexManager.getCollectionParents(e,r).next((o=>Cc.forEach(o,(o=>{const a=function(e,t){return new Ul(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,a,n,i).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,i)))).next((e=>{r.forEach(((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,ul.newInvalidDocument(i)))}));let n=Jl();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&Ah(s.mutation,i,Fc.empty(),dc.now()),Gl(t,i)&&(n=n.insert(e,i))})),n}))}}class uu{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return Cc.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:qh(e.createTime)}}(t)),Cc.resolve()}getNamedQuery(e,t){return Cc.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:nu(e.bundledQuery),readTime:qh(e.readTime)}}(t)),Cc.resolve()}}class du{constructor(){this.overlays=new Pc(yc.comparator),this.lr=new Map}getOverlay(e,t){return Cc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Zl();return Cc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,i)=>{this.lt(e,t,i)})),Cc.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.lr.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),Cc.resolve()}getOverlaysForCollection(e,t,n){const i=Zl(),r=t.length+1,s=new yc(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return Cc.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new Pc(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=Zl(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Zl(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=i)););return Cc.resolve(o)}lt(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.lr.get(i.largestBatchId).delete(n.key);this.lr.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Vh(t,n));let r=this.lr.get(t);void 0===r&&(r=rh(),this.lr.set(t,r)),this.lr.set(t,r.add(n.key))}}class fu{constructor(){this.hr=new xc(pu.Pr),this.Ir=new xc(pu.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new pu(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new pu(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new yc(new mc([])),n=new pu(t,e),i=new pu(t,e+1),r=[];return this.Ir.forEachInRange([n,i],(e=>{this.dr(e),r.push(e.key)})),r}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new yc(new mc([])),n=new pu(t,e),i=new pu(t,e+1);let r=rh();return this.Ir.forEachInRange([n,i],(e=>{r=r.add(e.key)})),r}containsKey(e){const t=new pu(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class pu{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return yc.comparator(e.key,t.key)||hc(e.gr,t.gr)}static Tr(e,t){return hc(e.gr,t.gr)||yc.comparator(e.key,t.key)}}class mu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new xc(pu.Pr)}checkEmpty(e){return Cc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Uh(r,t,n,i);this.mutationQueue.push(s);for(const t of i)this.yr=this.yr.add(new pu(t.key,r)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Cc.resolve(s)}lookupMutationBatch(e,t){return Cc.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Sr(n),r=i<0?0:i;return Cc.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Cc.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return Cc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new pu(t,0),i=new pu(t,Number.POSITIVE_INFINITY),r=[];return this.yr.forEachInRange([n,i],(e=>{const t=this.wr(e.gr);r.push(t)})),Cc.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xc(hc);return t.forEach((e=>{const t=new pu(e,0),i=new pu(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,i],(e=>{n=n.add(e.gr)}))})),Cc.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;yc.isDocumentKey(r)||(r=r.child(""));const s=new pu(new yc(r),0);let o=new xc(hc);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.gr)),!0)}),s),Cc.resolve(this.br(o))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Qa(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return Cc.forEach(t.mutations,(i=>{const r=new pu(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new pu(t,0),i=this.yr.firstAfterOrEqual(n);return Cc.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Cc.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class gu{constructor(e){this.Cr=e,this.docs=new Pc(yc.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Cc.resolve(n?n.document.mutableCopy():ul.newInvalidDocument(t))}getEntries(e,t){let n=Ql();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ul.newInvalidDocument(e))})),Cc.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=Ql();const s=t.path,o=new yc(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||bc(wc(o),n)<=0||(i.has(o.key)||Gl(t,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Cc.resolve(r)}getAllFromCollectionGroup(e,t,n,i){Wa()}vr(e,t){return Cc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new vu(this)}getSize(e){return Cc.resolve(this.size)}}class vu extends cu{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this._r.addEntry(e,i)):this._r.removeEntry(n)})),Cc.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class yu{constructor(e){this.persistence=e,this.Fr=new Kl((e=>Ml(e)),xl),this.lastRemoteSnapshotVersion=fc.min(),this.highestTargetId=0,this.Mr=0,this.Or=new fu,this.targetCount=0,this.Nr=au.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),Cc.resolve()}getLastRemoteSnapshotVersion(e){return Cc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Cc.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),Cc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),Cc.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new au(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,Cc.resolve()}updateTargetData(e,t){return this.kn(t),Cc.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,Cc.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),Cc.waitFor(r).next((()=>i))}getTargetCount(e){return Cc.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return Cc.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),Cc.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach((t=>{r.push(i.markPotentiallyOrphaned(e,t))})),Cc.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),Cc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return Cc.resolve(n)}containsKey(e,t){return Cc.resolve(this.Or.containsKey(t))}}class wu{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Ac(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new yu(this),this.indexManager=new ru,this.remoteDocumentCache=function(e){return new gu(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new tu(t),this.Kr=new uu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new du,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new mu(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){za("MemoryPersistence","Starting transaction:",e);const i=new Eu(this.Lr.next());return this.referenceDelegate.$r(),n(i).next((e=>this.referenceDelegate.Ur(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Wr(e,t){return Cc.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Eu extends Ic{constructor(e){super(),this.currentSequenceNumber=e}}class bu{constructor(e){this.persistence=e,this.Gr=new fu,this.zr=null}static jr(e){return new bu(e)}get Hr(){if(this.zr)return this.zr;throw Wa()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),Cc.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),Cc.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),Cc.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Cc.forEach(this.Hr,(n=>{const i=yc.fromPath(n);return this.Jr(e,i).next((e=>{e||t.removeEntry(i,fc.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return Cc.or([()=>Cc.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class _u{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=i}static Qi(e,t){let n=rh(),i=rh();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new _u(e,t.fromCache,n,i)}}class Iu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Tu{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,i){const r={result:null};return this.zi(e,t).next((e=>{r.result=e})).next((()=>{if(!r.result)return this.ji(e,t,i,n).next((e=>{r.result=e}))})).next((()=>{if(r.result)return;const n=new Iu;return this.Hi(e,t,n).next((i=>{if(r.result=i,this.$i)return this.Ji(e,t,n,i.size)}))})).next((()=>r.result))}Ji(e,t,n,i){return n.documentReadCount<this.Ui?($a()<=U.DEBUG&&za("QueryEngine","SDK will not create cache indexes for query:",zl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Cc.resolve()):($a()<=U.DEBUG&&za("QueryEngine","Query:",zl(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Wi*i?($a()<=U.DEBUG&&za("QueryEngine","The SDK decides to create cache indexes for query:",zl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jl(t))):Cc.resolve())}zi(e,t){if(Fl(t))return Cc.resolve(null);let n=jl(t);return this.indexManager.getIndexType(e,n).next((i=>0===i?null:(null!==t.limit&&1===i&&(t=Bl(t,null,"F"),n=jl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const r=rh(...i);return this.Gi.getDocuments(e,r).next((i=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Yi(t,i);return this.Zi(t,s,r,n.readTime)?this.zi(e,Bl(t,null,"F")):this.Xi(e,s,t,n)}))))})))))}ji(e,t,n,i){return Fl(t)||i.isEqual(fc.min())?Cc.resolve(null):this.Gi.getDocuments(e,n).next((r=>{const s=this.Yi(t,r);return this.Zi(t,s,n,i)?Cc.resolve(null):($a()<=U.DEBUG&&za("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zl(t)),this.Xi(e,s,t,function(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=fc.fromTimestamp(1e9===i?new dc(n+1,0):new dc(n,i));return new Ec(r,yc.empty(),t)}(i,-1)).next((e=>e)))}))}Yi(e,t){let n=new xc(function(e){return(t,n)=>{let i=!1;for(const r of Vl(e)){const e=ql(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}(e));return t.forEach(((t,i)=>{Gl(e,i)&&(n=n.add(i))})),n}Zi(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Hi(e,t,n){return $a()<=U.DEBUG&&za("QueryEngine","Using full collection scan to execute query:",zl(t)),this.Gi.getDocumentsMatchingQuery(e,t,Ec.min(),n)}Xi(e,t,n,i){return this.Gi.getDocumentsMatchingQuery(e,n,i).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Cu{constructor(e,t,n,i){this.persistence=e,this.es=t,this.serializer=i,this.ts=new Pc(hc),this.ns=new Kl((e=>Ml(e)),xl),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hu(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}async function Su(e,t){const n=Xa(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next((r=>(i=r,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const r=[],s=[];let o=rh();for(const e of i){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({_s:e,removedBatchIds:r,addedBatchIds:s})))}))}))}function Au(e,t){const n=Xa(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}class ku{constructor(){this.activeTargetIds=sh}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ru{constructor(){this.eo=new ku,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new ku,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Nu{ro(e){}shutdown(){}}class Du{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){za("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){za("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ou=null;function Pu(){return null===Ou?Ou=268435456+Math.round(2147483648*Math.random()):Ou++,"0x"+Ou.toString(16)}const Lu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Mu{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const xu="WebChannelConnection";class Uu extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo=`projects/${n}/databases/${i}`,this.po="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${i}`}get yo(){return!1}wo(e,t,n,i,r){const s=Pu(),o=this.So(e,t);za("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,i,r),this.Do(e,o,a,n).then((t=>(za("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw qa("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}Co(e,t,n,i,r,s){return this.wo(e,t,n,i,r)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ba,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=Lu[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,i){const r=Pu();return new Promise(((s,o)=>{const a=new Ua;a.setWithCredentials(!0),a.listenOnce(Oa.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Da.NO_ERROR:const t=a.getResponseJson();za(xu,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(t)),s(t);break;case Da.TIMEOUT:za(xu,`RPC '${e}' ${r} timed out`),o(new Ya(Ja.DEADLINE_EXCEEDED,"Request time out"));break;case Da.HTTP_ERROR:const n=a.getStatus();if(za(xu,`RPC '${e}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ja).indexOf(t)>=0?t:Ja.UNKNOWN}(t.status);o(new Ya(e,t.message))}else o(new Ya(Ja.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ya(Ja.UNAVAILABLE,"Connection failed."));break;default:Wa()}}finally{za(xu,`RPC '${e}' ${r} completed.`)}}));const c=JSON.stringify(i);za(xu,`RPC '${e}' ${r} sending request:`,i),a.send(t,"POST",c,n,15)}))}vo(e,t,n){const i=Pu(),r=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ra(),o=Na(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new Ma({})),this.bo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=r.join("");za(xu,`Creating RPC '${e}' stream ${i}: ${l}`,a);const h=s.createWebChannel(l,a);let u=!1,d=!1;const f=new Mu({co:t=>{d?za(xu,`Not sending because RPC '${e}' stream ${i} is closed:`,t):(u||(za(xu,`Opening RPC '${e}' stream ${i} transport.`),h.open(),u=!0),za(xu,`RPC '${e}' stream ${i} sending:`,t),h.send(t))},lo:()=>h.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(h,xa.EventType.OPEN,(()=>{d||za(xu,`RPC '${e}' stream ${i} transport opened.`)})),p(h,xa.EventType.CLOSE,(()=>{d||(d=!0,za(xu,`RPC '${e}' stream ${i} transport closed`),f.Ro())})),p(h,xa.EventType.ERROR,(t=>{d||(d=!0,qa(xu,`RPC '${e}' stream ${i} transport errored:`,t),f.Ro(new Ya(Ja.UNAVAILABLE,"The operation could not be completed")))})),p(h,xa.EventType.MESSAGE,(t=>{var n;if(!d){const r=t.data[0];Qa(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){za(xu,`RPC '${e}' stream ${i} received error:`,o);const t=o.status;let n=function(e){const t=jh[e];if(void 0!==t)return function(e){if(void 0===e)return Ga("GRPC error has no .code"),Ja.UNKNOWN;switch(e){case jh.OK:return Ja.OK;case jh.CANCELLED:return Ja.CANCELLED;case jh.UNKNOWN:return Ja.UNKNOWN;case jh.DEADLINE_EXCEEDED:return Ja.DEADLINE_EXCEEDED;case jh.RESOURCE_EXHAUSTED:return Ja.RESOURCE_EXHAUSTED;case jh.INTERNAL:return Ja.INTERNAL;case jh.UNAVAILABLE:return Ja.UNAVAILABLE;case jh.UNAUTHENTICATED:return Ja.UNAUTHENTICATED;case jh.INVALID_ARGUMENT:return Ja.INVALID_ARGUMENT;case jh.NOT_FOUND:return Ja.NOT_FOUND;case jh.ALREADY_EXISTS:return Ja.ALREADY_EXISTS;case jh.PERMISSION_DENIED:return Ja.PERMISSION_DENIED;case jh.FAILED_PRECONDITION:return Ja.FAILED_PRECONDITION;case jh.ABORTED:return Ja.ABORTED;case jh.OUT_OF_RANGE:return Ja.OUT_OF_RANGE;case jh.UNIMPLEMENTED:return Ja.UNIMPLEMENTED;case jh.DATA_LOSS:return Ja.DATA_LOSS;default:return Wa()}}(t)}(t),r=o.message;void 0===n&&(n=Ja.INTERNAL,r="Unknown error status: "+t+" with message "+o.message),d=!0,f.Ro(new Ya(n,r)),h.close()}else za(xu,`RPC '${e}' stream ${i} received:`,r),f.Vo(r)}})),p(o,Pa.STAT_EVENT,(t=>{t.stat===La.PROXY?za(xu,`RPC '${e}' stream ${i} detected buffering proxy`):t.stat===La.NOPROXY&&za(xu,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{f.Ao()}),0),f}}function Fu(){return"undefined"!=typeof document?document:null}function Vu(e){return new Hh(e,!0)}class ju{constructor(e,t,n=1e3,i=1.5,r=6e4){this.si=e,this.timerId=t,this.Fo=n,this.Mo=i,this.xo=r,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),i=Math.max(0,t-n);i>0&&za("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Bu{constructor(e,t,n,i,r,s,o,a){this.si=e,this.Ko=n,this.$o=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new ju(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===Ja.RESOURCE_EXHAUSTED?(Ga(t.toString()),Ga("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===Ja.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Uo===t&&this.s_(e,n)}),(t=>{e((()=>{const e=new Ya(Ja.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return za("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(za("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Hu extends Bu{constructor(e,t,n,i,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Qa(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(Qa(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?qh(e.updateTime):qh(t);return n.isEqual(fc.min())&&(n=qh(t)),new bh(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=qh(e.commitTime);return this.listener.I_(n,t)}return Qa(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=function(e){return new mc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof Nh)n={update:Xh(e,t.key,t.value)};else if(t instanceof Mh)n={delete:Wh(e,t.key)};else if(t instanceof Dh)n={update:Xh(e,t.key,t.data),updateMask:eu(t.fieldMask)};else{if(!(t instanceof xh))return Wa();n={verify:Wh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof fh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ph)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof gh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof yh)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Wa()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Gh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Wa()}(e,t.precondition)),n}(this.serializer,e)))};this.e_(t)}}class $u extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new Ya(Ja.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,r])=>this.connection.wo(e,t,n,i,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ja.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ya(Ja.UNKNOWN,e.toString())}))}Co(e,t,n,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.Co(e,t,n,r,s,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ja.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ya(Ja.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class zu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Ga(t),this.f_=!1):za("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Gu{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=r,this.F_.ro((e=>{n.enqueueAndForget((async()=>{Wu(this)&&(za("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Xa(e);t.C_.add(4),await Ku(t),t.M_.set("Unknown"),t.C_.delete(4),await qu(t)}(this))}))})),this.M_=new zu(n,i)}}async function qu(e){if(Wu(e))for(const t of e.v_)await t(!0)}async function Ku(e){for(const t of e.v_)await t(!1)}function Wu(e){return 0===Xa(e).C_.size}async function Qu(e,t,n){if(!Sc(t))throw t;e.C_.add(1),await Ku(e),e.M_.set("Offline"),n||(n=()=>function(e){const t=Xa(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{za("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await qu(e)}))}function Xu(e,t){return t().catch((n=>Qu(e,n,t)))}async function Ju(e){const t=Xa(e),n=ad(t);let i=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;Yu(t);)try{const e=await Au(t.localStore,i);if(null===e){0===t.b_.length&&n.Zo();break}i=e.batchId,Zu(t,e)}catch(e){await Qu(t,e)}ed(t)&&td(t)}function Yu(e){return Wu(e)&&e.b_.length<10}function Zu(e,t){e.b_.push(t);const n=ad(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function ed(e){return Wu(e)&&!ad(e).jo()&&e.b_.length>0}function td(e){ad(e).start()}async function nd(e){ad(e).E_()}async function id(e){const t=ad(e);for(const n of e.b_)t.P_(n.mutations)}async function rd(e,t,n){const i=e.b_.shift(),r=Fh.from(i,t,n);await Xu(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await Ju(e)}async function sd(e,t){t&&ad(e).h_&&await async function(e,t){if(function(e){return function(e){switch(e){default:return Wa();case Ja.CANCELLED:case Ja.UNKNOWN:case Ja.DEADLINE_EXCEEDED:case Ja.RESOURCE_EXHAUSTED:case Ja.INTERNAL:case Ja.UNAVAILABLE:case Ja.UNAUTHENTICATED:return!1;case Ja.INVALID_ARGUMENT:case Ja.NOT_FOUND:case Ja.ALREADY_EXISTS:case Ja.PERMISSION_DENIED:case Ja.FAILED_PRECONDITION:case Ja.ABORTED:case Ja.OUT_OF_RANGE:case Ja.UNIMPLEMENTED:case Ja.DATA_LOSS:return!0}}(e)&&e!==Ja.ABORTED}(t.code)){const n=e.b_.shift();ad(e).Yo(),await Xu(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Ju(e)}}(e,t),ed(e)&&td(e)}async function od(e,t){const n=Xa(e);n.asyncQueue.verifyOperationInProgress(),za("RemoteStore","RemoteStore received new credentials");const i=Wu(n);n.C_.add(3),await Ku(n),i&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await qu(n)}function ad(e){return e.N_||(e.N_=function(e,t,n){const i=Xa(e);return i.A_(),new Hu(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{ho:nd.bind(null,e),Io:sd.bind(null,e),T_:id.bind(null,e),I_:rd.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await Ju(e)):(await e.N_.stop(),e.b_.length>0&&(za("RemoteStore",`Stopping write stream with ${e.b_.length} pending writes`),e.b_=[]))}))),e.N_}class cd{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Za,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,o=new cd(e,t,s,i,r);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ya(Ja.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ld(e,t){if(Ga("AsyncQueue",`${t}: ${e}`),Sc(e))return new Ya(Ja.UNAVAILABLE,`${t}: ${e}`);throw e}class hd{constructor(){this.queries=new Kl((e=>$l(e)),Hl),this.onlineState="Unknown",this.q_=new Set}}class ud{constructor(e,t,n,i,r,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Kl((e=>$l(e)),Hl),this.fa=new Map,this.ga=new Set,this.pa=new Pc(yc.comparator),this.ya=new Map,this.wa=new fu,this.Sa={},this.ba=new Map,this.Da=au.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}function dd(e,t,n){const i=Xa(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.ma.forEach(((n,i)=>{const r=i.view.Q_(t);r.snapshot&&e.push(r.snapshot)})),function(e,t){const n=Xa(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.Q_(t)&&(i=!0)})),i&&function(e){e.q_.forEach((e=>{e.next()}))}(n)}(i.eventManager,t),e.length&&i.Va.a_(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function fd(e,t){const n=Xa(e),i=t.batch.batchId;try{const e=await function(e,t){const n=Xa(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),r=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const r=n.batch,s=r.keys();let o=Cc.resolve();return s.forEach((e=>{o=o.next((()=>i.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Qa(null!==s),t.version.compareTo(s)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,r)))}(n,e,t,r).next((()=>r.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=rh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(n.localStore,t);gd(n,i,null),md(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await vd(n,e)}catch(e){await Tc(e)}}async function pd(e,t,n){const i=Xa(e);try{const e=await function(e,t){const n=Xa(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Qa(null!==t),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(i.localStore,t);gd(i,t,n),md(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await vd(i,e)}catch(n){await Tc(n)}}function md(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function gd(e,t,n){const i=Xa(e);let r=i.Sa[i.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),i.Sa[i.currentUser.toKey()]=r}}async function vd(e,t,n){const i=Xa(e),r=[],s=[],o=[];i.ma.isEmpty()||(i.ma.forEach(((e,a)=>{o.push(i.va(a,t,n).then((e=>{if((e||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){r.push(e);const t=_u.Qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),i.Va.a_(r),await async function(e,t){const n=Xa(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Cc.forEach(t,(t=>Cc.forEach(t.ki,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>Cc.forEach(t.qi,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!Sc(e))throw e;za("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.ts.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.ts=n.ts.insert(t,r)}}}(i.localStore,s))}async function yd(e,t){const n=Xa(e);if(!n.currentUser.isEqual(t)){za("SyncEngine","User change. New user:",t.toKey());const e=await Su(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new Ya(Ja.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ba.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await vd(n,e._s)}}function wd(e){const t=Xa(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pd.bind(null,t),t}class Ed{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Vu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(e,t,n,i){return new Cu(e,t,n,i)}(this.persistence,new Tu,e.initialUser,this.serializer)}createPersistence(e){return new wu(bu.jr,this.serializer)}createSharedClientState(e){return new Ru}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class bd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>dd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=yd.bind(null,this.syncEngine),await async function(e,t){const n=Xa(e);t?(n.C_.delete(2),await qu(n)):t||(n.C_.add(2),await Ku(n),n.M_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new hd}createDatastore(e){const t=Vu(e.databaseInfo.databaseId),n=function(e){return new Uu(e)}(e.databaseInfo);return function(e,t,n,i){return new $u(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,i,r){return new Gu(e,t,n,i,r)}(this.localStore,this.datastore,e.asyncQueue,(e=>dd(this.syncEngine,e,0)),Du.D()?new Du:new Nu)}createSyncEngine(e,t){return function(e,t,n,i,r,s,o){const a=new ud(e,t,n,i,r,s);return o&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Xa(e);za("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await Ku(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}class _d{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=ja.UNAUTHENTICATED,this.clientId=lc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{za("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(za("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ya(Ja.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Za;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ld(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Id(e,t){e.asyncQueue.verifyOperationInProgress(),za("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await Su(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Td(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){za("FirestoreClient","Using user provided OfflineComponentProvider");try{await Id(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Ja.FAILED_PRECONDITION||e.code===Ja.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;qa("Error using user provided cache. Falling back to memory cache: "+n),await Id(e,new Ed)}}else za("FirestoreClient","Using default OfflineComponentProvider"),await Id(e,new Ed);return e._offlineComponents}(e);za("FirestoreClient","Initializing OnlineComponentProvider");const i=await e.getConfiguration();await t.initialize(n,i),e.setCredentialChangeListener((e=>od(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>od(t.remoteStore,n))),e._onlineComponents=t}function Cd(e){return async function(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(za("FirestoreClient","Using user provided OnlineComponentProvider"),await Td(e,e._uninitializedComponentsProvider._online)):(za("FirestoreClient","Using default OnlineComponentProvider"),await Td(e,new bd))),e._onlineComponents}(e).then((e=>e.syncEngine))}function Sd(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ad=new Map;function kd(e,t,n){if(!n)throw new Ya(Ja.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Rd(e){if(!yc.isDocumentKey(e))throw new Ya(Ja.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Nd(e){if(yc.isDocumentKey(e))throw new Ya(Ja.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Dd(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Wa()}function Od(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ya(Ja.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dd(e);throw new Ya(Ja.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class Pd{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ya(Ja.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ya(Ja.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,i){if(!0===t&&!0===i)throw new Ya(Ja.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sd(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ya(Ja.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Ya(Ja.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Ya(Ja.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ld{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ya(Ja.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ya(Ja.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pd(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new tc;switch(e.type){case"firstParty":return new sc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ya(Ja.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ad.get(e);t&&(za("ComponentProvider","Removing Datastore"),Ad.delete(e),t.terminate())}(this),Promise.resolve()}}class Md{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Md(this.firestore,e,this._query)}}class xd{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ud(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xd(this.firestore,e,this._key)}}class Ud extends Md{constructor(e,t,n){super(e,t,function(e){return new Ul(e)}(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xd(this.firestore,null,new yc(e))}withConverter(e){return new Ud(this.firestore,e,this._path)}}class Fd{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new ju(this,"async_queue_retry"),this.iu=()=>{const e=Fu();e&&za("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=Fu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=Fu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new Za;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Sc(e))throw e;za("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ga("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const i=cd.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(i),i}su(){this.eu&&Wa()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}class Vd extends Ld{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Fd,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||jd(this),this._firestoreClient.terminate()}}function jd(e){var t,n,i;const r=e._freezeSettings(),s=function(e,t,n,i){return new Wc(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Sd(i.experimentalLongPollingOptions),i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new _d(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}class Bd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bd(jc.fromBase64String(e))}catch(e){throw new Ya(Ja.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Bd(jc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Hd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ya(Ja.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vc(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $d{constructor(e){this._methodName=e}}class zd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ya(Ja.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ya(Ja.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return hc(this._lat,e._lat)||hc(this._long,e._long)}}const Gd=/^__.*__$/;class qd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Dh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nh(e,this.data,t,this.fieldTransforms)}}function Kd(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wa()}}class Wd{constructor(e,t,n,i,r,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Pu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Wd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Tu({path:n,du:!1});return i.Au(e),i}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Tu({path:n,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return sf(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(Kd(this.Iu)&&Gd.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class Qd{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Vu(e)}pu(e,t,n,i=!1){return new Wd({Iu:e,methodName:t,gu:n,path:vc.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xd(e){const t=e._freezeSettings(),n=Vu(e._databaseId);return new Qd(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Jd(e,t,n,i,r,s={}){const o=e.pu(s.merge||s.mergeFields?2:0,t,n,r);tf("Data must be an object, but it was:",o,i);const a=Zd(i,o);let c,l;if(s.merge)c=new Fc(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const i of s.mergeFields){const r=nf(t,i,n);if(!o.contains(r))throw new Ya(Ja.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);of(e,r)||e.push(r)}c=new Fc(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new qd(new ll(a),c,l)}function Yd(e,t){if(ef(e=D(e)))return tf("Unsupported field value:",t,e),Zd(e,t);if(e instanceof $d)return function(e,t){if(!Kd(t.Iu))throw t.mu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.mu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const r of e){let e=Yd(r,t.Vu(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=D(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ch(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=dc.fromDate(e);return{timestampValue:$h(t.serializer,n)}}if(e instanceof dc){const n=new dc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:$h(t.serializer,n)}}if(e instanceof zd)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Bd)return{bytesValue:zh(t.serializer,e._byteString)};if(e instanceof xd){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.mu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Kh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu(`Unsupported field value: ${Dd(e)}`)}(e,t)}function Zd(e,t){const n={};return Oc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Dc(e,((e,i)=>{const r=Yd(i,t.Eu(e));null!=r&&(n[e]=r)})),{mapValue:{fields:n}}}function ef(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof dc||e instanceof zd||e instanceof Bd||e instanceof xd||e instanceof $d)}function tf(e,t,n){if(!ef(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=Dd(n);throw"an object"===i?t.mu(e+" a custom object"):t.mu(e+" "+i)}}function nf(e,t,n){if((t=D(t))instanceof Hd)return t._internalPath;if("string"==typeof t)return function(e,t,n){if(t.search(rf)>=0)throw sf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Hd(...t.split("."))._internalPath}catch(i){throw sf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}(e,t);throw sf("Field path arguments must be of type string or ",e,!1,void 0,n)}const rf=new RegExp("[~\\*/\\[\\]]");function sf(e,t,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new Ya(Ja.INVALID_ARGUMENT,a+e+c)}function of(e,t){return e.some((e=>e.isEqual(t)))}function af(e,t){const n=Od(e.firestore,Vd),i=function(e,t,...n){if(e=D(e),1===arguments.length&&(t=lc.newId()),kd("doc","path",t),e instanceof Ld){const i=mc.fromString(t,...n);return Rd(i),new xd(e,null,new yc(i))}{if(!(e instanceof xd||e instanceof Ud))throw new Ya(Ja.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(mc.fromString(t,...n));return Rd(i),new xd(e.firestore,e instanceof Ud?e.converter:null,new yc(i))}}(e),r=function(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}(e.converter,t);return function(e,t){return function(e,t){const n=new Za;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const i=wd(e);try{const e=await function(e,t){const n=Xa(e),i=dc.now(),r=t.reduce(((e,t)=>e.add(t.key)),rh());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Ql(),c=rh();return n.ss.getEntries(e,r).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((r=>{s=r;const o=[];for(const e of t){const t=kh(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Dh(e.key,t,hl(t.value.mapValue),_h.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,o,t)})).next((t=>{o=t;const i=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:Yl(s)})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.Sa[e.currentUser.toKey()];i||(i=new Pc(hc)),i=i.insert(t,n),e.Sa[e.currentUser.toKey()]=i}(i,e.batchId,n),await vd(i,e.changes),await Ju(i.remoteStore)}catch(e){const t=ld(e,"Failed to persist write");n.reject(t)}}(await Cd(e),t,n))),n.promise}(function(e){return e._firestoreClient||jd(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}(e),t)}(n,[Jd(Xd(e.firestore),"addDoc",i._key,r,null!==e.converter,{}).toMutation(i._key,_h.exists(!1))]).then((()=>i))}new WeakMap,function(e,t=!0){!function(e){Ba=e}(Ee),ge(new O("firestore",((e,{instanceIdentifier:n,options:i})=>{const r=e.getProvider("app").getImmediate(),s=new Vd(new ic(e.getProvider("auth-internal")),new ac(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ya(Ja.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qc(e.options.projectId,t)}(r,n),r);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Ie(Va,"4.3.2",e),Ie(Va,"4.3.2","esm2017")}();const cf=be({apiKey:"AIzaSyDy4weXhaPsGQMkTHcon0TFV4bR2aHquko",authDomain:"quiwe-22301.firebaseapp.com",projectId:"quiwe-22301",storageBucket:"quiwe-22301.appspot.com",messagingSenderId:"704773895989",appId:"1:704773895989:web:0909719081ce27debcbe7c",measurementId:"G-VJ8F2XEZP3"}),lf=function(e,t){const n="string"==typeof e?e:"(default)",i=ve("object"==typeof e?e:_e(),"firestore").getImmediate({identifier:n});if(!i._initialized){const e=(e=>{const t=g("firestore");if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]})();e&&function(e,t,n,i={}){var r;const s=(e=Od(e,Ld))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&qa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=ja.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[f(JSON.stringify({alg:"none",type:"JWT"})),f(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Ya(Ja.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ja(s)}e._authCredentials=new nc(new ec(t,n))}}(i,...e)}return i}(cf),hf=(function(e=_e()){const t=ve(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=ve(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(T(n.getOptions(),null!=t?t:{}))return e;je(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:fi,persistence:[Ln,vn,wn]}),i=y("authTokenSyncURL");if(i){const e=(r=i,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>vi)return;const i=null==t?void 0:t.token;yi!==i&&(yi=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});!function(e,t,n){D(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(t,n,i,r){D(t).onIdTokenChanged((t=>e(t)),void 0,void 0)}(n)}var r;const s=g("auth");s&&function(e,t,n){const i=jt(e);$e(i._canInitEmulator,i,"emulator-config-failed"),$e(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),s=qt(t),{host:o,port:a}=function(e){const t=qt(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:Kt(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:Kt(t)}}}(t),c=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${s}`)}(cf),e=>function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function*(){try{yield af(function(e,t,...n){if(e=D(e),kd("collection","path",t),e instanceof Ld){const i=mc.fromString(t,...n);return Nd(i),new Ud(e,null,i)}{if(!(e instanceof xd||e instanceof Ud))throw new Ya(Ja.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(mc.fromString(t,...n));return Nd(i),new Ud(e.firestore,null,i)}}(lf,"products"),e)}catch(e){console.error("Error adding document: ",e)}})));const uf=e=>({type:"NAVIGATE",payload:e}),df=(e,t)=>{var n;const i=e.ownerDocument.createElement("style");i.innerHTML=t,null===(n=e.shadowRoot)||void 0===n||n.appendChild(i)};var ff,pf=n(893);!function(e){e.logo="logo",e.regions="regions",e.climate="climate",e.search="search",e.profile="profile"}(ff||(ff={}));class mf extends HTMLElement{static get observedAttributes(){return Object.keys({logo:null,regions:null,climate:null,search:null,profile:null})}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}attributeChangedCallback(e,t,n){switch(e){case ff.logo:this.logo=n?String(n):void 0;break;case ff.regions:this.regions=n?String(n):void 0;break;case ff.climate:this.climate=n?String(n):void 0;break;case ff.search:this.search=n?String(n):void 0;break;case ff.profile:this.profile=n?String(n):void 0;break;default:this.propName=n}}render(){var e;this.shadowRoot&&(this.shadowRoot.innerHTML=""),df(this,pf.Z);const t=this.ownerDocument.createElement("section");t.classList.add("class-header");const n=this.ownerDocument.createElement("div");n.classList.add("class-left");const i=this.ownerDocument.createElement("img");i.setAttribute("src",`${this.logo}`),i.setAttribute("height","40np"),i.addEventListener("click",(()=>{l(uf(s.DASHBOARD))}));const r=this.ownerDocument.createElement("h3");r.innerText=`${this.regions}`,r.addEventListener("click",(()=>{l(uf(s.REGIONS))}));const o=this.ownerDocument.createElement("h3");o.innerText=`${this.climate}`,o.addEventListener("click",(()=>{l(uf(s.CLIMATE))}));const a=this.ownerDocument.createElement("div");a.classList.add("class-right");const c=this.ownerDocument.createElement("input");c.setAttribute("type","search"),c.setAttribute("placeholder","Buscar"),c.setAttribute("id","Buscador");const h=this.ownerDocument.createElement("button");h.textContent="Buscar",h.addEventListener("click",(()=>{const e=c.value;console.log(e)}));const u=this.ownerDocument.createElement("img");u.setAttribute("src",`${this.profile}`),u.setAttribute("height","35np"),u.style.marginLeft="50px",u.addEventListener("click",(()=>{l(uf(s.DASHBOARD))})),n.appendChild(i),n.appendChild(r),n.appendChild(o),a.appendChild(c),a.appendChild(h),a.appendChild(u),t.appendChild(n),t.appendChild(a),null===(e=this.shadowRoot)||void 0===e||e.appendChild(t)}}customElements.define("app-header",mf);var gf,vf,yf=n(946);!function(e){e.img="img",e.title="title",e.spot="spot"}(gf||(gf={}));class wf extends HTMLElement{static get observedAttributes(){return[gf.img,gf.title,gf.spot]}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}attributeChangedCallback(e,t,n){switch(e){case gf.img:this.img=n?String(n):void 0;break;case gf.title:this.customTitle=n?String(n):void 0;break;case gf.spot:this.spot=n?String(n):void 0;default:this.propName=n}}render(){var e,t,n,i;this.shadowRoot&&(this.shadowRoot.innerHTML=""),df(this,yf.Z);const r=this.ownerDocument.createElement("section");r.classList.add("class-styles");const o=this.ownerDocument.createElement("img");o.classList.add("class-image"),o.setAttribute("src",`${this.img}`),o.setAttribute("height","267.57px"),o.setAttribute("width","200.68px"),o.addEventListener("click",(()=>{l(uf(s.SPOTSELECT))}));const a=this.ownerDocument.createElement("h1");a.classList.add("tittle-spot"),a.innerText=`${this.title}`;const c=this.ownerDocument.createElement("h3");c.innerText=`${this.spot}`,null===(e=this.shadowRoot)||void 0===e||e.appendChild(o),null===(t=this.shadowRoot)||void 0===t||t.appendChild(a),null===(n=this.shadowRoot)||void 0===n||n.appendChild(c),null===(i=this.shadowRoot)||void 0===i||i.appendChild(r)}}customElements.define("app-home",wf),function(e){e.img="img",e.title="title",e.spot="spot"}(vf||(vf={}));class Ef extends HTMLElement{static get observedAttributes(){return[vf.img,vf.title,vf.spot]}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}attributeChangedCallback(e,t,n){switch(e){case vf.img:this.img=n?String(n):void 0;break;case vf.title:this.customTitle=n?String(n):void 0;break;case vf.spot:this.spot=n?String(n):void 0;default:this.propName=n}}render(){var e,t,n,i;this.shadowRoot&&(this.shadowRoot.innerHTML=""),df(this,yf.Z);const r=this.ownerDocument.createElement("section");r.classList.add("class-styles");const o=this.ownerDocument.createElement("img");o.classList.add("class-image"),o.setAttribute("src",`${this.img}`),o.setAttribute("height","267.57px"),o.setAttribute("width","200.68px"),o.addEventListener("click",(()=>{l(uf(s.SPOTSELECT))}));const a=this.ownerDocument.createElement("h1");a.classList.add("tittle-spot"),a.innerText=`${this.title}`;const c=this.ownerDocument.createElement("h3");c.innerText=`${this.spot}`,null===(e=this.shadowRoot)||void 0===e||e.appendChild(o),null===(t=this.shadowRoot)||void 0===t||t.appendChild(a),null===(n=this.shadowRoot)||void 0===n||n.appendChild(c),null===(i=this.shadowRoot)||void 0===i||i.appendChild(r)}}customElements.define("app-recommended",Ef);const bf=[{logo:"../src/components/imgheader/quiwe.png",regions:"Regiones",climate:"Climas",profile:"../src/components/imgheader/profile.png"}],_f=[{name:"m_gigante",img:"https://huilamagnifica.com/wp-content/uploads/2019/05/Mirador-La-Mano-del-Gigante-Municipio-de-Gigante-Huila-Magnifica-10.jpg",title:"Mirador La Mano del Gigante",spot:"Gigante, Huila"},{name:"p_peñol",img:"https://upload.wikimedia.org/wikipedia/commons/2/26/PIEDRA_DEL_PE%C3%91OL_2.jpg",title:"Piedra del Peñol",spot:"Guatapé, Antioquia"},{name:"c_sombrillas",img:"https://voyagesautenteo.com/wp-content/uploads/2021/07/rues-parapluies-guatape.jpg",title:"Callejón de las Sombrillas Coloridas",spot:"Guatapé, Antioquia"},{name:"i_Pedro",img:"https://i0.wp.com/www.turismoreligioso.travel/wp-content/uploads/2021/09/SAN-PEDRO-CLAVER-EDIFICO-TURISMO-RELIGIOSO_1.jpg?fit=750%2C422&ssl=1",title:"Iglesia de San Pedro Claver",spot:"Cartagena de Indias, Bolívar"},{name:"c_cristales",img:"https://www.eluniversal.com.mx/resizer/7Loc41J5hFF0EhhlDfuOFfrixCE=/1100x666/cloudfront-us-east-1.images.arcpublishing.com/eluniversal/PS36GSZDDNBVDF5HUA2KBNKYL4.jpg",title:"Caño Cristales",spot:"Sierra de la Macarena, Meta"},{name:"s_lajas",img:"https://lanotapositiva.com/wp-content/uploads/2019/02/Por-su-arquitectura-y-ubicaci%C3%B3n-la-iglesia-de-Las-Lajas-en-Nari%C3%B1o-es-considerada-como-la-m%C3%A1s-bonita-del-mundo.jpg",title:"Santuario de Las Lajas",spot:"Ipiales, Nariño"}],If=[{name:"m_gigante",img:"https://huilamagnifica.com/wp-content/uploads/2019/05/Mirador-La-Mano-del-Gigante-Municipio-de-Gigante-Huila-Magnifica-10.jpg",title:"Mirador La Mano del Gigante",spot:"Gigante, Huila"},{name:"p_peñol",img:"https://upload.wikimedia.org/wikipedia/commons/2/26/PIEDRA_DEL_PE%C3%91OL_2.jpg",title:"Piedra del Peñol",spot:"Guatapé, Antioquia"},{name:"c_sombrillas",img:"https://voyagesautenteo.com/wp-content/uploads/2021/07/rues-parapluies-guatape.jpg",title:"Callejón de las Sombrillas Coloridas",spot:"Guatapé, Antioquia"},{name:"i_Pedro",img:"https://i0.wp.com/www.turismoreligioso.travel/wp-content/uploads/2021/09/SAN-PEDRO-CLAVER-EDIFICO-TURISMO-RELIGIOSO_1.jpg?fit=750%2C422&ssl=1",title:"Iglesia de San Pedro Claver",spot:"Cartagena de Indias, Bolívar"},{name:"c_cristales",img:"https://www.eluniversal.com.mx/resizer/7Loc41J5hFF0EhhlDfuOFfrixCE=/1100x666/cloudfront-us-east-1.images.arcpublishing.com/eluniversal/PS36GSZDDNBVDF5HUA2KBNKYL4.jpg",title:"Caño Cristales",spot:"Sierra de la Macarena, Meta"},{name:"s_lajas",img:"https://lanotapositiva.com/wp-content/uploads/2019/02/Por-su-arquitectura-y-ubicaci%C3%B3n-la-iglesia-de-Las-Lajas-en-Nari%C3%B1o-es-considerada-como-la-m%C3%A1s-bonita-del-mundo.jpg",title:"Santuario de Las Lajas",spot:"Ipiales, Nariño"}];class Tf extends HTMLElement{constructor(){super(),this.header=[],this.home=[],this.recommended=[],this.attachShadow({mode:"open"}),bf.forEach((e=>{const t=this.ownerDocument.createElement("app-header");t.setAttribute(ff.logo,e.logo),t.setAttribute(ff.regions,e.regions),t.setAttribute(ff.climate,e.climate),t.setAttribute(ff.profile,e.profile),this.header.push(t)})),_f.forEach((e=>{const t=this.ownerDocument.createElement("app-home");t.setAttribute(gf.img,e.img),t.setAttribute(gf.title,e.title),t.setAttribute(gf.spot,e.spot),this.home.push(t)})),If.forEach((e=>{const t=this.ownerDocument.createElement("app-recommended");t.setAttribute(vf.img,e.img),t.setAttribute(vf.title,e.title),t.setAttribute(vf.spot,e.spot),this.recommended.push(t)}))}connectedCallback(){this.render()}render(){var e,t,n,i;if(this.shadowRoot){const r=this.ownerDocument.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("href","/src/screens/dashboard/style.css"),this.shadowRoot.appendChild(r),this.header.forEach((e=>{var t;null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}));let s=this.ownerDocument.createElement("h2");null===(e=this.shadowRoot)||void 0===e||e.appendChild(s),s.setAttribute("class","card-title");let o=this.ownerDocument.createElement("main");null===(t=this.shadowRoot)||void 0===t||t.appendChild(o),s.textContent="Ya visitados",o.setAttribute("class","principal"),o&&this.home.forEach((e=>{o.appendChild(e)}));let a=this.ownerDocument.createElement("h2");null===(n=this.shadowRoot)||void 0===n||n.appendChild(a),a.setAttribute("class","card-title");let c=this.ownerDocument.createElement("Recomm");null===(i=this.shadowRoot)||void 0===i||i.appendChild(c),a.textContent="Recomendados",c.setAttribute("class","principal"),c&&this.recommended.forEach((e=>{c.appendChild(e)}))}}}var Cf;customElements.define("app-dashboard",Tf),function(e){e.headerimg="headerimg",e.title="title",e.spot="spot",e.description="description",e.stars="stars",e.hotel="hotel",e.restaurant="restaurant",e.recommend="recommend",e.comment="comment"}(Cf||(Cf={}));class Sf extends HTMLElement{static get observedAttributes(){return[Cf.headerimg,Cf.title,Cf.spot,Cf.description,Cf.stars,Cf.hotel,Cf.restaurant,Cf.recommend,Cf.comment]}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}attributeChangedCallback(e,t,n){switch(e){case Cf.headerimg:this.headerimg=n?String(n):void 0;break;case Cf.title:this.sTitle=n?String(n):void 0;break;case Cf.spot:this.spot=n?String(n):void 0;case Cf.description:this.description=n?String(n):void 0;break;case Cf.stars:this.stars=n?String(n):void 0;break;case Cf.hotel:this.hotel=n?String(n):void 0;case Cf.restaurant:this.restaurant=n?String(n):void 0;break;case Cf.recommend:this.recommend=n?String(n):void 0;break;case Cf.comment:this.comment=n?String(n):void 0;default:this.propName=n}this.render()}render(){this.shadowRoot&&(this.shadowRoot.innerHTML=`\n            <link rel="stylesheet" href="../src/components/selectedspot/Selectedspot.css">\n            \n            <section>\n            <div class="images">\n            <img src=${this.headerimg} alt="">\n            </div>\n  \n            <div class="star-text">\n            <h1>${this.title}</h1>\n            <div class="stars">\n              <img src="/src/components/selectedspot/img/star_icon.png" alt="">\n              <img src="/src/components/selectedspot/img/star_icon.png" alt="">\n              <img src="/src/components/selectedspot/img/star_icon.png" alt="">\n              <img src="/src/components/selectedspot/img/star_icon.png" alt="">\n              <img src="/src/components/selectedspot/img/star_icon.png" alt="">\n            </div>\n            </div>\n\n            <h6>${this.spot}</h6>\n            \n            <p class="description">${this.description}</p>\n\n            <div class="establishment">\n              <label for="establishment">\n                <img src="/src/components/selectedspot/img/hotel_icon.png" alt="">\n              </label>\n                <select>\n                    <option value="">Hoteles</option>\n                    <option value="restaurant">Restaurant</option>\n                </select>\n            </div>\n\n            <div class="recommendation">\n            <label for="recommendation">\n                <img src="/src/components/selectedspot/img/restaurant_icon.png" alt="">\n              </label>\n                <select>\n                    <option value="">Hoteles</option>\n                    <option value="restaurant">Restaurant</option>\n                </select>\n            </div>\n            </section>\n            `)}}customElements.define("app-spot",Sf);const Af={comm:""};class kf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var e,t;this.shadowRoot&&(this.shadowRoot.innerHTML="");const n=this.ownerDocument.createElement("textarea");n.addEventListener("change",(e=>{Af.comm=e.target.value}));const r=this.ownerDocument.createElement("button");r.textContent="Publicar",r.addEventListener("click",(()=>function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){var e;console.log(Af),l(yield(e=Af,function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function*(){return yield hf(e),{action:i.SAVE_COMMENT,payload:e}}))))})))),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n),null===(t=this.shadowRoot)||void 0===t||t.appendChild(r)}}customElements.define("app-comment",kf);class Rf extends HTMLElement{constructor(){super(),this.header=[],this.sSpot=[],this.recommended=[],this.attachShadow({mode:"open"}),bf.forEach((e=>{const t=this.ownerDocument.createElement("app-header");t.setAttribute(ff.logo,e.logo),t.setAttribute(ff.regions,e.regions),t.setAttribute(ff.climate,e.climate),t.setAttribute(ff.profile,e.profile),this.header.push(t)})),If.forEach((e=>{const t=this.ownerDocument.createElement("app-recommended");t.setAttribute(vf.img,e.img),t.setAttribute(vf.title,e.title),t.setAttribute(vf.spot,e.spot),this.recommended.push(t)}))}connectedCallback(){this.render()}render(){if(this.shadowRoot){const e=this.ownerDocument.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href","/src/screens/place/place.css"),this.shadowRoot.appendChild(e);const t=this.ownerDocument.createElement("main");t.classList.add("main-container"),this.header.forEach((e=>{t.appendChild(e)}));const n=this.ownerDocument.createElement("app-spot");n.setAttribute(Cf.headerimg,"https://www.eluniversal.com.mx/resizer/7Loc41J5hFF0EhhlDfuOFfrixCE=/1100x666/cloudfront-us-east-1.images.arcpublishing.com/eluniversal/PS36GSZDDNBVDF5HUA2KBNKYL4.jpg"),n.setAttribute(Cf.title,"Caño Cristales"),n.setAttribute(Cf.spot,"Sierra de la Macarena, Meta"),n.setAttribute(Cf.description,"Caño Cristales es un río de Colombia que está ubicado en la sierra de la Macarena, en el municipio del mismo nombre, en el departamento del Meta."),t.appendChild(n);const i=this.ownerDocument.createElement("app-comment");i.classList.add("rectangle-toplist");const r=this.ownerDocument.createElement("div");r.classList.add("recommended-container"),this.recommended.forEach((e=>{r.appendChild(e)}));const s=this.ownerDocument.createElement("h6");s.textContent="Lugares recomendados",s.setAttribute("class","title-recommed"),t.appendChild(i),t.appendChild(s),t.appendChild(r),this.shadowRoot.appendChild(t)}}}customElements.define("app-place",Rf);class Nf extends HTMLElement{constructor(){super(),this.header=[],this.home=[],this.attachShadow({mode:"open"}),bf.forEach((e=>{const t=this.ownerDocument.createElement("app-header");t.setAttribute(ff.logo,e.logo),t.setAttribute(ff.regions,e.regions),t.setAttribute(ff.climate,e.climate),t.setAttribute(ff.profile,e.profile),this.header.push(t)})),_f.forEach((e=>{const t=this.ownerDocument.createElement("app-home");t.setAttribute(gf.img,e.img),t.setAttribute(gf.title,e.title),t.setAttribute(gf.spot,e.spot),this.home.push(t)}))}connectedCallback(){this.render()}render(){var e,t,n,i,r,s;if(this.shadowRoot){const o=this.ownerDocument.createElement("link");function a(e,t,n){const i=document.createElement("div"),r=document.createElement("h2");r.setAttribute("class","card-title"),r.textContent=e;const s=document.createElement("h3");s.setAttribute("class","card-description"),s.textContent=t;const o=document.createElement("main");return o.setAttribute("class","principal"),n.forEach((e=>{const t=e.cloneNode(!0);o.appendChild(t)})),i.appendChild(r),i.appendChild(s),i.appendChild(o),i}o.setAttribute("rel","stylesheet"),o.setAttribute("href","/src/screens/Region/Regions.css"),this.shadowRoot.appendChild(o),this.header.forEach((e=>{var t;null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}));const c=this.ownerDocument.createElement("main");c.appendChild(a("Región Amazónica","Es la más extensa ya que ocupa un 40% del territorio colombiano. Cuenta con fauna y flora inmensamente variada que resguarda buena parte de la biodiversidad del planeta. Su cultura está atravesada por la herencia ancestral indígena, pues en esta región se encuentran casi 200 resguardos indígenas, donde conviven más de 20 comunidades con distintas familias lingüísticas como Tukano, Arawak, Tikuna, Huitoto y Tupí.",this.home)),null===(e=this.shadowRoot)||void 0===e||e.appendChild(c);const l=this.ownerDocument.createElement("main");l.appendChild(a("Región Andina","Con cerca de 30 millones de habitantes, es la región más poblada y de mayor desarrollo económico del país, donde se ubican los 3 centros urbanos más importantes: Bogotá, Medellín y Cali. Allí se encuentran la cultura paisa, la santandereana, la cundiboyacense, la opita, la vallecaucana y la pastusa, que además está en constante contacto con la región del Pacífico colombiano.",this.home)),null===(t=this.shadowRoot)||void 0===t||t.appendChild(l);const h=this.ownerDocument.createElement("main");h.appendChild(a("Región Caribe","Históricamente ha sido una de las regiones de Colombia más conectadas con el resto del mundo gracias a los puertos de Barranquilla y Cartagena, que a su vez, son sus dos principales centros urbanos. En esta región surgieron expresiones culturales icónicas como la cumbia, el vallenato, las artesanías del pueblo Zenú y el mundialmente famoso Carnaval de Barranquilla.",this.home)),null===(n=this.shadowRoot)||void 0===n||n.appendChild(h);const u=this.ownerDocument.createElement("main");u.appendChild(a("Región Insular","Agrupa diferentes islas importantes alejadas del territorio continental colombiano. Esto incluye al de San Bernardo y el de San Andrés, Providencia y Santa Catalina (en el mar Caribe) y las islas Gorgona y Malpelo (en el océano Pacífico). Cuenta con una belleza marina destacable y paisajes paradisíacos con playas de arenas blancas, importantes reservas y santuarios naturales.",this.home)),null===(i=this.shadowRoot)||void 0===i||i.appendChild(u);const d=this.ownerDocument.createElement("main");d.appendChild(a("Región Orinoquía","Con amplias planicies que parecen infinitas, múltiples ríos, ecosistemas únicos y baja densidad poblacional, la región de la Orinoquía hace parte de la gran cuenca del río Orinoco que comparten Colombia y Venezuela.",this.home)),null===(r=this.shadowRoot)||void 0===r||r.appendChild(d);const f=this.ownerDocument.createElement("main");f.appendChild(a("Región Pacífica","El Pacífico colombiano atraviesa 4 departamentos y está compuesto por largas costas y selvas que conforman uno de los territorios más agrestes y húmedos del continente, donde se concentra gran parte de la biodiversidad del país.",this.home)),null===(s=this.shadowRoot)||void 0===s||s.appendChild(f)}}}customElements.define("app-region",Nf);class Df extends HTMLElement{constructor(){super(),this.header=[],this.home=[],this.attachShadow({mode:"open"}),bf.forEach((e=>{const t=this.ownerDocument.createElement("app-header");t.setAttribute(ff.logo,e.logo),t.setAttribute(ff.regions,e.regions),t.setAttribute(ff.climate,e.climate),t.setAttribute(ff.profile,e.profile),this.header.push(t)})),_f.forEach((e=>{const t=this.ownerDocument.createElement("app-home");t.setAttribute(gf.img,e.img),t.setAttribute(gf.title,e.title),t.setAttribute(gf.spot,e.spot),this.home.push(t)}))}connectedCallback(){this.render()}render(){var e,t,n,i;if(this.shadowRoot){const r=this.ownerDocument.createElement("link");function s(e,t,n){const i=document.createElement("div"),r=document.createElement("h2");r.setAttribute("class","card-title"),r.textContent=e;const s=document.createElement("h3");s.setAttribute("class","card-description"),s.textContent=t;const o=document.createElement("main");return o.setAttribute("class","principal"),n.forEach((e=>{const t=e.cloneNode(!0);o.appendChild(t)})),i.appendChild(r),i.appendChild(s),i.appendChild(o),i}r.setAttribute("rel","stylesheet"),r.setAttribute("href","/src/screens/Climate/Climate.css"),this.shadowRoot.appendChild(r),this.header.forEach((e=>{var t;null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}));const o=this.ownerDocument.createElement("main");o.appendChild(s("Clima Tropical Húmedo","Tiene variaciones de humedad y altas temperaturas. La región del Pacífico es la más representativa de este tipo de clima.",this.home)),null===(e=this.shadowRoot)||void 0===e||e.appendChild(o);const a=this.ownerDocument.createElement("main");a.appendChild(s("Clima Seco","Predominante en los desiertos de altas temperaturas. La Península de La Guajira es un buen ejemplo de este clima en Colombia.",this.home)),null===(t=this.shadowRoot)||void 0===t||t.appendChild(a);const c=this.ownerDocument.createElement("main");c.appendChild(s("Clima Templado","Húmedo en invierno y seco en verano, como en la ciudad de Medellín.",this.home)),null===(n=this.shadowRoot)||void 0===n||n.appendChild(c);const l=this.ownerDocument.createElement("main");l.appendChild(s("Clima de Montaña","varía desde el clima frío como en Bogotá (2.600 m.s.n.m.) y de ahí a nieves perpetuas como en la Sierra Nevada de Santa Marta o el Nevado el Cocuy en Boyacá.",this.home)),null===(i=this.shadowRoot)||void 0===i||i.appendChild(l)}}}var Of;customElements.define("app-climate",Df),function(e){e.logo="logo",e.password="password",e.email="email",e.enterButton="enterButton",e.alreadyAcc="alreadyAcc"}(Of||(Of={}));class Pf extends HTMLElement{static get observedAttributes(){return Object.keys({logo:null,email:null,password:null,enterButton:null,alreadyAcc:null})}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}attributeChangedCallback(e,t,n){switch(e){case Of.logo:this.logo=n?String(n):void 0;break;case Of.email:this.email=n?String(n):void 0;break;case Of.password:this.password=n?String(n):void 0;break;case Of.enterButton:this.enterbutton=n?String(n):void 0;break;case Of.alreadyAcc:this.alreadyAcc=n?String(n):void 0;break;default:this.propName=n}}render(){var e;if(this.shadowRoot){const t=this.ownerDocument.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href","/src/screens/logIn/logIn.css"),this.shadowRoot.appendChild(t);const n=this.ownerDocument.createElement("section");n.classList.add("class-login");const i=this.ownerDocument.createElement("div");i.classList.add("class-logo");const r=document.createElement("img");r.setAttribute("src","/src/components/imgheader/quiwe2.png");const s=this.ownerDocument.createElement("div"),o=this.ownerDocument.createElement("h3");o.textContent="Correo electrónico";const a=this.ownerDocument.createElement("input");a.setAttribute("placeholder","Correo electrónico"),a.setAttribute("id","Correo electrónico");const c=this.ownerDocument.createElement("h3");c.textContent="Contraseña";const l=this.ownerDocument.createElement("input");l.setAttribute("placeholder","Contraseña"),l.setAttribute("id","Contraseña"),i.appendChild(r),s.appendChild(o),s.appendChild(a),s.appendChild(c),s.appendChild(l),n.appendChild(i),n.appendChild(s),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n)}}}customElements.define("log-in",Pf);class Lf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),c=[...c,this]}connectedCallback(){this.render()}render(){var e,t,n,i,r;if(this.shadowRoot)switch(this.shadowRoot.innerHTML="",a.screen){case s.LOGIN:const o=this.ownerDocument.createElement("log-in");null===(e=this.shadowRoot)||void 0===e||e.appendChild(o);break;case s.DASHBOARD:const a=this.ownerDocument.createElement("app-dashboard");null===(t=this.shadowRoot)||void 0===t||t.appendChild(a);break;case s.SPOTSELECT:const c=this.ownerDocument.createElement("app-place");null===(n=this.shadowRoot)||void 0===n||n.appendChild(c);break;case s.REGIONS:const l=this.ownerDocument.createElement("app-region");null===(i=this.shadowRoot)||void 0===i||i.appendChild(l);break;case s.CLIMATE:const h=this.ownerDocument.createElement("app-climate");null===(r=this.shadowRoot)||void 0===r||r.appendChild(h)}}}customElements.define("app-container",Lf)})()})();
/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={115:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(81),s=n.n(i),r=n(645),a=n.n(r)()(s());a.push([e.id,"section {\n    color: white;\n    font-size: 14px;\n    font-weight:500;\n    font-family: 'Inter', sans-serif;\n}",""]);const o=a},333:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(81),s=n.n(i),r=n(645),a=n.n(r)()(s());a.push([e.id,"section {\n    color: white;\n    font-size: 14px;\n    font-weight:500;\n    font-family: 'Inter', sans-serif;\n}",""]);const o=a},893:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(81),s=n.n(i),r=n(645),a=n.n(r)()(s());a.push([e.id,".class-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    flex-direction: row;\n    background-color: black;\n    margin-left: 40px;\n    margin-right: 40px;\n    padding: 1rem;\n    box-shadow: 0px 6px 40px rgba(214.84, 214.84, 214.84, 0.06);\n}\n\n#Buscador, #Buscador2 {\n    background-color: black;\n    font-size: 14px;\n    color: #ededed;\n    background-size: 24px;\n    width: 400px;\n    border: 1px solid #ededed;\n    border-radius: 4px;\n    padding: 9px 9px 9px 30px;\n    outline: none;\n}\n\n.class-buscador {\n    padding: 10px;\n    background-color: #ededed;\n    color: black;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n}\n\n.class-header .class-right button:hover {\n    background-color: #d1d1d1;\n}\n\n.class-region {\n    color: white;\n    font-size: 14px;\n    font-weight:500;\n    font-family: 'Inter', sans-serif;\n    cursor: pointer;\n}\n\n.class-texto {\n    color: white;\n    font-size: 14px;\n    font-weight:500;\n    font-family: 'Inter', sans-serif;\n    cursor: pointer;\n}\n\nimg {\n    cursor: pointer;\n\n}\n\n.class-header .class-right {\n    display: flex;\n    align-items: center;\n}\n\n.class-header .class-left {\n    display: flex;\n    align-items: center;\n    gap: 80px;\n}\n\n\n.dropdown-menu {\n   \n    position: absolute;\n    z-index: 1000;\n    transition: none;\n    color: white;\n    font-size: 14px;\n    font-weight:500;\n    font-family: 'Inter', sans-serif;\n    margin-left: 500px;\n    margin-top: 115px;\n    cursor: pointer;\n    line-height: 2;\n    padding: 6px;\n    border: 1px solid #ededed;\n    width: 52px;\n    \n}\n\n.dropdown-menu.show {\n    display: block;\n}\n\n.class-icono { \n    display: none;\n}\n\naside {\n    display: none;\n    top: 0;\n    left: 0;\n    z-index: 999;\n    width: 100vw;\n    height: 100vh;\n    background-color: black;\n\n}\n\n.class-contenedor {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n}\n\n@media screen and (max-width: 1024px) {\n    #Buscador {\n        display: none;\n    }\n\n    .class-buscador {\n        display: none;\n    }\n\n    .class-region {\n        display: none;\n    }\n\n    .class-profile {\n        display: none;\n    }\n}",""]);const o=a},946:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(81),s=n.n(i),r=n(645),a=n.n(r)()(s());a.push([e.id,"\nh1 {\n    font-family: 'Inter', sans-serif;\n    color: white;\n    font-size: 15px;\n}\n\nh3 {\n    font-family: 'Inter', sans-serif;\n    color: white;\n    font-size: 14px;\n    font-weight: normal;\n    \n}\n\nimg {\n    display: grid;\n    border-radius: 15px;\n    height:267.57px;\n    width: 100%;\n    object-fit: cover;\n    cursor: pointer;\n}\n",""]);const o=a},671:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(81),s=n.n(i),r=n(645),a=n.n(r)()(s());a.push([e.id,".images {\n    width: 100%;\n    height: 341px;\n}\n\nsection {\n    padding: 0 131px;\n    margin-top: 4rem;\n}\n\n.images img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.star-text {\n    display: flex;\n    align-items: center;\n    gap: 1.5rem;\n}\n\n.star-text h1 {\n    color: white;\n    font-size: 1.8rem;\n    font-family: 'Inter', sans-serif;\n}\n\nh6 {\n    color: white;\n    font-size: 1.8rem;\n    font-family: 'Inter', sans-serif;\n    margin: 0 !important;\n    font-weight: 400;\n}\n\n.description {\n    width: 75%;\n    margin-top: 2rem;\n    color: white;\n    font-size: 1.5rem;\n    font-family: 'Inter', sans-serif;\n    font-weight: 400;\n}\n\n.establishment,\n.recommendation {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    margin-top: 3rem;\n}\n\n.establishment {\n    margin-bottom: 3rem;\n}\n\n.recommendation {\n    margin-bottom: 7rem;\n}\n\n.establishment select,\n.recommendation select {\n    color: white;\n    font-size: 1.5rem;\n    font-family: 'Inter', sans-serif;\n    background: black;\n    border: transparent;\n}\n\n@media screen and (max-width: 1024px){\n    section {\n        padding: 0 80px;\n        margin-top: 4rem;\n    }\n}\n\n@media screen and (max-width: 850px){\n    .star-text {\n        display: flex;\n        align-items: flex-start;\n        gap: 0.8rem;\n        flex-direction: column;\n    }\n\n    .star-text h1 {\n        color: white;\n        font-size: 1.8rem;\n        font-family: 'Inter', sans-serif;\n        margin-bottom: 0px !important;\n    }\n\n    .description {\n        width: 100%;\n    }\n    \n}\n\n@media screen and (max-width: 640px){\n    section {\n        padding: 0 40px;\n        margin-top: 4rem;\n    }\n\n}\n\n\n",""]);const o=a},494:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(81),s=n.n(i),r=n(645),a=n.n(r)()(s());a.push([e.id,"body {\n    background-color: #0B0B0B;\n}\n\nh1 {\n    font-family: 'Inter', sans-serif;\n    color: white;\n    font-size: 15px;\n}\n\nh2 {\n    font-family: 'Inter', sans-serif;\n    color: white;\n    font-size: 35px;\n    margin-left: 131px;\n}\n\nh3 {\n    font-family: 'Inter', sans-serif;\n    color: white;\n    font-size: 12px;\n}\n\n.principal {\n    display: grid;\n    gap: 2rem;\n    padding: 0 131px 0 131px;\n    place-items: center;\n    grid-template-columns: repeat(4, minmax(0, 1fr));;\n}\n\n.card-description {\n    display: flex;\n    padding: 0 131px;\n    margin-bottom: 30px;\n    font-size: 15px;\n    font-weight: normal;\n    line-height: 25px;\n}\n\n@media screen and (max-width: 1024px){\n    .card-description {\n        padding: 0 80px 0 80px;\n    }\n    .principal {\n        padding: 0 80px 0 80px;\n        grid-template-columns: repeat(3, minmax(0, 1fr));;\n        gap: 1.5rem;\n    }\n}\n\n@media screen and (max-width: 850px){\n    .card-description {\n        padding: 0 80px 0 80px;\n    }\n\n    .principal {\n        padding: 0 80px 0 80px;\n        grid-template-columns: repeat(2, minmax(0, 1fr));;\n        gap: 1.5rem;\n    }\n}\n\n@media screen and (max-width: 640px){\n    .card-description {\n        padding: 0 40px 0 40px;\n    }\n\n    .principal {\n        padding: 0 40px 0 40px;\n        grid-template-columns: repeat(1, minmax(0, 1fr));;\n        gap: 1.5rem;\n    }\n\n    h2 {\n        margin-left: 40px;\n    }\n}\n\n\n",""]);const o=a},46:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(81),s=n.n(i),r=n(645),a=n.n(r)()(s());a.push([e.id,"body {\n    background-color: #0B0B0B;\n}\n\nh1 {\n    font-family: 'Inter', sans-serif;\n    color: white;\n    font-size: 15px;\n}\n\nh2 {\n    font-family: 'Inter', sans-serif;\n    color: white;\n    font-size: 35px;\n    margin-left: 131px;\n}\n\nh3 {\n    font-family: 'Inter', sans-serif;\n    color: white;\n    font-size: 12px;\n    \n}\n\n.principal {\n    display: grid;\n    gap: 2rem;\n    padding: 0 131px 0 131px;\n    place-items: center;\n    grid-template-columns: repeat(4, minmax(0, 1fr));;\n}\n\n.card-description {\n    display: flex;\n    padding: 0 131px;\n    margin-bottom: 30px;\n    font-size: 15px;\n    font-weight: normal;\n    line-height: 25px;\n}\n\n@media screen and (max-width: 1024px){\n    .card-description {\n        padding: 0 80px 0 80px;\n    }\n    .principal {\n        padding: 0 80px 0 80px;\n        grid-template-columns: repeat(3, minmax(0, 1fr));;\n        gap: 1.5rem;\n    }\n}\n\n@media screen and (max-width: 850px){\n    .card-description {\n        padding: 0 80px 0 80px;\n    }\n\n    .principal {\n        padding: 0 80px 0 80px;\n        grid-template-columns: repeat(2, minmax(0, 1fr));;\n        gap: 1.5rem;\n    }\n}\n\n@media screen and (max-width: 640px){\n    .card-description {\n        padding: 0 40px 0 40px;\n    }\n\n    .principal {\n        padding: 0 40px 0 40px;\n        grid-template-columns: repeat(1, minmax(0, 1fr));;\n        gap: 1.5rem;\n    }\n\n    h2 {\n        margin-left: 40px;\n    }\n}\n\n\n",""]);const o=a},924:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(81),s=n.n(i),r=n(645),a=n.n(r)()(s());a.push([e.id,"body {\n    background-color: #0B0B0B;\n}\n\nh1 {\n    font-family: 'Inter', sans-serif;\n    color: white;\n    font-size: 15px;\n}\n\nh2 {\n    font-family: 'Inter', sans-serif;\n    color: white;\n    font-size: 35px;\n    margin-left: 131px;\n}\n\nh3 {\n    font-family: 'Inter', sans-serif;\n    color: white;\n    font-size: 12px;\n}\n\n.principal {\n    display: grid;\n    gap: 2rem;\n    padding: 0 131px 0 131px;\n    place-items: center;\n    grid-template-columns: repeat(4, minmax(0, 1fr));;\n}\n\n@media screen and (max-width: 1024px){\n    .principal {\n        padding: 0 80px 0 80px;\n        grid-template-columns: repeat(3, minmax(0, 1fr));;\n    }\n}\n\n@media screen and (max-width: 850px){\n    .principal {\n        padding: 0 80px 0 80px;\n        grid-template-columns: repeat(2, minmax(0, 1fr));;\n        gap: 1.5rem;\n    }\n}\n\n@media screen and (max-width: 640px){\n    .principal {\n        padding: 0 40px 0 40px;\n        grid-template-columns: repeat(1, minmax(0, 1fr));;\n        gap: 1.5rem;\n    }\n\n    h2 {\n        margin-left: 40px;\n    }\n}\n",""]);const o=a},463:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(81),s=n.n(i),r=n(645),a=n.n(r)()(s());a.push([e.id,".class-container {\n    display: grid;\n    place-items: center;\n    min-height: 100vh;\n}\n\nsection {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    \n    gap: 18px;\n}\n\nh3 {\n    font-family: 'Inter', sans-serif;\n    color: #ededed;\n    font-size: 14px;\n    font-weight: normal;\n}\n\nimg {\n  \n    width: 300px;\n}\n\ninput {\n    background-color: black;\n    font-size: 15px;\n    color: #ededed;\n    background-size: 24px;\n \n    height: 24px;\n    border: 3px solid #ededed;\n    border-radius: 12px;\n    padding: 9px 9px 9px 30px;\n    outline: none;\n}\n\nbutton {\n    padding: 10px;\n    background-color: #ededed;\n    color: black;\n    border: none;\n    border-radius: 12px;\n    cursor: pointer;\n    width: 200px;\n    height: 45px;\n    font-size: 15px;\n    font-weight: normal;\n    cursor: pointer;\n}\n\nbutton:hover {\n    background-color: #d1d1d1;\n}\n\n.class-acc {\n    cursor: pointer;\n}\n\n@media screen and (max-width:640px){\n    img {\n  \n        width: 200px;\n        \n    }\n}",""]);const o=a},916:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(81),s=n.n(i),r=n(645),a=n.n(r)()(s());a.push([e.id,"body {\n    background-color: #0B0B0B;\n}\n\nh1 {\n    font-family: 'Inter', sans-serif;\n    color: white;\n    font-size: 15px;\n}\n\nh2 {\n    font-family: 'Inter', sans-serif;\n    color: white;\n    font-size: 35px;\n    margin-left: 131px;\n}\n\nh3 {\n    font-family: 'Inter', sans-serif;\n    color: white;\n    font-size: 12px;\n}\n\n.recommended-container {\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    grid-gap: 10px;\n    padding: 1rem 8rem;\n}\n\n.title-recommed {\n    color: white;\n    font-family: 'Inter', sans-serif;\n    font-size: 1.7rem;\n    margin-left: 8rem;\n}\n\n@media screen and (max-width: 1024px){\n    .recommended-container {\n        padding: 0 80px 0 80px;\n        grid-template-columns: repeat(3, minmax(0, 1fr));;\n        gap: 1.5rem;\n    }\n}\n\n@media screen and (max-width: 850px){\n\n    .recommended-container {\n        padding: 0 80px 0 80px;\n        grid-template-columns: repeat(2, minmax(0, 1fr));;\n        gap: 1.5rem;\n    }\n}\n\n@media screen and (max-width: 640px){\n    \n    .recommended-container {\n        padding: 0 40px 0 40px;\n        grid-template-columns: repeat(1, minmax(0, 1fr));;\n        gap: 1.5rem;\n    }\n\n    .title-recommed {\n        margin-left: 40px;\n    }\n}\n\n\n",""]);const o=a},719:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(81),s=n.n(i),r=n(645),a=n.n(r)()(s());a.push([e.id,".class-container {\n    display: grid;\n    place-items: center;\n    min-height: 100vh;\n}\n\nsection {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    \n    gap: 18px;\n}\n\nh3 {\n    font-family: 'Inter', sans-serif;\n    color: #ededed;\n    font-size: 14px;\n    font-weight: normal;\n}\n\nimg {\n  \n    width: 300px;\n}\n\ninput {\n    background-color: black;\n    font-size: 15px;\n    color: #ededed;\n    background-size: 24px;\n \n    height: 24px;\n    border: 3px solid #ededed;\n    border-radius: 12px;\n    padding: 9px 9px 9px 30px;\n    outline: none;\n}\n\nbutton {\n    padding: 10px;\n    background-color: #ededed;\n    color: black;\n    border: none;\n    border-radius: 12px;\n    cursor: pointer;\n    width: 200px;\n    height: 45px;\n    font-size: 15px;\n    font-weight: normal;\n    cursor: pointer;\n}\n\nbutton:hover {\n    background-color: #d1d1d1;\n}\n\n.class-acc {\n    cursor: pointer;\n}\n\n@media screen and (max-width:640px){\n    img {\n  \n        width: 200px;\n        \n    }\n}",""]);const o=a},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,s,r){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(i)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);i&&a[u[0]]||(void 0!==r&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=r),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),s&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=s):u[4]="".concat(s)),t.push(u))}},t}},81:e=>{e.exports=function(e){return e[1]}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={id:i,exports:{}};return e[i](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},t={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const s=e[t],r=t+1<e.length,a=r?e[t+1]:0,o=t+2<e.length,c=o?e[t+2]:0,l=s>>2,u=(3&s)<<4|a>>4;let h=(15&a)<<2|c>>6,d=63&c;o||(d=64,r||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(t,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(t):this.encodeByteArray(e(t),n)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){const r=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(r>>10)),t[i++]=String.fromCharCode(56320+(1023&r))}else{const r=e[n++],a=e[n++];t[i++]=String.fromCharCode((15&s)<<12|(63&r)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const c=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==a||null==o||null==c)throw new i;const l=r<<2|a>>4;if(s.push(l),64!==o){const e=a<<4&240|o>>2;if(s.push(e),64!==c){const e=o<<6&192|c;s.push(e)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s=function(n){return function(n){const i=e(n);return t.encodeByteArray(i,!0)}(n).replace(/\./g,"")},r=function(e){try{return t.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},a=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&r(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},o=e=>{var t,n;return null===(n=null===(t=a())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},c=()=>{var e;return null===(e=a())||void 0===e?void 0:e.config},l=e=>{var t;return null===(t=a())||void 0===t?void 0:t[`_${e}`]};class u{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}class d extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,d.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,p.prototype.create)}}class p{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],r=s?function(e,t){return e.replace(m,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(s,n):"Error",a=`${this.serviceName}: ${r} (${i}).`;return new d(i,a,n)}}const m=/\{\$([^}]+)}/g;function f(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const n=e[s],r=t[s];if(g(n)&&g(r)){if(!f(n,r))return!1}else if(n!==r)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function g(e){return null!==e&&"object"==typeof e}function y(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function v(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function w(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class b{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=E),void 0===i.error&&(i.error=E),void 0===i.complete&&(i.complete=E);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function E(){}function _(e){return e&&e._delegate?e._delegate:e}class C{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const T="[DEFAULT]";class I{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new u;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:T})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=T){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=T){return this.instances.has(e)}getOptions(e=T){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===T?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e=T){return this.component?this.component.multipleInstances?e:T:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class S{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new I(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const A=[];var k,N;(N=k||(k={}))[N.DEBUG=0]="DEBUG",N[N.VERBOSE=1]="VERBOSE",N[N.INFO=2]="INFO",N[N.WARN=3]="WARN",N[N.ERROR=4]="ERROR",N[N.SILENT=5]="SILENT";const D={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},R=k.INFO,x={[k.DEBUG]:"log",[k.VERBOSE]:"log",[k.INFO]:"info",[k.WARN]:"warn",[k.ERROR]:"error"},P=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),s=x[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${i}]  ${e.name}:`,...n)};class O{constructor(e){this.name=e,this._logLevel=R,this._logHandler=P,this._userLogHandler=null,A.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in k))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?D[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...e),this._logHandler(this,k.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...e),this._logHandler(this,k.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,k.INFO,...e),this._logHandler(this,k.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,k.WARN,...e),this._logHandler(this,k.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,k.ERROR,...e),this._logHandler(this,k.ERROR,...e)}}const L=(e,t)=>t.some((t=>e instanceof t));let M,q;const U=new WeakMap,j=new WeakMap,F=new WeakMap,V=new WeakMap,z=new WeakMap;let B={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return j.get(e);if("objectStoreNames"===t)return e.objectStoreNames||F.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return H(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function G(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(q||(q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply($(this),e),H(U.get(this))}:function(...e){return H(t.apply($(this),e))}:function(e,...n){const i=t.call($(this),e,...n);return F.set(i,e.sort?e.sort():[e]),H(i)}:(e instanceof IDBTransaction&&function(e){if(j.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",r),e.removeEventListener("abort",r)},s=()=>{t(),i()},r=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",r),e.addEventListener("abort",r)}));j.set(e,t)}(e),L(e,M||(M=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,B):e);var t}function H(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",r)},s=()=>{t(H(e.result)),i()},r=()=>{n(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",r)}));return t.then((t=>{t instanceof IDBCursor&&U.set(t,e)})).catch((()=>{})),z.set(t,e),t}(e);if(V.has(e))return V.get(e);const t=G(e);return t!==e&&(V.set(e,t),z.set(t,e)),t}const $=e=>z.get(e),K=["get","getKey","getAll","getAllKeys","count"],W=["put","add","delete","clear"],Q=new Map;function J(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Q.get(t))return Q.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=W.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!K.includes(n))return;const r=async function(e,...t){const r=this.transaction(e,s?"readwrite":"readonly");let a=r.store;return i&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),s&&r.done]))[0]};return Q.set(t,r),r}var X;X=B,B={...X,get:(e,t,n)=>J(e,t)||X.get(e,t,n),has:(e,t)=>!!J(e,t)||X.has(e,t)};class Y{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Z="@firebase/app",ee="0.9.22",te=new O("@firebase/app"),ne="[DEFAULT]",ie={[Z]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},se=new Map,re=new Map;function ae(e,t){try{e.container.addComponent(t)}catch(n){te.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function oe(e){const t=e.name;if(re.has(t))return te.debug(`There were multiple attempts to register component ${t}.`),!1;re.set(t,e);for(const t of se.values())ae(t,e);return!0}function ce(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const le=new p("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ue{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new C("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw le.create("app-deleted",{appName:this._name})}}const he="10.5.2";function de(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:ne,automaticDataCollectionEnabled:!1},t),s=i.name;if("string"!=typeof s||!s)throw le.create("bad-app-name",{appName:String(s)});if(n||(n=c()),!n)throw le.create("no-options");const r=se.get(s);if(r){if(f(n,r.options)&&f(i,r.config))return r;throw le.create("duplicate-app",{appName:s})}const a=new S(s);for(const e of re.values())a.addComponent(e);const o=new ue(n,i,a);return se.set(s,o),o}function pe(e=ne){const t=se.get(e);if(!t&&e===ne&&c())return de();if(!t)throw le.create("no-app",{appName:e});return t}function me(e,t,n){var i;let s=null!==(i=ie[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),a=t.match(/\s|\//);if(r||a){const e=[`Unable to register library "${s}" with version "${t}":`];return r&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void te.warn(e.join(" "))}oe(new C(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const fe="firebase-heartbeat-database",ge=1,ye="firebase-heartbeat-store";let ve=null;function we(){return ve||(ve=function(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(e,t),o=H(a);return i&&a.addEventListener("upgradeneeded",(e=>{i(H(a.result),e.oldVersion,e.newVersion,H(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{r&&e.addEventListener("close",(()=>r())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}(fe,ge,{upgrade:(e,t)=>{0===t&&e.createObjectStore(ye)}}).catch((e=>{throw le.create("idb-open",{originalErrorMessage:e.message})}))),ve}async function be(e,t){try{const n=(await we()).transaction(ye,"readwrite"),i=n.objectStore(ye);await i.put(t,Ee(e)),await n.done}catch(e){if(e instanceof d)te.warn(e.message);else{const t=le.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});te.warn(t.message)}}}function Ee(e){return`${e.name}!${e.options.appId}`}class _e{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Te(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Ce();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Ce(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),Ie(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ie(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=s(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ce(){return(new Date).toISOString().substring(0,10)}class Te{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await we();return await t.transaction(ye).objectStore(ye).get(Ee(e))}catch(e){if(e instanceof d)te.warn(e.message);else{const t=le.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});te.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return be(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return be(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ie(e){return s(JSON.stringify({version:2,heartbeats:e})).length}function Se(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n}oe(new C("platform-logger",(e=>new Y(e)),"PRIVATE")),oe(new C("heartbeat",(e=>new _e(e)),"PRIVATE")),me(Z,ee,""),me(Z,ee,"esm2017"),me("fire-js",""),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const Ae=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ke=new p("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ne=new O("@firebase/auth");function De(e,...t){Ne.logLevel<=k.ERROR&&Ne.error(`Auth (${he}): ${e}`,...t)}function Re(e,...t){throw Pe(e,...t)}function xe(e,...t){return Pe(e,...t)}function Pe(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return ke.create(e,...t)}function Oe(e,t,...n){if(!e)throw Pe(t,...n)}function Le(e){const t="INTERNAL ASSERTION FAILED: "+e;throw De(t),new Error(t)}function Me(e,t){e||Le(t)}function qe(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ue(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function je(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Ue()||"https:"===Ue()||function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Fe{constructor(e,t){this.shortDelay=e,this.longDelay=t,Me(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return je()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ve(e,t){Me(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class ze{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Le("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Le("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Le("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Be={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ge=new Fe(3e4,6e4);function He(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function $e(e,t,n,i,s={}){return Ke(e,s,(async()=>{let s={},r={};i&&("GET"===t?r=i:s={body:JSON.stringify(i)});const a=y(Object.assign({key:e.config.apiKey},r)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),ze.fetch()(Qe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},s))}))}async function Ke(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Be),t);try{const t=new Xe(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const r=await s.json();if("needConfirmation"in r)throw Ye(e,"account-exists-with-different-credential",r);if(s.ok&&!("errorMessage"in r))return r;{const t=s.ok?r.errorMessage:r.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ye(e,"credential-already-in-use",r);if("EMAIL_EXISTS"===n)throw Ye(e,"email-already-in-use",r);if("USER_DISABLED"===n)throw Ye(e,"user-disabled",r);const o=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw function(e,t,n){const i=Object.assign(Object.assign({},Ae()),{[t]:n});return new p("auth","Firebase",i).create(t,{appName:e.name})}(e,o,a);Re(e,o)}}catch(t){if(t instanceof d)throw t;Re(e,"network-request-failed",{message:String(t)})}}async function We(e,t,n,i,s={}){const r=await $e(e,t,n,i,s);return"mfaPendingCredential"in r&&Re(e,"multi-factor-auth-required",{_serverResponse:r}),r}function Qe(e,t,n,i){const s=`${t}${n}?${i}`;return e.config.emulator?Ve(e.config,s):`${e.config.apiScheme}://${s}`}function Je(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Xe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(xe(this.auth,"network-request-failed"))),Ge.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ye(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=xe(e,t,i);return s.customData._tokenResponse=n,s}function Ze(e){return void 0!==e&&void 0!==e.enterprise}class et{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Je(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}function tt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function nt(e){return 1e3*Number(e)}function it(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return De("JWT malformed, contained fewer than 3 sections"),null;try{const e=r(n);return e?JSON.parse(e):(De("Failed to decode base64 JWT payload"),null)}catch(e){return De("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function st(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof d&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class rt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class at{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tt(this.lastLoginAt),this.creationTime=tt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ot(e){var t;const n=e.auth,i=await e.getIdToken(),s=await st(e,async function(e,t){return $e(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));Oe(null==s?void 0:s.users.length,n,"internal-error");const r=s.users[0];e._notifyReloadListener(r);const a=(null===(t=r.providerUserInfo)||void 0===t?void 0:t.length)?r.providerUserInfo.map((e=>{var{providerId:t}=e,n=Se(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],o=(c=e.providerData,l=a,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&r.passwordHash||(null==o?void 0:o.length)),d=!!u&&h,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new at(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(e,p)}class ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(void 0!==e.idToken,"internal-error"),Oe(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=it(e);return Oe(t,"internal-error"),Oe(void 0!==t.exp,"internal-error"),Oe(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return Oe(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await async function(e,t){const n=await Ke(e,{},(async()=>{const n=y({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,r=Qe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ze.fetch()(r,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,r=new ct;return n&&(Oe("string"==typeof n,"internal-error",{appName:e}),r.refreshToken=n),i&&(Oe("string"==typeof i,"internal-error",{appName:e}),r.accessToken=i),s&&(Oe("number"==typeof s,"internal-error",{appName:e}),r.expirationTime=s),r}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ct,this.toJSON())}_performRefresh(){return Le("not implemented")}}function lt(e,t){Oe("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ut{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,s=Se(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new at(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await st(this,this.stsTokenManager.getToken(this.auth,e));return Oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=_(e),i=await n.getIdToken(t),s=it(i);Oe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r="object"==typeof s.firebase?s.firebase:void 0,a=null==r?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:tt(nt(s.auth_time)),issuedAtTime:tt(nt(s.iat)),expirationTime:tt(nt(s.exp)),signInProvider:a||null,signInSecondFactor:(null==r?void 0:r.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=_(e);await ot(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ut(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ot(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await st(this,async function(e,t){return $e(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,s,r,a,o,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(r=t.photoURL)&&void 0!==r?r:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,f=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:E,stsTokenManager:_}=t;Oe(v&&_,e,"internal-error");const C=ct.fromJSON(this.name,_);Oe("string"==typeof v,e,"internal-error"),lt(u,e.name),lt(h,e.name),Oe("boolean"==typeof w,e,"internal-error"),Oe("boolean"==typeof b,e,"internal-error"),lt(d,e.name),lt(p,e.name),lt(m,e.name),lt(f,e.name),lt(g,e.name),lt(y,e.name);const T=new ut({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:m,stsTokenManager:C,createdAt:g,lastLoginAt:y});return E&&Array.isArray(E)&&(T.providerData=E.map((e=>Object.assign({},e)))),f&&(T._redirectEventId=f),T}static async _fromIdTokenResponse(e,t,n=!1){const i=new ct;i.updateFromServerResponse(t);const s=new ut({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await ot(s),s}}const ht=new Map;function dt(e){Me(e instanceof Function,"Expected a class definition");let t=ht.get(e);return t?(Me(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ht.set(e,t),t)}class pt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pt.type="NONE";const mt=pt;function ft(e,t,n){return`firebase:${e}:${t}:${n}`}class gt{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=ft(this.userKey,i.apiKey,s),this.fullPersistenceKey=ft("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ut._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new gt(dt(mt),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let s=i[0]||dt(mt);const r=ft(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=await n._get(r);if(t){const i=ut._fromJSON(e,t);n!==s&&(a=i),s=n;break}}catch(e){}const o=i.filter((e=>e._shouldAllowMigration));return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(r,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==s)try{await e._remove(r)}catch(e){}}))),new gt(s,e,n)):new gt(s,e,n)}}function yt(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Et(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(vt(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ct(t))return"Blackberry";if(Tt(t))return"Webos";if(wt(t))return"Safari";if((t.includes("chrome/")||bt(t))&&!t.includes("edge/"))return"Chrome";if(_t(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function vt(e=h()){return/firefox\//i.test(e)}function wt(e=h()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function bt(e=h()){return/crios\//i.test(e)}function Et(e=h()){return/iemobile/i.test(e)}function _t(e=h()){return/android/i.test(e)}function Ct(e=h()){return/blackberry/i.test(e)}function Tt(e=h()){return/webos/i.test(e)}function It(e=h()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function St(e=h()){return It(e)||_t(e)||Tt(e)||Ct(e)||/windows phone/i.test(e)||Et(e)}function At(e,t=[]){let n;switch(e){case"Browser":n=yt(h());break;case"Worker":n=`${yt(h())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${he}/${i}`}class kt{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(e){i(e)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class Nt{constructor(e){var t,n,i,s;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=r.minPasswordLength)&&void 0!==t?t:6,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),void 0!==r.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),void 0!==r.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),void 0!==r.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),void 0!==r.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,s,r,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(i=o.containsLowercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(r=o.containsNumericCharacter)||void 0===r||r),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Dt{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xt(this),this.idTokenSubscription=new xt(this),this.beforeStateQueue=new kt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ke,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=dt(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await gt.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null==i?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==r||!(null==a?void 0:a.user)||(i=a.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ot(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?_(e):null;return t&&Oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(dt(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return $e(e,"GET","/v2/passwordPolicy",He(e,t))}(this),t=new Nt(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new p("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&dt(e)||this._popupRedirectResolver;Oe(t,this,"argument-error"),this.redirectPersistenceManager=await gt.create(this,[dt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t);let r=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(a,this,"internal-error"),a.then((()=>{r||s(this.currentUser)})),"function"==typeof t){const s=e.addObserver(t,n,i);return()=>{r=!0,s()}}{const n=e.addObserver(t);return()=>{r=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=At(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){Ne.logLevel<=k.WARN&&Ne.warn(`Auth (${he}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Rt(e){return _(e)}class xt{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new b(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Pt(e){return new Promise(((t,n)=>{const i=document.createElement("script");var s,r;i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=xe("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",(null!==(r=null===(s=document.getElementsByTagName("head"))||void 0===s?void 0:s[0])&&void 0!==r?r:document).appendChild(i)}))}function Ot(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Lt{constructor(e){this.type="recaptcha-enterprise",this.auth=Rt(e)}async verify(e="verify",t=!1){function n(t,n,i){const s=window.grecaptcha;Ze(s)?s.enterprise.ready((()=>{s.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{(async function(e,t){return $e(e,"GET","/v2/recaptchaConfig",He(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new et(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((s=>{if(!t&&Ze(window.grecaptcha))n(s,e,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));Pt("https://www.google.com/recaptcha/enterprise.js?render="+s).then((()=>{n(s,e,i)})).catch((e=>{i(e)}))}})).catch((e=>{i(e)}))}))}}async function Mt(e,t,n,i=!1){const s=new Lt(e);let r;try{r=await s.verify(n)}catch(e){r=await s.verify(n,!0)}const a=Object.assign({},t);return i?Object.assign(a,{captchaResp:r}):Object.assign(a,{captchaResponse:r}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function qt(e,t,n,i){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Mt(e,t,n,"getOobCode"===n);return i(e,s)}return i(e,t).catch((async s=>{if("auth/missing-recaptcha-token"===s.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await Mt(e,t,n,"getOobCode"===n);return i(e,s)}return Promise.reject(s)}))}function Ut(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function jt(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ft{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Le("not implemented")}_getIdTokenResponse(e){return Le("not implemented")}_linkToIdToken(e,t){return Le("not implemented")}_getReauthenticationResolver(e){return Le("not implemented")}}async function Vt(e,t){return We(e,"POST","/v1/accounts:signInWithPassword",He(e,t))}class zt extends Ft{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new zt(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new zt(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return qt(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Vt);case"emailLink":return async function(e,t){return We(e,"POST","/v1/accounts:signInWithEmailLink",He(e,t))}(e,{email:this._email,oobCode:this._password});default:Re(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return async function(e,t){return $e(e,"POST","/v1/accounts:update",t)}(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return We(e,"POST","/v1/accounts:signInWithEmailLink",He(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Re(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Bt(e,t){return We(e,"POST","/v1/accounts:signInWithIdp",He(e,t))}class Gt extends Ft{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Gt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Re("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=Se(t,["providerId","signInMethod"]);if(!n||!i)return null;const r=new Gt(n,i);return r.idToken=s.idToken||void 0,r.accessToken=s.accessToken||void 0,r.secret=s.secret,r.nonce=s.nonce,r.pendingToken=s.pendingToken||null,r}_getIdTokenResponse(e){return Bt(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Bt(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bt(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=y(t)}return e}}const Ht={USER_NOT_FOUND:"user-not-found"};class $t extends Ft{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new $t({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new $t({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return We(e,"POST","/v1/accounts:signInWithPhoneNumber",He(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await We(e,"POST","/v1/accounts:signInWithPhoneNumber",He(e,t));if(n.temporaryProof)throw Ye(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return We(e,"POST","/v1/accounts:signInWithPhoneNumber",He(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ht)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}=e;return n||t||i||s?new $t({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}):null}}class Kt{constructor(e){var t,n,i,s,r,a;const o=v(w(e)),c=null!==(t=o.apiKey)&&void 0!==t?t:null,l=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=o.mode)&&void 0!==i?i:null);Oe(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(r=o.languageCode)&&void 0!==r?r:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=v(w(e)).link,n=t?v(w(t)).deep_link_id:null,i=v(w(e)).deep_link_id;return(i?v(w(i)).link:null)||i||n||t||e}(e);try{return new Kt(t)}catch(e){return null}}}class Wt{constructor(){this.providerId=Wt.PROVIDER_ID}static credential(e,t){return zt._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Kt.parseLink(t);return Oe(n,"argument-error"),zt._fromEmailAndCode(e,n.code,n.tenantId)}}Wt.PROVIDER_ID="password",Wt.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Wt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Qt{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Jt extends Qt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Xt extends Jt{constructor(){super("facebook.com")}static credential(e){return Gt._fromParams({providerId:Xt.PROVIDER_ID,signInMethod:Xt.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xt.credentialFromTaggedObject(e)}static credentialFromError(e){return Xt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Xt.credential(e.oauthAccessToken)}catch(e){return null}}}Xt.FACEBOOK_SIGN_IN_METHOD="facebook.com",Xt.PROVIDER_ID="facebook.com";class Yt extends Jt{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Gt._fromParams({providerId:Yt.PROVIDER_ID,signInMethod:Yt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Yt.credentialFromTaggedObject(e)}static credentialFromError(e){return Yt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Yt.credential(t,n)}catch(e){return null}}}Yt.GOOGLE_SIGN_IN_METHOD="google.com",Yt.PROVIDER_ID="google.com";class Zt extends Jt{constructor(){super("github.com")}static credential(e){return Gt._fromParams({providerId:Zt.PROVIDER_ID,signInMethod:Zt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zt.credentialFromTaggedObject(e)}static credentialFromError(e){return Zt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Zt.credential(e.oauthAccessToken)}catch(e){return null}}}Zt.GITHUB_SIGN_IN_METHOD="github.com",Zt.PROVIDER_ID="github.com";class en extends Jt{constructor(){super("twitter.com")}static credential(e,t){return Gt._fromParams({providerId:en.PROVIDER_ID,signInMethod:en.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return en.credentialFromTaggedObject(e)}static credentialFromError(e){return en.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return en.credential(t,n)}catch(e){return null}}}async function tn(e,t){return We(e,"POST","/v1/accounts:signUp",He(e,t))}en.TWITTER_SIGN_IN_METHOD="twitter.com",en.PROVIDER_ID="twitter.com";class nn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await ut._fromIdTokenResponse(e,n,i),r=sn(n);return new nn({user:s,providerId:r,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=sn(n);return new nn({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function sn(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class rn extends d{constructor(e,t,n,i){var s;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,rn.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new rn(e,t,n,i)}}function an(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw rn._fromErrorAndOperation(e,n,t,i);throw n}))}async function on(e,t,n=!1){const i="signIn",s=await an(e,i,t),r=await nn._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}async function cn(e){const t=Rt(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function ln(e){return _(e).signOut()}new WeakMap;const un="__sak";class hn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(un,"1"),this.storage.removeItem(un),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class dn extends hn{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=h();return wt(e)||It(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=St(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);!function(){const e=h();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||s===e.newValue||e.newValue===e.oldValue?i():setTimeout(i,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}dn.type="LOCAL";const pn=dn;class mn extends hn{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mn.type="SESSION";const fn=mn;class gn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new gn(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,r=this.handlersMap[i];if(!(null==r?void 0:r.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const a=Array.from(r).map((async e=>e(t.origin,s))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function yn(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}gn.receivers=[];class vn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,r;return new Promise(((a,o)=>{const c=yn("",20);i.port1.start();const l=setTimeout((()=>{o(new Error("unsupported_event"))}),n);r={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(l),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(r),i.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])})).finally((()=>{r&&this.removeMessageHandler(r)}))}}function wn(){return window}function bn(){return void 0!==wn().WorkerGlobalScope&&"function"==typeof wn().importScripts}const En="firebaseLocalStorageDb",_n="firebaseLocalStorage",Cn="fbase_key";class Tn{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function In(e,t){return e.transaction([_n],t?"readwrite":"readonly").objectStore(_n)}function Sn(){const e=indexedDB.open(En,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(_n,{keyPath:Cn})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(_n)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(En);return new Tn(e).toPromise()}(),t(await Sn()))}))}))}async function An(e,t,n){const i=In(e,!0).put({[Cn]:t,value:n});return new Tn(i).toPromise()}function kn(e,t){const n=In(e,!0).delete(t);return new Tn(n).toPromise()}class Nn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Sn()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gn._getInstance(bn()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new vn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sn();return await An(e,un,"1"),await kn(e,un),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>An(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=In(e,!1).get(t),i=await new Tn(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>kn(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=In(e,!1).getAll();return new Tn(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Nn.type="LOCAL";const Dn=Nn;Ot("rcb"),new Fe(3e4,6e4);class Rn{constructor(e){this.providerId=Rn.PROVIDER_ID,this.auth=Rt(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var i;const s=await n.verify();try{let r;if(Oe("string"==typeof s,e,"argument-error"),Oe("recaptcha"===n.type,e,"argument-error"),r="string"==typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){Oe("enroll"===t.type,e,"internal-error");const n=await function(e,t){return $e(e,"POST","/v2/accounts/mfaEnrollment:start",He(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{Oe("signin"===t.type,e,"internal-error");const n=(null===(i=r.multiFactorHint)||void 0===i?void 0:i.uid)||r.multiFactorUid;Oe(n,e,"missing-multi-factor-info");const a=await function(e,t){return $e(e,"POST","/v2/accounts/mfaSignIn:start",He(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return $e(e,"POST","/v1/accounts:sendVerificationCode",He(e,t))}(e,{phoneNumber:r.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}(this.auth,e,_(t))}static credential(e,t){return $t._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Rn.credentialFromTaggedObject(t)}static credentialFromError(e){return Rn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?$t._fromTokenResponse(t,n):null}}Rn.PROVIDER_ID="phone",Rn.PHONE_SIGN_IN_METHOD="phone";class xn extends Ft{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bt(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bt(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bt(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Pn(e){return on(e.auth,new xn(e),e.bypassAuthState)}function On(e){const{auth:t,user:n}=e;return Oe(n,t,"internal-error"),async function(e,t,n=!1){const{auth:i}=e,s="reauthenticate";try{const r=await st(e,an(i,s,t,e),n);Oe(r.idToken,i,"internal-error");const a=it(r.idToken);Oe(a,i,"internal-error");const{sub:o}=a;return Oe(e.uid===o,i,"user-mismatch"),nn._forOperation(e,s,r)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&Re(i,"user-mismatch"),e}}(n,new xn(e),e.bypassAuthState)}async function Ln(e){const{auth:t,user:n}=e;return Oe(n,t,"internal-error"),async function(e,t,n=!1){const i=await st(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return nn._forOperation(e,"link",i)}(n,new xn(e),e.bypassAuthState)}class Mn{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:r,type:a}=e;if(r)return void this.reject(r);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Pn;case"linkViaPopup":case"linkViaRedirect":return Ln;case"reauthViaPopup":case"reauthViaRedirect":return On;default:Re(this.auth,"internal-error")}}resolve(e){Me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qn=new Fe(2e3,1e4);class Un extends Mn{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,Un.currentPopupAction&&Un.currentPopupAction.cancel(),Un.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){Me(1===this.filter.length,"Popup operations only handle one event");const e=yn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(xe(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Un.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(xe(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,qn.get())};e()}}Un.currentPopupAction=null;const jn="pendingRedirect",Fn=new Map;class Vn extends Mn{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Fn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return ft(jn,e.config.apiKey,e.name)}(t),i=function(e){return dt(e._redirectPersistence)}(e);if(!await i._isAvailable())return!1;const s="true"===await i._get(n);return await i._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Fn.set(this.auth._key(),e)}return this.bypassAuthState||Fn.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function zn(e,t){Fn.set(e._key(),t)}async function Bn(e,t,n=!1){const i=Rt(e),s=function(e,t){return t?dt(t):(Oe(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(i,t),r=new Vn(i,s,n),a=await r.execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}class Gn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $n(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!$n(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(xe(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hn(e))}saveEventToCache(e){this.cachedEventUids.add(Hn(e)),this.lastProcessedEventTime=Date.now()}}function Hn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function $n({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const Kn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wn=/^https?/;function Qn(e){const t=qe(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===i}if(!Wn.test(n))return!1;if(Kn.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const Jn=new Fe(3e4,6e4);function Xn(){const e=wn().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let Yn=null;function Zn(e){return Yn=Yn||function(e){return new Promise(((t,n)=>{var i,s,r;function a(){Xn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Xn(),n(xe(e,"network-request-failed"))},timeout:Jn.get()})}if(null===(s=null===(i=wn().gapi)||void 0===i?void 0:i.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(r=wn().gapi)||void 0===r?void 0:r.load)){const t=Ot("iframefcb");return wn()[t]=()=>{gapi.load?a():n(xe(e,"network-request-failed"))},Pt(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw Yn=null,e}))}(e),Yn}const ei=new Fe(5e3,15e3),ti={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ni=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ii(e){const t=e.config;Oe(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ve(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:he},s=ni.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${y(i).slice(1)}`}const si={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ri{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const ai=encodeURIComponent("fac");async function oi(e,t,n,i,s,r){Oe(e.config.authDomain,e,"auth-domain-config-required"),Oe(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:he,eventId:s};if(t instanceof Qt){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(r||{}))a[e]=t}if(t instanceof Jt){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const e of Object.keys(o))void 0===o[e]&&delete o[e];const c=await e._getAppCheckToken(),l=c?`#${ai}=${encodeURIComponent(c)}`:"";return`${function({config:e}){return e.emulator?Ve(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${y(o).slice(1)}${l}`}const ci="webStorageSupport",li=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fn,this._completeRedirectFn=Bn,this._overrideRedirectResult=zn}async _openPopup(e,t,n,i){var s;return Me(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),function(e,t,n,i=500,s=600){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const c=Object.assign(Object.assign({},si),{width:i.toString(),height:s.toString(),top:r,left:a}),l=h().toLowerCase();n&&(o=bt(l)?"_blank":n),vt(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=h()){var t;return It(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",o),new ri(null);const d=window.open(t||"",o,u);Oe(d,e,"popup-blocked");try{d.focus()}catch(e){}return new ri(d)}(e,await oi(e,t,n,qe(),i),yn())}async _openRedirect(e,t,n,i){return await this._originValidation(e),s=await oi(e,t,n,qe(),i),wn().location.href=s,new Promise((()=>{}));var s}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Me(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Zn(e),n=wn().gapi;return Oe(n,e,"internal-error"),t.open({where:document.body,url:ii(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ti,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const s=xe(e,"network-request-failed"),r=wn().setTimeout((()=>{i(s)}),ei.get());function a(){wn().clearTimeout(r),n(t)}t.ping(a).then(a,(()=>{i(s)}))}))))}(e),n=new Gn(e);return t.register("authEvent",(t=>(Oe(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ci,{type:ci},(n=>{var i;const s=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[ci];void 0!==s&&t(!!s),Re(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return $e(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(Qn(e))return}catch(e){}Re(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return St()||wt()||It()}};var ui="@firebase/auth",hi="1.3.2";class di{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const pi=l("authIdTokenMaxAge")||300;let mi=null;function fi(e=pe()){const t=ce(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=ce(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(f(n.getOptions(),null!=t?t:{}))return e;Re(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:li,persistence:[Dn,pn,fn]}),i=l("authTokenSyncURL");if(i){const e=(s=i,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>pi)return;const i=null==t?void 0:t.token;mi!==i&&(mi=i,await fetch(s,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});!function(e,t,n){_(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(t,n,i,s){_(t).onIdTokenChanged((t=>e(t)),void 0,void 0)}(n)}var s;const r=o("auth");return r&&function(e,t,n){const i=Rt(e);Oe(i._canInitEmulator,i,"emulator-config-failed"),Oe(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!!(null==n?void 0:n.disableWarnings),r=Ut(t),{host:a,port:o}=function(e){const t=Ut(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const e=s[1];return{host:e,port:jt(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:jt(t)}}}(t),c=null===o?"":`:${o}`;i.config.emulator={url:`${r}//${a}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:o,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${r}`),n}var gi,yi;gi="Browser",oe(new C("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:r,authDomain:a}=n.options;Oe(r&&!r.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:r,authDomain:a,clientPlatform:gi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:At(gi)},c=new Dt(n,i,s,o);return function(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(dt);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(c,t),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),oe(new C("auth-internal",(e=>(e=>new di(e))(Rt(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),me(ui,hi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(gi)),me(ui,hi,"esm2017"),function(e){e.STORE="STORE"}(yi||(yi={}));var vi,wi,bi;!function(e){e.NAVIGATE="NAVIGATE"}(vi||(vi={})),function(e){e.SAVE_COMMENT="SAVE_COMMENT",e.GET_COMMENT="GET_COMMENT",e.SELECT_SPOT="SELECT_SPOT",e.NONE="NONE"}(wi||(wi={})),function(e){e.DASHBOARD="DASHBOARD",e.REGIONS="REGIONS",e.CLIMATE="CLIMATE",e.SPOTSELECT="SPOTSELECT",e.LOGIN="LOGIN",e.SIGNIN="SIGNIN"}(bi||(bi={}));const Ei={screen:bi.LOGIN,products:[],selectedSpot:{img:"",name:"",title:"",spot:"",description:"",region:"",climate:""}};let _i=(({key:e,defaultValue:t})=>{const n=localStorage.getItem(e)||sessionStorage.getItem(e);return n?JSON.parse(n):t})({key:yi.STORE,defaultValue:Ei}),Ci=[];const Ti=e=>{const t=((e,t)=>{const{type:n,payload:i}=e;switch(n){case"NAVIGATE":t.screen=i;break;case wi.SAVE_COMMENT:return t.products=[...t.products,i],t;case wi.GET_COMMENT:return t.products=i,t;case wi.SELECT_SPOT:t.selectedSpot=i;break;default:return t}return t})(e,JSON.parse(JSON.stringify(_i)));var n;_i=Object.assign(Object.assign({},_i),t),n=t,(({key:e,value:t,session:n=!1})=>{const i=n?sessionStorage:localStorage,s=JSON.stringify(t);i.setItem(e,s)})({key:yi.STORE,value:n}),Ci.forEach((e=>e.render()))},Ii=e=>{Ci=[...Ci,e]};me("firebase","10.5.2","app");var Si,Ai="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ki={},Ni=Ni||{},Di=Ai||self;function Ri(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function xi(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Pi="closure_uid_"+(1e9*Math.random()>>>0),Oi=0;function Li(e,t,n){return e.call.apply(e.bind,arguments)}function Mi(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function qi(e,t,n){return(qi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Li:Mi).apply(null,arguments)}function Ui(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ji(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,i){for(var s=Array(arguments.length-2),r=2;r<arguments.length;r++)s[r-2]=arguments[r];return t.prototype[n].apply(e,s)}}function Fi(){this.s=this.s,this.o=this.o}Fi.prototype.s=!1,Fi.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Pi)&&e[Pi]||(e[Pi]=++Oi))},Fi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Vi=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function zi(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function Bi(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(Ri(n)){const t=e.length||0,i=n.length||0;e.length=t+i;for(let s=0;s<i;s++)e[t+s]=n[s]}else e.push(n)}}function Gi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Gi.prototype.h=function(){this.defaultPrevented=!0};var Hi=function(){if(!Di.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Di.addEventListener("test",(()=>{}),t),Di.removeEventListener("test",(()=>{}),t)}catch(e){}return e}();function $i(e){return/^[\s\xa0]*$/.test(e)}function Ki(){var e=Di.navigator;return e&&(e=e.userAgent)?e:""}function Wi(e){return-1!=Ki().indexOf(e)}function Qi(e){return Qi[" "](e),e}Qi[" "]=function(){};var Ji,Xi,Yi,Zi=Wi("Opera"),es=Wi("Trident")||Wi("MSIE"),ts=Wi("Edge"),ns=ts||es,is=Wi("Gecko")&&!(-1!=Ki().toLowerCase().indexOf("webkit")&&!Wi("Edge"))&&!(Wi("Trident")||Wi("MSIE"))&&!Wi("Edge"),ss=-1!=Ki().toLowerCase().indexOf("webkit")&&!Wi("Edge");function rs(){var e=Di.document;return e?e.documentMode:void 0}e:{var as="",os=(Xi=Ki(),is?/rv:([^\);]+)(\)|;)/.exec(Xi):ts?/Edge\/([\d\.]+)/.exec(Xi):es?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xi):ss?/WebKit\/(\S+)/.exec(Xi):Zi?/(?:Version)[ \/]?(\S+)/.exec(Xi):void 0);if(os&&(as=os?os[1]:""),es){var cs=rs();if(null!=cs&&cs>parseFloat(as)){Ji=String(cs);break e}}Ji=as}Di.document&&es?Yi=rs()||parseInt(Ji,10)||void 0:Yi=void 0;var ls=Yi;function us(e,t){if(Gi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(is){e:{try{Qi(t.nodeName);var s=!0;break e}catch(e){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:hs[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&us.$.h.call(this)}}ji(us,Gi);var hs={2:"touch",3:"pen",4:"mouse"};us.prototype.h=function(){us.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ds="closure_listenable_"+(1e6*Math.random()|0),ps=0;function ms(e,t,n,i,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.la=s,this.key=++ps,this.fa=this.ia=!1}function fs(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function gs(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function ys(e){const t={};for(const n in e)t[n]=e[n];return t}const vs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ws(e,t){let n,i;for(let t=1;t<arguments.length;t++){for(n in i=arguments[t],i)e[n]=i[n];for(let t=0;t<vs.length;t++)n=vs[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function bs(e){this.src=e,this.g={},this.h=0}function Es(e,t){var n=t.type;if(n in e.g){var i,s=e.g[n],r=Vi(s,t);(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(fs(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function _s(e,t,n,i){for(var s=0;s<e.length;++s){var r=e[s];if(!r.fa&&r.listener==t&&r.capture==!!n&&r.la==i)return s}return-1}bs.prototype.add=function(e,t,n,i,s){var r=e.toString();(e=this.g[r])||(e=this.g[r]=[],this.h++);var a=_s(e,t,i,s);return-1<a?(t=e[a],n||(t.ia=!1)):((t=new ms(t,this.src,r,!!i,s)).ia=n,e.push(t)),t};var Cs="closure_lm_"+(1e6*Math.random()|0),Ts={};function Is(e,t,n,i,s){if(i&&i.once)return As(e,t,n,i,s);if(Array.isArray(t)){for(var r=0;r<t.length;r++)Is(e,t[r],n,i,s);return null}return n=Os(n),e&&e[ds]?e.O(t,n,xi(i)?!!i.capture:!!i,s):Ss(e,t,n,!1,i,s)}function Ss(e,t,n,i,s,r){if(!t)throw Error("Invalid event type");var a=xi(s)?!!s.capture:!!s,o=xs(e);if(o||(e[Cs]=o=new bs(e)),(n=o.add(t,n,i,a,r)).proxy)return n;if(i=function(){const e=Rs;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)Hi||(s=a),void 0===s&&(s=!1),e.addEventListener(t.toString(),i,s);else if(e.attachEvent)e.attachEvent(Ds(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function As(e,t,n,i,s){if(Array.isArray(t)){for(var r=0;r<t.length;r++)As(e,t[r],n,i,s);return null}return n=Os(n),e&&e[ds]?e.P(t,n,xi(i)?!!i.capture:!!i,s):Ss(e,t,n,!0,i,s)}function ks(e,t,n,i,s){if(Array.isArray(t))for(var r=0;r<t.length;r++)ks(e,t[r],n,i,s);else i=xi(i)?!!i.capture:!!i,n=Os(n),e&&e[ds]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=_s(r=e.g[t],n,i,s))&&(fs(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete e.g[t],e.h--))):e&&(e=xs(e))&&(t=e.g[t.toString()],e=-1,t&&(e=_s(t,n,i,s)),(n=-1<e?t[e]:null)&&Ns(n))}function Ns(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[ds])Es(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(Ds(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=xs(t))?(Es(n,e),0==n.h&&(n.src=null,t[Cs]=null)):fs(e)}}}function Ds(e){return e in Ts?Ts[e]:Ts[e]="on"+e}function Rs(e,t){if(e.fa)e=!0;else{t=new us(t,this);var n=e.listener,i=e.la||e.src;e.ia&&Ns(e),e=n.call(i,t)}return e}function xs(e){return(e=e[Cs])instanceof bs?e:null}var Ps="__closure_events_fn_"+(1e9*Math.random()>>>0);function Os(e){return"function"==typeof e?e:(e[Ps]||(e[Ps]=function(t){return e.handleEvent(t)}),e[Ps])}function Ls(){Fi.call(this),this.i=new bs(this),this.S=this,this.J=null}function Ms(e,t){var n,i=e.J;if(i)for(n=[];i;i=i.J)n.push(i);if(e=e.S,i=t.type||t,"string"==typeof t)t=new Gi(t,e);else if(t instanceof Gi)t.target=t.target||e;else{var s=t;ws(t=new Gi(i,e),s)}if(s=!0,n)for(var r=n.length-1;0<=r;r--){var a=t.g=n[r];s=qs(a,i,!0,t)&&s}if(s=qs(a=t.g=e,i,!0,t)&&s,s=qs(a,i,!1,t)&&s,n)for(r=0;r<n.length;r++)s=qs(a=t.g=n[r],i,!1,t)&&s}function qs(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,r=0;r<t.length;++r){var a=t[r];if(a&&!a.fa&&a.capture==n){var o=a.listener,c=a.la||a.src;a.ia&&Es(e.i,a),s=!1!==o.call(c,i)&&s}}return s&&!i.defaultPrevented}ji(Ls,Fi),Ls.prototype[ds]=!0,Ls.prototype.removeEventListener=function(e,t,n,i){ks(this,e,t,n,i)},Ls.prototype.N=function(){if(Ls.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)fs(n[i]);delete t.g[e],t.h--}}this.J=null},Ls.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},Ls.prototype.P=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var Us=Di.JSON.stringify;function js(){var e=$s;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Fs=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Vs),(e=>e.reset()));class Vs{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function zs(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Bs(e){Di.setTimeout((()=>{throw e}),0)}let Gs,Hs=!1,$s=new class{constructor(){this.h=this.g=null}add(e,t){const n=Fs.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ks=()=>{const e=Di.Promise.resolve(void 0);Gs=()=>{e.then(Ws)}};var Ws=()=>{for(var e;e=js();){try{e.h.call(e.g)}catch(e){Bs(e)}var t=Fs;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Hs=!1};function Qs(e,t){Ls.call(this),this.h=e||1,this.g=t||Di,this.j=qi(this.qb,this),this.l=Date.now()}function Js(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Xs(e,t,n){if("function"==typeof e)n&&(e=qi(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=qi(e.handleEvent,e)}return 2147483647<Number(t)?-1:Di.setTimeout(e,t||0)}function Ys(e){e.g=Xs((()=>{e.g=null,e.i&&(e.i=!1,Ys(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ji(Qs,Ls),(Si=Qs.prototype).ga=!1,Si.T=null,Si.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ms(this,"tick"),this.ga&&(Js(this),this.start()))}},Si.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Si.N=function(){Qs.$.N.call(this),Js(this),delete this.g};class Zs extends Fi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ys(this)}N(){super.N(),this.g&&(Di.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(e){Fi.call(this),this.h=e,this.g={}}ji(er,Fi);var tr=[];function nr(e,t,n,i){Array.isArray(n)||(n&&(tr[0]=n.toString()),n=tr);for(var s=0;s<n.length;s++){var r=Is(t,n[s],i||e.handleEvent,!1,e.h||e);if(!r)break;e.g[r.key]=r}}function ir(e){gs(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ns(e)}),e),e.g={}}function sr(){this.g=!0}function rr(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var a=1;a<s.length;a++)s[a]=""}}}return Us(n)}catch(e){return t}}(e,n)+(i?" "+i:"")}))}er.prototype.N=function(){er.$.N.call(this),ir(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sr.prototype.Ea=function(){this.g=!1},sr.prototype.info=function(){};var ar={},or=null;function cr(){return or=or||new Ls}function lr(e){Gi.call(this,ar.Ta,e)}function ur(e){const t=cr();Ms(t,new lr(t))}function hr(e,t){Gi.call(this,ar.STAT_EVENT,e),this.stat=t}function dr(e){const t=cr();Ms(t,new hr(t,e))}function pr(e,t){Gi.call(this,ar.Ua,e),this.size=t}function mr(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Di.setTimeout((function(){e()}),t)}ar.Ta="serverreachability",ji(lr,Gi),ar.STAT_EVENT="statevent",ji(hr,Gi),ar.Ua="timingevent",ji(pr,Gi);var fr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},gr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function yr(){}function vr(e){return e.h||(e.h=e.i())}function wr(){}yr.prototype.h=null;var br,Er={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _r(){Gi.call(this,"d")}function Cr(){Gi.call(this,"c")}function Tr(){}function Ir(e,t,n,i){this.l=e,this.j=t,this.m=n,this.W=i||1,this.U=new er(this),this.P=Ar,e=ns?125:void 0,this.V=new Qs(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Sr}function Sr(){this.i=null,this.g="",this.h=!1}ji(_r,Gi),ji(Cr,Gi),ji(Tr,yr),Tr.prototype.g=function(){return new XMLHttpRequest},Tr.prototype.i=function(){return{}},br=new Tr;var Ar=45e3,kr={},Nr={};function Dr(e,t,n){e.L=1,e.v=Qr(Gr(t)),e.s=n,e.S=!0,Rr(e,null)}function Rr(e,t){e.G=Date.now(),Lr(e),e.A=Gr(e.v);var n=e.A,i=e.W;Array.isArray(i)||(i=[String(i)]),ca(n.i,"t",i),e.C=0,n=e.l.J,e.h=new Sr,e.g=co(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Zs(qi(e.Pa,e,e.g),e.O)),nr(e.U,e.g,"readystatechange",e.nb),t=e.I?ys(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),ur(),function(e,t,n,i,s,r){e.info((function(){if(e.g)if(r)for(var a="",o=r.split("&"),c=0;c<o.length;c++){var l=o[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");a=2<=h.length&&"type"==h[1]?a+(u+"=")+l+"&":a+(u+"=redacted&")}}else a=null;else a=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function xr(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.l.Ha}function Pr(e,t,n){let i,s=!0;for(;!e.J&&e.C<n.length;){if(i=Or(e,n),i==Nr){4==t&&(e.o=4,dr(14),s=!1),rr(e.j,e.m,null,"[Incomplete Response]");break}if(i==kr){e.o=4,dr(15),rr(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}rr(e.j,e.m,i,null),Fr(e,i)}xr(e)&&i!=Nr&&i!=kr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,dr(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),eo(t),t.M=!0,dr(11))):(rr(e.j,e.m,n,"[Invalid Chunked Response]"),jr(e),Ur(e))}function Or(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?Nr:(n=Number(t.substring(n,i)),isNaN(n)?kr:(i+=1)+n>t.length?Nr:(t=t.slice(i,i+n),e.C=i+n,t))}function Lr(e){e.Y=Date.now()+e.P,Mr(e,e.P)}function Mr(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=mr(qi(e.lb,e),t)}function qr(e){e.B&&(Di.clearTimeout(e.B),e.B=null)}function Ur(e){0==e.l.H||e.J||io(e.l,e)}function jr(e){qr(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Js(e.V),ir(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Fr(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||fa(n.i,e)))if(!e.K&&fa(n.i,e)&&3==n.H){try{var i=n.Ja.g.parse(t)}catch(e){i=null}if(Array.isArray(i)&&3==i.length){var s=i;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;no(n),$a(n)}Za(n),dr(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&0==n.A&&!n.v&&(n.v=mr(qi(n.ib,n),6e3));if(1>=ma(n.i)&&n.oa){try{n.oa()}catch(e){}n.oa=void 0}}else ro(n,11)}else if((e.K||n.g==e)&&no(n),!$i(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let l=s[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const s=l[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(i=1.5*u,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var r=i.i;r.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(r.j=r.l,r.g=new Set,r.h&&(ga(r,r.h),r.h=null))}if(i.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.Da=e,Wr(i.I,i.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var a=e;if((i=n).wa=oo(i,i.J?i.pa:null,i.Y),a.K){ya(i.i,a);var o=a,c=i.L;c&&o.setTimeout(c),o.B&&(qr(o),Lr(o)),i.g=a}else Ya(i);0<n.j.length&&Wa(n)}else"stop"!=l[0]&&"close"!=l[0]||ro(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?ro(n,7):Ha(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}ur()}catch(e){}}function Vr(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ri(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(Ri(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}(e),i=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(Ri(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),s=i.length,r=0;r<s;r++)t.call(void 0,i[r],n&&n[r],e)}(Si=Ir.prototype).setTimeout=function(e){this.P=e},Si.nb=function(e){e=e.target;const t=this.M;t&&3==ja(e)?t.l():this.Pa(e)},Si.Pa=function(e){try{if(e==this.g)e:{const u=ja(this.g);var t=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||ns||this.g&&(this.h.h||this.g.ja()||Fa(this.g)))){this.J||4!=u||7==t||ur(),qr(this);var n=this.g.da();this.ca=n;t:if(xr(this)){var i=Fa(this.g);e="";var s=i.length,r=4==ja(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){jr(this),Ur(this);var a="";break t}this.h.i=new Di.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:r&&t==s-1});i.splice(0,s),this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=200==n,function(e,t,n,i,s,r,a){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+r+" "+a}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var o,c=this.g;if((o=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$i(o)){var l=o;break t}}l=null}if(!(n=l)){this.i=!1,this.o=3,dr(12),jr(this),Ur(this);break e}rr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fr(this,n)}this.S?(Pr(this,u,a),ns&&this.i&&3==u&&(nr(this.U,this.V,"tick",this.mb),this.V.start())):(rr(this.j,this.m,a,null),Fr(this,a)),4==u&&jr(this),this.i&&!this.J&&(4==u?io(this.l,this):(this.i=!1,Lr(this)))}else(function(e){const t={};e=(e.g&&2<=ja(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if($i(e[i]))continue;var n=zs(e[i]);const s=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const r=t[s]||[];t[s]=r,r.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.o=3,dr(12)):(this.o=0,dr(13)),jr(this),Ur(this)}}}catch(e){}},Si.mb=function(){if(this.g){var e=ja(this.g),t=this.g.ja();this.C<t.length&&(qr(this),Pr(this,e,t),this.i&&4!=e&&Lr(this))}},Si.cancel=function(){this.J=!0,jr(this)},Si.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(ur(),dr(17)),jr(this),this.o=2,Ur(this)):Mr(this,this.Y-e)};var zr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Br(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Br){this.h=e.h,Hr(this,e.j),this.s=e.s,this.g=e.g,$r(this,e.m),this.l=e.l;var t=e.i,n=new sa;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Kr(this,n),this.o=e.o}else e&&(t=String(e).match(zr))?(this.h=!1,Hr(this,t[1]||"",!0),this.s=Jr(t[2]||""),this.g=Jr(t[3]||"",!0),$r(this,t[4]),this.l=Jr(t[5]||"",!0),Kr(this,t[6]||"",!0),this.o=Jr(t[7]||"")):(this.h=!1,this.i=new sa(null,this.h))}function Gr(e){return new Br(e)}function Hr(e,t,n){e.j=n?Jr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function $r(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Kr(e,t,n){t instanceof sa?(e.i=t,function(e,t){t&&!e.j&&(ra(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(aa(this,t),ca(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Xr(t,na)),e.i=new sa(t,e.h))}function Wr(e,t,n){e.i.set(t,n)}function Qr(e){return Wr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Jr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Xr(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Yr),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Yr(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Br.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Xr(t,Zr,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Xr(t,Zr,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Xr(n,"/"==n.charAt(0)?ta:ea,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Xr(n,ia)),e.join("")};var Zr=/[#\/\?@]/g,ea=/[#\?:]/g,ta=/[#\?]/g,na=/[#\?@]/g,ia=/#/g;function sa(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ra(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),s=null;if(0<=i){var r=e[n].substring(0,i);s=e[n].substring(i+1)}else r=e[n];t(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function aa(e,t){ra(e),t=la(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function oa(e,t){return ra(e),t=la(e,t),e.g.has(t)}function ca(e,t,n){aa(e,t),0<n.length&&(e.i=null,e.g.set(la(e,t),zi(n)),e.h+=n.length)}function la(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Si=sa.prototype).add=function(e,t){ra(this),this.i=null,e=la(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Si.forEach=function(e,t){ra(this),this.g.forEach((function(n,i){n.forEach((function(n){e.call(t,n,i,this)}),this)}),this)},Si.ta=function(){ra(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const s=e[i];for(let e=0;e<s.length;e++)n.push(t[i])}return n},Si.Z=function(e){ra(this);let t=[];if("string"==typeof e)oa(this,e)&&(t=t.concat(this.g.get(la(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Si.set=function(e,t){return ra(this),this.i=null,oa(this,e=la(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Si.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Si.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const r=encodeURIComponent(String(i)),a=this.Z(i);for(i=0;i<a.length;i++){var s=r;""!==a[i]&&(s+="="+encodeURIComponent(String(a[i]))),e.push(s)}}return this.i=e.join("&")};var ua=class{constructor(e,t){this.g=e,this.map=t}};function ha(e){this.l=e||da,e=Di.PerformanceNavigationTiming?0<(e=Di.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Di.g&&Di.g.Ka&&Di.g.Ka()&&Di.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var da=10;function pa(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ma(e){return e.h?1:e.g?e.g.size:0}function fa(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ga(e,t){e.g?e.g.add(t):e.h=t}function ya(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function va(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return zi(e.i)}ha.prototype.cancel=function(){if(this.i=va(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var wa=class{stringify(e){return Di.JSON.stringify(e,void 0)}parse(e){return Di.JSON.parse(e,void 0)}};function ba(){this.g=new wa}function Ea(e,t,n){const i=n||"";try{Vr(e,(function(e,n){let s=e;xi(e)&&(s=Us(e)),t.push(i+n+"="+encodeURIComponent(s))}))}catch(e){throw t.push(i+"type="+encodeURIComponent("_badmap")),e}}function _a(e,t,n,i,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(i)}catch(e){}}function Ca(e){this.l=e.ec||null,this.j=e.ob||!1}function Ta(e,t){Ls.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ia,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ji(Ca,yr),Ca.prototype.g=function(){return new Ta(this.l,this.j)},Ca.prototype.i=function(e){return function(){return e}}({}),ji(Ta,Ls);var Ia=0;function Sa(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Aa(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ka(e)}function ka(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Si=Ta.prototype).open=function(e,t){if(this.readyState!=Ia)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ka(this)},Si.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Di).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Si.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Aa(this)),this.readyState=Ia},Si.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ka(this)),this.g&&(this.readyState=3,ka(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Di.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Sa(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Si.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Aa(this):ka(this),3==this.readyState&&Sa(this)}},Si.Za=function(e){this.g&&(this.response=this.responseText=e,Aa(this))},Si.Ya=function(e){this.g&&(this.response=e,Aa(this))},Si.ka=function(){this.g&&Aa(this)},Si.setRequestHeader=function(e,t){this.v.append(e,t)},Si.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Si.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ta.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Na=Di.JSON.parse;function Da(e){Ls.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ra,this.L=this.M=!1}ji(Da,Ls);var Ra="",xa=/^https?$/i,Pa=["POST","PUT"];function Oa(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,La(e),qa(e)}function La(e){e.F||(e.F=!0,Ms(e,"complete"),Ms(e,"error"))}function Ma(e){if(e.h&&void 0!==Ni&&(!e.C[1]||4!=ja(e)||2!=e.da()))if(e.v&&4==ja(e))Xs(e.La,0,e);else if(Ms(e,"readystatechange"),4==ja(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===a){var s=String(e.I).match(zr)[1]||null;!s&&Di.self&&Di.self.location&&(s=Di.self.location.protocol.slice(0,-1)),i=!xa.test(s?s.toLowerCase():"")}n=i}if(n)Ms(e,"complete"),Ms(e,"success");else{e.m=6;try{var r=2<ja(e)?e.g.statusText:""}catch(e){r=""}e.j=r+" ["+e.da()+"]",La(e)}}finally{qa(e)}}}function qa(e,t){if(e.g){Ua(e);const n=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ms(e,"ready");try{n.onreadystatechange=i}catch(e){}}}function Ua(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Di.clearTimeout(e.A),e.A=null)}function ja(e){return e.g?e.g.readyState:0}function Fa(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ra:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Va(e){let t="";return gs(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function za(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Va(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Wr(e,t,n))}function Ba(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ga(e){this.Ga=0,this.j=[],this.l=new sr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ba("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ba("baseRetryDelayMs",5e3,e),this.hb=Ba("retryDelaySeedMs",1e4,e),this.eb=Ba("forwardChannelMaxRetries",2,e),this.xa=Ba("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ha(e&&e.concurrentRequestLimit),this.Ja=new ba,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ha(e){if(Ka(e),3==e.H){var t=e.W++,n=Gr(e.I);if(Wr(n,"SID",e.K),Wr(n,"RID",t),Wr(n,"TYPE","terminate"),Ja(e,n),(t=new Ir(e,e.l,t)).L=2,t.v=Qr(Gr(n)),n=!1,Di.navigator&&Di.navigator.sendBeacon)try{n=Di.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!n&&Di.Image&&((new Image).src=t.v,n=!0),n||(t.g=co(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Lr(t)}ao(e)}function $a(e){e.g&&(eo(e),e.g.cancel(),e.g=null)}function Ka(e){$a(e),e.u&&(Di.clearTimeout(e.u),e.u=null),no(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Di.clearTimeout(e.m),e.m=null)}function Wa(e){if(!pa(e.i)&&!e.m){e.m=!0;var t=e.Na;Gs||Ks(),Hs||(Gs(),Hs=!0),$s.add(t,e),e.C=0}}function Qa(e,t){var n;n=t?t.m:e.W++;const i=Gr(e.I);Wr(i,"SID",e.K),Wr(i,"RID",n),Wr(i,"AID",e.V),Ja(e,i),e.o&&e.s&&za(i,e.o,e.s),n=new Ir(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Xa(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ga(e.i,n),Dr(n,i,t)}function Ja(e,t){e.na&&gs(e.na,(function(e,n){Wr(t,n,e)})),e.h&&Vr({},(function(e,n){Wr(t,n,e)}))}function Xa(e,t,n){n=Math.min(e.j.length,n);var i=e.h?qi(e.h.Va,e.h,e):null;e:{var s=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let r=!0;for(let a=0;a<n;a++){let n=s[a].g;const o=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),r=!1;else try{Ea(o,e,"req"+n+"_")}catch(e){i&&i(o)}}if(r){i=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,i}function Ya(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Gs||Ks(),Hs||(Gs(),Hs=!0),$s.add(t,e),e.A=0}}function Za(e){return!(e.g||e.u||3<=e.A||(e.ba++,e.u=mr(qi(e.Ma,e),so(e,e.A)),e.A++,0))}function eo(e){null!=e.B&&(Di.clearTimeout(e.B),e.B=null)}function to(e){e.g=new Ir(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Gr(e.wa);Wr(t,"RID","rpc"),Wr(t,"SID",e.K),Wr(t,"AID",e.V),Wr(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Wr(t,"TO",e.qa),Wr(t,"TYPE","xmlhttp"),Ja(e,t),e.o&&e.s&&za(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Qr(Gr(t)),n.s=null,n.S=!0,Rr(n,e)}function no(e){null!=e.v&&(Di.clearTimeout(e.v),e.v=null)}function io(e,t){var n=null;if(e.g==t){no(e),eo(e),e.g=null;var i=2}else{if(!fa(e.i,t))return;n=t.F,ya(e.i,t),i=1}if(0!=e.H)if(t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.G;var s=e.C;Ms(i=cr(),new pr(i,n)),Wa(e)}else Ya(e);else if(3==(s=t.o)||0==s&&0<t.ca||!(1==i&&function(e,t){return!(ma(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=mr(qi(e.Na,e,t),so(e,e.C)),e.C++,0)))}(e,t)||2==i&&Za(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:ro(e,5);break;case 4:ro(e,10);break;case 3:ro(e,6);break;default:ro(e,2)}}function so(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ro(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var i=qi(e.pb,e);n||(n=new Br("//www.google.com/images/cleardot.gif"),Di.location&&"http"==Di.location.protocol||Hr(n,"https"),Qr(n)),function(e,t){const n=new sr;if(Di.Image){const i=new Image;i.onload=Ui(_a,n,i,"TestLoadImage: loaded",!0,t),i.onerror=Ui(_a,n,i,"TestLoadImage: error",!1,t),i.onabort=Ui(_a,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=Ui(_a,n,i,"TestLoadImage: timeout",!1,t),Di.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(n.toString(),i)}else dr(2);e.H=0,e.h&&e.h.za(t),ao(e),Ka(e)}function ao(e){if(e.H=0,e.ma=[],e.h){const t=va(e.i);0==t.length&&0==e.j.length||(Bi(e.ma,t),Bi(e.ma,e.j),e.i.i.length=0,zi(e.j),e.j.length=0),e.h.ya()}}function oo(e,t,n){var i=n instanceof Br?Gr(n):new Br(n);if(""!=i.g)t&&(i.g=t+"."+i.g),$r(i,i.m);else{var s=Di.location;i=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var r=new Br(null);i&&Hr(r,i),t&&(r.g=t),s&&$r(r,s),n&&(r.l=n),i=r}return n=e.F,t=e.Da,n&&t&&Wr(i,n,t),Wr(i,"VER",e.ra),Ja(e,i),i}function co(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Da(new Ca({ob:!0})):new Da(e.va)).Oa(e.J),t}function lo(){}function uo(){if(es&&!(10<=Number(ls)))throw Error("Environmental error: no available transport.")}function ho(e,t){Ls.call(this),this.g=new Ga(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!$i(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!$i(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new fo(this)}function po(e){_r.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function mo(){Cr.call(this),this.status=1}function fo(e){this.g=e}function go(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function yo(e,t,n){n||(n=0);var i=Array(16);if("string"==typeof t)for(var s=0;16>s;++s)i[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)i[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var r=e.g[3],a=t+(r^n&(s^r))+i[0]+3614090360&4294967295;a=(n=(s=(r=(t=(n=(s=(r=(t=(n=(s=(r=(t=(n=(s=(r=(t=(n=(s=(r=(t=(n=(s=(r=(t=(n=(s=(r=(t=(n=(s=(r=(t=(n=(s=(r=(t=(n=(s=(r=(t=(n=(s=(r=(t=(n=(s=(r=(t=(n=(s=(r=(t=(n=(s=(r=(t=(n=(s=(r=(t=n+(a<<7&4294967295|a>>>25))+((a=r+(s^t&(n^s))+i[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^r&(t^n))+i[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(r^t))+i[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(r^n&(s^r))+i[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=r+(s^t&(n^s))+i[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^r&(t^n))+i[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(r^t))+i[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(r^n&(s^r))+i[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=r+(s^t&(n^s))+i[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^r&(t^n))+i[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(r^t))+i[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(r^n&(s^r))+i[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=r+(s^t&(n^s))+i[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^r&(t^n))+i[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(r^t))+i[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^r&(n^s))+i[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=r+(n^s&(t^n))+i[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(r^t))+i[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(r^t&(s^r))+i[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^r&(n^s))+i[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=r+(n^s&(t^n))+i[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(r^t))+i[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(r^t&(s^r))+i[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^r&(n^s))+i[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=r+(n^s&(t^n))+i[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(r^t))+i[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(r^t&(s^r))+i[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^r&(n^s))+i[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=r+(n^s&(t^n))+i[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(r^t))+i[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(r^t&(s^r))+i[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^r)+i[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=r+(t^n^s)+i[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(r^t^n)+i[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^r^t)+i[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^r)+i[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=r+(t^n^s)+i[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(r^t^n)+i[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^r^t)+i[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^r)+i[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=r+(t^n^s)+i[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(r^t^n)+i[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^r^t)+i[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^r)+i[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=r+(t^n^s)+i[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(r^t^n)+i[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^r^t)+i[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~r))+i[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=r+(n^(t|~s))+i[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(r|~n))+i[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(r^(s|~t))+i[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~r))+i[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=r+(n^(t|~s))+i[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(r|~n))+i[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(r^(s|~t))+i[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~r))+i[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=r+(n^(t|~s))+i[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(r|~n))+i[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(r^(s|~t))+i[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((r=(t=n+((a=t+(s^(n|~r))+i[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=r+(n^(t|~s))+i[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=r+((a=s+(t^(r|~n))+i[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+r&4294967295}function vo(e,t){this.h=t;for(var n=[],i=!0,s=e.length-1;0<=s;s--){var r=0|e[s];i&&r==t||(n[s]=r,i=!1)}this.g=n}(Si=Da.prototype).Oa=function(e){this.M=e},Si.ha=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():br.g(),this.C=this.u?vr(this.u):vr(br),this.g.onreadystatechange=qi(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(e){return void Oa(this,e)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=Di.FormData&&e instanceof Di.FormData,!(0<=Vi(Pa,t))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ua(this),0<this.B&&((this.L=function(e){return es&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=qi(this.ua,this)):this.A=Xs(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){Oa(this,e)}},Si.ua=function(){void 0!==Ni&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ms(this,"timeout"),this.abort(8))},Si.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ms(this,"complete"),Ms(this,"abort"),qa(this))},Si.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qa(this,!0)),Da.$.N.call(this)},Si.La=function(){this.s||(this.G||this.v||this.l?Ma(this):this.kb())},Si.kb=function(){Ma(this)},Si.isActive=function(){return!!this.g},Si.da=function(){try{return 2<ja(this)?this.g.status:-1}catch(e){return-1}},Si.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},Si.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Na(t)}},Si.Ia=function(){return this.m},Si.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Si=Ga.prototype).ra=8,Si.H=1,Si.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new Ir(this,this.l,e);let r=this.s;if(this.U&&(r?(r=ys(r),ws(r,this.U)):r=this.U),null!==this.o||this.O||(s.I=r,r=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Xa(this,s,t),Wr(n=Gr(this.I),"RID",e),Wr(n,"CVER",22),this.F&&Wr(n,"X-HTTP-Session-Id",this.F),Ja(this,n),r&&(this.O?t="headers="+encodeURIComponent(String(Va(r)))+"&"+t:this.o&&za(n,this.o,r)),ga(this.i,s),this.bb&&Wr(n,"TYPE","init"),this.P?(Wr(n,"$req",t),Wr(n,"SID","null"),s.aa=!0,Dr(s,n,null)):Dr(s,n,t),this.H=2}}else 3==this.H&&(e?Qa(this,e):0==this.j.length||pa(this.i)||Qa(this))},Si.Ma=function(){if(this.u=null,to(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=mr(qi(this.jb,this),e)}},Si.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,dr(10),$a(this),to(this))},Si.ib=function(){null!=this.v&&(this.v=null,$a(this),Za(this),dr(19))},Si.pb=function(e){e?(this.l.info("Successfully pinged google.com"),dr(2)):(this.l.info("Failed to ping google.com"),dr(1))},Si.isActive=function(){return!!this.h&&this.h.isActive(this)},(Si=lo.prototype).Ba=function(){},Si.Aa=function(){},Si.za=function(){},Si.ya=function(){},Si.isActive=function(){return!0},Si.Va=function(){},uo.prototype.g=function(e,t){return new ho(e,t)},ji(ho,Ls),ho.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;dr(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=oo(e,null,e.Y),Wa(e)},ho.prototype.close=function(){Ha(this.g)},ho.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Us(e),e=n);t.j.push(new ua(t.fb++,e)),3==t.H&&Wa(t)},ho.prototype.N=function(){this.g.h=null,delete this.j,Ha(this.g),delete this.g,ho.$.N.call(this)},ji(po,_r),ji(mo,Cr),ji(fo,lo),fo.prototype.Ba=function(){Ms(this.g,"a")},fo.prototype.Aa=function(e){Ms(this.g,new po(e))},fo.prototype.za=function(e){Ms(this.g,new mo)},fo.prototype.ya=function(){Ms(this.g,"b")},ji(go,(function(){this.blockSize=-1})),go.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},go.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=this.m,s=this.h,r=0;r<t;){if(0==s)for(;r<=n;)yo(this,e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s++]=e.charCodeAt(r++),s==this.blockSize){yo(this,i),s=0;break}}else for(;r<t;)if(i[s++]=e[r++],s==this.blockSize){yo(this,i),s=0;break}}this.h=s,this.i+=t},go.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var wo={};function bo(e){return-128<=e&&128>e?function(e,t){var n=wo;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=function(e){return new vo([0|e],0>e?-1:0)}(e)}(e):new vo([0|e],0>e?-1:0)}function Eo(e){if(isNaN(e)||!isFinite(e))return Co;if(0>e)return ko(Eo(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=_o;return new vo(t,0)}var _o=4294967296,Co=bo(0),To=bo(1),Io=bo(16777216);function So(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Ao(e){return-1==e.h}function ko(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new vo(n,~e.h).add(To)}function No(e,t){return e.add(ko(t))}function Do(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Ro(e,t){this.g=e,this.h=t}function xo(e,t){if(So(t))throw Error("division by zero");if(So(e))return new Ro(Co,Co);if(Ao(e))return t=xo(ko(e),t),new Ro(ko(t.g),ko(t.h));if(Ao(t))return t=xo(e,ko(t)),new Ro(ko(t.g),t.h);if(30<e.g.length){if(Ao(e)||Ao(t))throw Error("slowDivide_ only works with positive integers.");for(var n=To,i=t;0>=i.X(e);)n=Po(n),i=Po(i);var s=Oo(n,1),r=Oo(i,1);for(i=Oo(i,2),n=Oo(n,2);!So(i);){var a=r.add(i);0>=a.X(e)&&(s=s.add(n),r=a),i=Oo(i,1),n=Oo(n,1)}return t=No(e,s.R(t)),new Ro(s,t)}for(s=Co;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),a=(r=Eo(n)).R(t);Ao(a)||0<a.X(e);)a=(r=Eo(n-=i)).R(t);So(r)&&(r=To),s=s.add(r),e=No(e,a)}return new Ro(s,e)}function Po(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.D(i)<<1|e.D(i-1)>>>31;return new vo(n,e.h)}function Oo(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],r=0;r<i;r++)s[r]=0<t?e.D(r+n)>>>t|e.D(r+n+1)<<32-t:e.D(r+n);return new vo(s,e.h)}(Si=vo.prototype).ea=function(){if(Ao(this))return-ko(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.D(n);e+=(0<=i?i:_o+i)*t,t*=_o}return e},Si.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(So(this))return"0";if(Ao(this))return"-"+ko(this).toString(e);for(var t=Eo(Math.pow(e,6)),n=this,i="";;){var s=xo(n,t).g,r=((0<(n=No(n,s.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(So(n=s))return r+i;for(;6>r.length;)r="0"+r;i=r+i}},Si.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Si.X=function(e){return Ao(e=No(this,e))?-1:So(e)?0:1},Si.abs=function(){return Ao(this)?ko(this):this},Si.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var r=i+(65535&this.D(s))+(65535&e.D(s)),a=(r>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);i=a>>>16,r&=65535,a&=65535,n[s]=a<<16|r}return new vo(n,-2147483648&n[n.length-1]?-1:0)},Si.R=function(e){if(So(this)||So(e))return Co;if(Ao(this))return Ao(e)?ko(this).R(ko(e)):ko(ko(this).R(e));if(Ao(e))return ko(this.R(ko(e)));if(0>this.X(Io)&&0>e.X(Io))return Eo(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var r=this.D(i)>>>16,a=65535&this.D(i),o=e.D(s)>>>16,c=65535&e.D(s);n[2*i+2*s]+=a*c,Do(n,2*i+2*s),n[2*i+2*s+1]+=r*c,Do(n,2*i+2*s+1),n[2*i+2*s+1]+=a*o,Do(n,2*i+2*s+1),n[2*i+2*s+2]+=r*o,Do(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new vo(n,0)},Si.gb=function(e){return xo(this,e).h},Si.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)&e.D(i);return new vo(n,this.h&e.h)},Si.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)|e.D(i);return new vo(n,this.h|e.h)},Si.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)^e.D(i);return new vo(n,this.h^e.h)},uo.prototype.createWebChannel=uo.prototype.g,ho.prototype.send=ho.prototype.u,ho.prototype.open=ho.prototype.m,ho.prototype.close=ho.prototype.close,fr.NO_ERROR=0,fr.TIMEOUT=8,fr.HTTP_ERROR=6,gr.COMPLETE="complete",wr.EventType=Er,Er.OPEN="a",Er.CLOSE="b",Er.ERROR="c",Er.MESSAGE="d",Ls.prototype.listen=Ls.prototype.O,Da.prototype.listenOnce=Da.prototype.P,Da.prototype.getLastError=Da.prototype.Sa,Da.prototype.getLastErrorCode=Da.prototype.Ia,Da.prototype.getStatus=Da.prototype.da,Da.prototype.getResponseJson=Da.prototype.Wa,Da.prototype.getResponseText=Da.prototype.ja,Da.prototype.send=Da.prototype.ha,Da.prototype.setWithCredentials=Da.prototype.Oa,go.prototype.digest=go.prototype.l,go.prototype.reset=go.prototype.reset,go.prototype.update=go.prototype.j,vo.prototype.add=vo.prototype.add,vo.prototype.multiply=vo.prototype.R,vo.prototype.modulo=vo.prototype.gb,vo.prototype.compare=vo.prototype.X,vo.prototype.toNumber=vo.prototype.ea,vo.prototype.toString=vo.prototype.toString,vo.prototype.getBits=vo.prototype.D,vo.fromNumber=Eo,vo.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ko(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=Eo(Math.pow(n,8)),s=Co,r=0;r<t.length;r+=8){var a=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+a),n);8>a?(a=Eo(Math.pow(n,a)),s=s.R(a).add(Eo(o))):s=(s=s.R(i)).add(Eo(o))}return s};var Lo=ki.createWebChannelTransport=function(){return new uo},Mo=ki.getStatEventTarget=function(){return cr()},qo=ki.ErrorCode=fr,Uo=ki.EventType=gr,jo=ki.Event=ar,Fo=ki.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Vo=ki.FetchXmlHttpFactory=Ca,zo=ki.WebChannel=wr,Bo=ki.XhrIo=Da,Go=ki.Md5=go,Ho=ki.Integer=vo;const $o="@firebase/firestore";class Ko{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ko.UNAUTHENTICATED=new Ko(null),Ko.GOOGLE_CREDENTIALS=new Ko("google-credentials-uid"),Ko.FIRST_PARTY=new Ko("first-party-uid"),Ko.MOCK_USER=new Ko("mock-user");let Wo="10.5.2";const Qo=new O("@firebase/firestore");function Jo(){return Qo.logLevel}function Xo(e,...t){if(Qo.logLevel<=k.DEBUG){const n=t.map(ec);Qo.debug(`Firestore (${Wo}): ${e}`,...n)}}function Yo(e,...t){if(Qo.logLevel<=k.ERROR){const n=t.map(ec);Qo.error(`Firestore (${Wo}): ${e}`,...n)}}function Zo(e,...t){if(Qo.logLevel<=k.WARN){const n=t.map(ec);Qo.warn(`Firestore (${Wo}): ${e}`,...n)}}function ec(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function tc(e="Unexpected state"){const t=`FIRESTORE (${Wo}) INTERNAL ASSERTION FAILED: `+e;throw Yo(t),new Error(t)}function nc(e,t){e||tc()}function ic(e,t){return e}const sc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class rc extends d{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ac{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class oc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ko.UNAUTHENTICATED)))}shutdown(){}}class lc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class uc{constructor(e){this.t=e,this.currentUser=Ko.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new ac;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ac,e.enqueueRetryable((()=>i(this.currentUser)))};const r=()=>{const t=s;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},a=e=>{Xo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),r()};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Xo("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ac)}}),0),r()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Xo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(nc("string"==typeof t.accessToken),new oc(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return nc(null===e||"string"==typeof e),new Ko(e)}}class hc{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ko.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class dc{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new hc(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ko.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class pc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mc{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Xo("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Xo("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{Xo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?i(e):Xo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(nc("string"==typeof e.token),this.R=e.token,new pc(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function fc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class gc{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=fc(40);for(let i=0;i<n.length;++i)t.length<20&&n[i]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return t}}function yc(e,t){return e<t?-1:e>t?1:0}function vc(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}class wc{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new rc(sc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new rc(sc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new rc(sc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new rc(sc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wc.fromMillis(Date.now())}static fromDate(e){return wc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new wc(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?yc(this.nanoseconds,e.nanoseconds):yc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bc{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bc(e)}static min(){return new bc(new wc(0,0))}static max(){return new bc(new wc(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ec{constructor(e,t,n){void 0===t?t=0:t>e.length&&tc(),void 0===n?n=e.length-t:n>e.length-t&&tc(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ec.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ec?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),s=t.get(i);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _c extends Ec{construct(e,t,n){return new _c(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new rc(sc.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new _c(t)}static emptyPath(){return new _c([])}}const Cc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tc extends Ec{construct(e,t,n){return new Tc(e,t,n)}static isValidIdentifier(e){return Cc.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tc.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Tc(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(0===n.length)throw new rc(sc.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let r=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new rc(sc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new rc(sc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(r=!r,i++):"."!==t||r?(n+=t,i++):(s(),i++)}if(s(),r)throw new rc(sc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tc(t)}static emptyPath(){return new Tc([])}}class Ic{constructor(e){this.path=e}static fromPath(e){return new Ic(_c.fromString(e))}static fromName(e){return new Ic(_c.fromString(e).popFirst(5))}static empty(){return new Ic(_c.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_c.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _c.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ic(new _c(e.slice()))}}function Sc(e){return new Ac(e.readTime,e.key,-1)}class Ac{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ac(bc.min(),Ic.empty(),-1)}static max(){return new Ac(bc.max(),Ic.empty(),-1)}}function kc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ic.comparator(e.documentKey,t.documentKey),0!==n?n:yc(e.largestBatchId,t.largestBatchId))}const Nc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Rc(e){if(e.code!==sc.FAILED_PRECONDITION||e.message!==Nc)throw e;Xo("LocalStore","Unexpectedly lost primary lease")}class xc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xc(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof xc?t:xc.resolve(t)}catch(e){return xc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):xc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):xc.reject(t)}static resolve(e){return new xc(((t,n)=>{t(e)}))}static reject(e){return new xc(((t,n)=>{n(e)}))}static waitFor(e){return new xc(((t,n)=>{let i=0,s=0,r=!1;e.forEach((e=>{++i,e.next((()=>{++s,r&&s===i&&t()}),(e=>n(e)))})),r=!0,s===i&&t()}))}static or(e){let t=xc.resolve(!1);for(const n of e)t=t.next((e=>e?xc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}static mapArray(e,t){return new xc(((n,i)=>{const s=e.length,r=new Array(s);let a=0;for(let o=0;o<s;o++){const c=o;t(e[c]).next((e=>{r[c]=e,++a,a===s&&n(r)}),(e=>i(e)))}}))}static doWhile(e,t){return new xc(((n,i)=>{const s=()=>{!0===e()?t().next((()=>{s()}),i):n()};s()}))}}function Pc(e){return"IndexedDbTransactionError"===e.name}class Oc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Lc(e){return null==e}function Mc(e){return 0===e&&1/e==-1/0}Oc._e=-1;function qc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Uc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function jc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Fc{constructor(e,t){this.comparator=e,this.root=t||zc.EMPTY}insert(e,t){return new Fc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zc.BLACK,null,null))}remove(e){return new Fc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vc(this.root,e,this.comparator,!0)}}class Vc{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zc{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=null!=n?n:zc.RED,this.left=null!=i?i:zc.EMPTY,this.right=null!=s?s:zc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new zc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return zc.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tc();if(this.right.isRed())throw tc();const e=this.left.check();if(e!==this.right.check())throw tc();return e+(this.isRed()?0:1)}}zc.EMPTY=null,zc.RED=!0,zc.BLACK=!1,zc.EMPTY=new class{constructor(){this.size=0}get key(){throw tc()}get value(){throw tc()}get color(){throw tc()}get left(){throw tc()}get right(){throw tc()}copy(e,t,n,i,s){return this}insert(e,t,n){return new zc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bc{constructor(e){this.comparator=e,this.data=new Fc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gc(this.data.getIterator())}getIteratorFrom(e){return new Gc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Bc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bc(this.comparator);return t.data=e,t}}class Gc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Hc{constructor(e){this.fields=e,e.sort(Tc.comparator)}static empty(){return new Hc([])}unionWith(e){let t=new Bc(Tc.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new Hc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class $c extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Kc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new $c("Invalid base64 string: "+e):e}}(e);return new Kc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Kc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kc.EMPTY_BYTE_STRING=new Kc("");const Wc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qc(e){if(nc(!!e),"string"==typeof e){let t=0;const n=Wc.exec(e);if(nc(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Jc(e.seconds),nanos:Jc(e.nanos)}}function Jc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Xc(e){return"string"==typeof e?Kc.fromBase64String(e):Kc.fromUint8Array(e)}function Yc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zc(e){const t=e.mapValue.fields.__previous_value__;return Yc(t)?Zc(t):t}function el(e){const t=Qc(e.mapValue.fields.__local_write_time__.timestampValue);return new wc(t.seconds,t.nanos)}class tl{constructor(e,t,n,i,s,r,a,o,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=r,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=c}}class nl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nl&&e.projectId===this.projectId&&e.database===this.database}}const il={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function sl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Yc(e)?4:yl(e)?9007199254740991:10:tc()}function rl(e,t){if(e===t)return!0;const n=sl(e);if(n!==sl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return el(e).isEqual(el(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Qc(e.timestampValue),i=Qc(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Xc(e.bytesValue).isEqual(Xc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Jc(e.geoPointValue.latitude)===Jc(t.geoPointValue.latitude)&&Jc(e.geoPointValue.longitude)===Jc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Jc(e.integerValue)===Jc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Jc(e.doubleValue),i=Jc(t.doubleValue);return n===i?Mc(n)===Mc(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return vc(e.arrayValue.values||[],t.arrayValue.values||[],rl);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(qc(n)!==qc(i))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===i[e]||!rl(n[e],i[e])))return!1;return!0}(e,t);default:return tc()}}function al(e,t){return void 0!==(e.values||[]).find((e=>rl(e,t)))}function ol(e,t){if(e===t)return 0;const n=sl(e),i=sl(t);if(n!==i)return yc(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return yc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Jc(e.integerValue||e.doubleValue),i=Jc(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return cl(e.timestampValue,t.timestampValue);case 4:return cl(el(e),el(t));case 5:return yc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Xc(e),i=Xc(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let e=0;e<n.length&&e<i.length;e++){const t=yc(n[e],i[e]);if(0!==t)return t}return yc(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=yc(Jc(e.latitude),Jc(t.latitude));return 0!==n?n:yc(Jc(e.longitude),Jc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let e=0;e<n.length&&e<i.length;++e){const t=ol(n[e],i[e]);if(t)return t}return yc(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===il.mapValue&&t===il.mapValue)return 0;if(e===il.mapValue)return 1;if(t===il.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),s=t.fields||{},r=Object.keys(s);i.sort(),r.sort();for(let e=0;e<i.length&&e<r.length;++e){const t=yc(i[e],r[e]);if(0!==t)return t;const a=ol(n[i[e]],s[r[e]]);if(0!==a)return a}return yc(i.length,r.length)}(e.mapValue,t.mapValue);default:throw tc()}}function cl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return yc(e,t);const n=Qc(e),i=Qc(t),s=yc(n.seconds,i.seconds);return 0!==s?s:yc(n.nanos,i.nanos)}function ll(e){return ul(e)}function ul(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Qc(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Xc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ic.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=ul(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const s of t)i?i=!1:n+=",",n+=`${s}:${ul(e.fields[s])}`;return n+"}"}(e.mapValue):tc()}function hl(e){return!!e&&"integerValue"in e}function dl(e){return!!e&&"arrayValue"in e}function pl(e){return!!e&&"nullValue"in e}function ml(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function fl(e){return!!e&&"mapValue"in e}function gl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Uc(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=gl(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=gl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function yl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class vl{constructor(e){this.value=e}static empty(){return new vl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!fl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gl(t)}setAll(e){let t=Tc.emptyPath(),n={},i=[];e.forEach(((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=s.popLast()}e?n[s.lastSegment()]=gl(e):i.push(s.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());fl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];fl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Uc(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new vl(gl(this.value))}}function wl(e){const t=[];return Uc(e.fields,((e,n)=>{const i=new Tc([e]);if(fl(n)){const e=wl(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new Hc(t)}class bl{constructor(e,t,n,i,s,r,a){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=s,this.data=r,this.documentState=a}static newInvalidDocument(e){return new bl(e,0,bc.min(),bc.min(),bc.min(),vl.empty(),0)}static newFoundDocument(e,t,n,i){return new bl(e,1,t,bc.min(),n,i,0)}static newNoDocument(e,t){return new bl(e,2,t,bc.min(),bc.min(),vl.empty(),0)}static newUnknownDocument(e,t){return new bl(e,3,t,bc.min(),bc.min(),vl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(bc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bc.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class El{constructor(e,t){this.position=e,this.inclusive=t}}function _l(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],a=e.position[s];if(i=r.field.isKeyField()?Ic.comparator(Ic.fromName(a.referenceValue),n.key):ol(a,n.data.field(r.field)),"desc"===r.dir&&(i*=-1),0!==i)break}return i}function Cl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!rl(e.position[n],t.position[n]))return!1;return!0}class Tl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Il(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Sl{}class Al extends Sl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ol(e,t,n):"array-contains"===t?new Ul(e,n):"in"===t?new jl(e,n):"not-in"===t?new Fl(e,n):"array-contains-any"===t?new Vl(e,n):new Al(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ll(e,n):new Ml(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ol(t,this.value)):null!==t&&sl(this.value)===sl(t)&&this.matchesComparison(ol(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tc()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kl extends Sl{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new kl(e,t)}matches(e){return Nl(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Nl(e){return"and"===e.op}function Dl(e){return function(e){for(const t of e.filters)if(t instanceof kl)return!1;return!0}(e)&&Nl(e)}function Rl(e){if(e instanceof Al)return e.field.canonicalString()+e.op.toString()+ll(e.value);if(Dl(e))return e.filters.map((e=>Rl(e))).join(",");{const t=e.filters.map((e=>Rl(e))).join(",");return`${e.op}(${t})`}}function xl(e,t){return e instanceof Al?function(e,t){return t instanceof Al&&e.op===t.op&&e.field.isEqual(t.field)&&rl(e.value,t.value)}(e,t):e instanceof kl?function(e,t){return t instanceof kl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,i)=>e&&xl(n,t.filters[i])),!0)}(e,t):void tc()}function Pl(e){return e instanceof Al?function(e){return`${e.field.canonicalString()} ${e.op} ${ll(e.value)}`}(e):e instanceof kl?function(e){return e.op.toString()+" {"+e.getFilters().map(Pl).join(" ,")+"}"}(e):"Filter"}class Ol extends Al{constructor(e,t,n){super(e,t,n),this.key=Ic.fromName(n.referenceValue)}matches(e){const t=Ic.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ll extends Al{constructor(e,t){super(e,"in",t),this.keys=ql(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ml extends Al{constructor(e,t){super(e,"not-in",t),this.keys=ql(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ql(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ic.fromName(e.referenceValue)))}class Ul extends Al{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dl(t)&&al(t.arrayValue,this.value)}}class jl extends Al{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&al(this.value.arrayValue,t)}}class Fl extends Al{constructor(e,t){super(e,"not-in",t)}matches(e){if(al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!al(this.value.arrayValue,t)}}class Vl extends Al{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>al(this.value.arrayValue,e)))}}class zl{constructor(e,t=null,n=[],i=[],s=null,r=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=r,this.endAt=a,this.ce=null}}function Bl(e,t=null,n=[],i=[],s=null,r=null,a=null){return new zl(e,t,n,i,s,r,a)}function Gl(e){const t=ic(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Rl(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Lc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>ll(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>ll(e))).join(",")),t.ce=e}return t.ce}function Hl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Il(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!xl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Cl(e.startAt,t.startAt)&&Cl(e.endAt,t.endAt)}function $l(e){return Ic.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Kl{constructor(e,t=null,n=[],i=[],s=null,r="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=r,this.startAt=a,this.endAt=o,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Wl(e){return new Kl(e)}function Ql(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Jl(e){const t=ic(e);if(null===t.le){t.le=[];const e=new Set;for(const n of t.explicitOrderBy)t.le.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",i=function(e){let t=new Bc(Tc.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);i.forEach((i=>{e.has(i.canonicalString())||i.isKeyField()||t.le.push(new Tl(i,n))})),e.has(Tc.keyField().canonicalString())||t.le.push(new Tl(Tc.keyField(),n))}return t.le}function Xl(e){const t=ic(e);return t.he||(t.he=function(e,t){if("F"===e.limitType)return Bl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Tl(e.field,t)}));const n=e.endAt?new El(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new El(e.startAt.position,e.startAt.inclusive):null;return Bl(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}(t,Jl(e))),t.he}function Yl(e,t,n){return new Kl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Zl(e,t){return Hl(Xl(e),Xl(t))&&e.limitType===t.limitType}function eu(e){return`${Gl(Xl(e))}|lt:${e.limitType}`}function tu(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Pl(e))).join(", ")}]`),Lc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>ll(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>ll(e))).join(",")),`Target(${t})`}(Xl(e))}; limitType=${e.limitType})`}function nu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ic.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Jl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=_l(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,Jl(e),t)||e.endAt&&!function(e,t,n){const i=_l(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,Jl(e),t))}(e,t)}function iu(e){return(t,n)=>{let i=!1;for(const s of Jl(e)){const e=su(s,t,n);if(0!==e)return e;i=i||s.field.isKeyField()}return 0}}function su(e,t,n){const i=e.field.isKeyField()?Ic.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),s=n.data.field(e);return null!==i&&null!==s?ol(i,s):tc()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return tc()}}class ru{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,i]of n)if(this.equalsFn(t,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],e))return void(i[n]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Uc(this.inner,((t,n)=>{for(const[t,i]of n)e(t,i)}))}isEmpty(){return jc(this.inner)}size(){return this.innerSize}}const au=new Fc(Ic.comparator);function ou(){return au}const cu=new Fc(Ic.comparator);function lu(...e){let t=cu;for(const n of e)t=t.insert(n.key,n);return t}function uu(e){let t=cu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function hu(){return pu()}function du(){return pu()}function pu(){return new ru((e=>e.toString()),((e,t)=>e.isEqual(t)))}const mu=new Fc(Ic.comparator),fu=new Bc(Ic.comparator);function gu(...e){let t=fu;for(const n of e)t=t.add(n);return t}const yu=new Bc(yc);function vu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mc(t)?"-0":t}}function wu(e){return{integerValue:""+e}}function bu(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Mc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?wu(t):vu(e,t)}class Eu{constructor(){this._=void 0}}function _u(e,t,n){return e instanceof Iu?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Yc(t)&&(t=Zc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Su?Au(e,t):e instanceof ku?Nu(e,t):function(e,t){const n=Tu(e,t),i=Ru(n)+Ru(e.Ie);return hl(n)&&hl(e.Ie)?wu(i):vu(e.serializer,i)}(e,t)}function Cu(e,t,n){return e instanceof Su?Au(e,t):e instanceof ku?Nu(e,t):n}function Tu(e,t){return e instanceof Du?function(e){return hl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Iu extends Eu{}class Su extends Eu{constructor(e){super(),this.elements=e}}function Au(e,t){const n=xu(t);for(const t of e.elements)n.some((e=>rl(e,t)))||n.push(t);return{arrayValue:{values:n}}}class ku extends Eu{constructor(e){super(),this.elements=e}}function Nu(e,t){let n=xu(t);for(const t of e.elements)n=n.filter((e=>!rl(e,t)));return{arrayValue:{values:n}}}class Du extends Eu{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Ru(e){return Jc(e.integerValue||e.doubleValue)}function xu(e){return dl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Pu{constructor(e,t){this.version=e,this.transformResults=t}}class Ou{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ou}static exists(e){return new Ou(void 0,e)}static updateTime(e){return new Ou(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Mu{}function qu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ku(e.key,Ou.none()):new zu(e.key,e.data,Ou.none());{const n=e.data,i=vl.empty();let s=new Bc(Tc.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),s=s.add(e)}return new Bu(e.key,i,new Hc(s.toArray()),Ou.none())}}function Uu(e,t,n){e instanceof zu?function(e,t,n){const i=e.value.clone(),s=Hu(e.fieldTransforms,t,n.transformResults);i.setAll(s),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof Bu?function(e,t,n){if(!Lu(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=Hu(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Gu(e)),s.setAll(i),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ju(e,t,n,i){return e instanceof zu?function(e,t,n,i){if(!Lu(e.precondition,t))return n;const s=e.value.clone(),r=$u(e.fieldTransforms,i,t);return s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,i):e instanceof Bu?function(e,t,n,i){if(!Lu(e.precondition,t))return n;const s=$u(e.fieldTransforms,i,t),r=t.data;return r.setAll(Gu(e)),r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,i):function(e,t,n){return Lu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Fu(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),s=Tu(i.transform,e||null);null!=s&&(null===n&&(n=vl.empty()),n.set(i.field,s))}return n||null}function Vu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&vc(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Su&&t instanceof Su||e instanceof ku&&t instanceof ku?vc(e.elements,t.elements,rl):e instanceof Du&&t instanceof Du?rl(e.Ie,t.Ie):e instanceof Iu&&t instanceof Iu}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class zu extends Mu{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bu extends Mu{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Gu(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function Hu(e,t,n){const i=new Map;nc(e.length===n.length);for(let s=0;s<n.length;s++){const r=e[s],a=r.transform,o=t.data.field(r.field);i.set(r.field,Cu(a,o,n[s]))}return i}function $u(e,t,n){const i=new Map;for(const s of e){const e=s.transform,r=n.data.field(s.field);i.set(s.field,_u(e,r,t))}return i}class Ku extends Mu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wu extends Mu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Qu{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const i=this.mutations[t];i.key.isEqual(e.key)&&Uu(i,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ju(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ju(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=du();return this.mutations.forEach((i=>{const s=e.get(i.key),r=s.overlayedDocument;let a=this.applyToLocalView(r,s.mutatedFields);a=t.has(i.key)?null:a;const o=qu(r,a);null!==o&&n.set(i.key,o),r.isValidDocument()||r.convertToNoDocument(bc.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),gu())}isEqual(e){return this.batchId===e.batchId&&vc(this.mutations,e.mutations,((e,t)=>Vu(e,t)))&&vc(this.baseMutations,e.baseMutations,((e,t)=>Vu(e,t)))}}class Ju{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){nc(e.mutations.length===n.length);let i=mu;const s=e.mutations;for(let e=0;e<s.length;e++)i=i.insert(s[e].key,n[e].version);return new Ju(e,t,n,i)}}class Xu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yu{constructor(e,t){this.count=e,this.unchangedNames=t}}var Zu,eh;function th(e){if(void 0===e)return Yo("GRPC error has no .code"),sc.UNKNOWN;switch(e){case Zu.OK:return sc.OK;case Zu.CANCELLED:return sc.CANCELLED;case Zu.UNKNOWN:return sc.UNKNOWN;case Zu.DEADLINE_EXCEEDED:return sc.DEADLINE_EXCEEDED;case Zu.RESOURCE_EXHAUSTED:return sc.RESOURCE_EXHAUSTED;case Zu.INTERNAL:return sc.INTERNAL;case Zu.UNAVAILABLE:return sc.UNAVAILABLE;case Zu.UNAUTHENTICATED:return sc.UNAUTHENTICATED;case Zu.INVALID_ARGUMENT:return sc.INVALID_ARGUMENT;case Zu.NOT_FOUND:return sc.NOT_FOUND;case Zu.ALREADY_EXISTS:return sc.ALREADY_EXISTS;case Zu.PERMISSION_DENIED:return sc.PERMISSION_DENIED;case Zu.FAILED_PRECONDITION:return sc.FAILED_PRECONDITION;case Zu.ABORTED:return sc.ABORTED;case Zu.OUT_OF_RANGE:return sc.OUT_OF_RANGE;case Zu.UNIMPLEMENTED:return sc.UNIMPLEMENTED;case Zu.DATA_LOSS:return sc.DATA_LOSS;default:return tc()}}(eh=Zu||(Zu={}))[eh.OK=0]="OK",eh[eh.CANCELLED=1]="CANCELLED",eh[eh.UNKNOWN=2]="UNKNOWN",eh[eh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",eh[eh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",eh[eh.NOT_FOUND=5]="NOT_FOUND",eh[eh.ALREADY_EXISTS=6]="ALREADY_EXISTS",eh[eh.PERMISSION_DENIED=7]="PERMISSION_DENIED",eh[eh.UNAUTHENTICATED=16]="UNAUTHENTICATED",eh[eh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",eh[eh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",eh[eh.ABORTED=10]="ABORTED",eh[eh.OUT_OF_RANGE=11]="OUT_OF_RANGE",eh[eh.UNIMPLEMENTED=12]="UNIMPLEMENTED",eh[eh.INTERNAL=13]="INTERNAL",eh[eh.UNAVAILABLE=14]="UNAVAILABLE",eh[eh.DATA_LOSS=15]="DATA_LOSS";const nh=new Ho([4294967295,4294967295],0);function ih(e){const t=(new TextEncoder).encode(e),n=new Go;return n.update(t),new Uint8Array(n.digest())}function sh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Ho([n,i],0),new Ho([s,r],0)]}class rh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ah(`Invalid padding: ${t}`);if(n<0)throw new ah(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new ah(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new ah(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Ho.fromNumber(this.Te)}de(e,t,n){let i=e.add(t.multiply(Ho.fromNumber(n)));return 1===i.compare(nh)&&(i=new Ho([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=ih(e),[n,i]=sh(t);for(let e=0;e<this.hashCount;e++){const t=this.de(n,i,e);if(!this.Ae(t))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),r=new rh(s,i,t);return n.forEach((e=>r.insert(e))),r}insert(e){if(0===this.Te)return;const t=ih(e),[n,i]=sh(t);for(let e=0;e<this.hashCount;e++){const t=this.de(n,i,e);this.Re(t)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ah extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class oh{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,ch.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new oh(bc.min(),i,new Fc(yc),ou(),gu())}}class ch{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ch(n,t,gu(),gu(),gu())}}class lh{constructor(e,t,n,i){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=i}}class uh{constructor(e,t){this.targetId=e,this.fe=t}}class hh{constructor(e,t,n=Kc.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class dh{constructor(){this.ge=0,this.pe=fh(),this.ye=Kc.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=gu(),t=gu(),n=gu();return this.pe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:tc()}})),new ch(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=fh()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class ph{constructor(e){this.Le=e,this.ke=new Map,this.qe=ou(),this.Qe=mh(),this.Ke=new Fc(yc)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:tc()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,i=this.Ye(t);if(i){const s=i.target;if($l(s))if(0===n){const e=new Ic(s.path);this.We(t,e,bl.newNoDocument(e,bc.min()))}else nc(1===n);else{const i=this.Ze(t);if(i!==n){const n=this.Xe(e),s=n?this.et(n,e,i):1;if(0!==s){this.He(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=t;let r,a;try{r=Xc(n).toUint8Array()}catch(e){if(e instanceof $c)return Zo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new rh(r,i,s)}catch(e){return Zo(e instanceof ah?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Te?null:a}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let i=0;return n.forEach((n=>{const s=this.Le.nt(),r=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(r)||(this.We(t,n,null),i++)})),i}it(e){const t=new Map;this.ke.forEach(((n,i)=>{const s=this.Ye(i);if(s){if(n.current&&$l(s.target)){const t=new Ic(s.target.path);null!==this.qe.get(t)||this.st(i,t)||this.We(i,t,bl.newNoDocument(t,e))}n.De&&(t.set(i,n.ve()),n.Fe())}}));let n=gu();this.Qe.forEach(((e,t)=>{let i=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(i=!1,!1)})),i&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const i=new oh(e,t,this.Ke,this.qe,n);return this.qe=ou(),this.Qe=mh(),this.Ke=new Fc(yc),i}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const i=this.ze(e);this.st(e,t)?i.Me(t,1):i.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new dh,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Bc(yc),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Xo("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new dh),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function mh(){return new Fc(Ic.comparator)}function fh(){return new Fc(Ic.comparator)}const gh={asc:"ASCENDING",desc:"DESCENDING"},yh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vh={and:"AND",or:"OR"};class wh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bh(e,t){return e.useProto3Json||Lc(t)?t:{value:t}}function Eh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function _h(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ch(e,t){return Eh(e,t.toTimestamp())}function Th(e){return nc(!!e),bc.fromTimestamp(function(e){const t=Qc(e);return new wc(t.seconds,t.nanos)}(e))}function Ih(e,t){return function(e){return new _c(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Sh(e){const t=_c.fromString(e);return nc(Gh(t)),t}function Ah(e,t){return Ih(e.databaseId,t.path)}function kh(e,t){const n=Sh(t);if(n.get(1)!==e.databaseId.projectId)throw new rc(sc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new rc(sc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ic(Rh(n))}function Nh(e,t){return Ih(e.databaseId,t)}function Dh(e){return new _c(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Rh(e){return nc(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function xh(e,t,n){return{name:Ah(e,t),fields:n.value.mapValue.fields}}function Ph(e,t){return{documents:[Nh(e,t.path)]}}function Oh(e,t){const n={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n.parent=Nh(e,i),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Nh(e,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(e){if(0!==e.length)return zh(kl.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const r=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Fh(e.field),direction:qh(e.dir)}}(e)))}(t.orderBy);r&&(n.structuredQuery.orderBy=r);const a=bh(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Lh(e){let t=function(e){const t=Sh(e);return 4===t.length?_c.emptyPath():Rh(t)}(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){nc(1===i);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let r=[];n.where&&(r=function(e){const t=Mh(e);return t instanceof kl&&Dl(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new Tl(Vh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Lc(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new El(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new El(n,t)}(n.endAt)),function(e,t,n,i,s,r,a,o){return new Kl(e,t,n,i,s,r,a,o)}(t,s,a,r,o,"F",c,l)}function Mh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Vh(e.unaryFilter.field);return Al.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Vh(e.unaryFilter.field);return Al.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vh(e.unaryFilter.field);return Al.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Vh(e.unaryFilter.field);return Al.create(s,"!=",{nullValue:"NULL_VALUE"});default:return tc()}}(e):void 0!==e.fieldFilter?function(e){return Al.create(Vh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tc()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return kl.create(e.compositeFilter.filters.map((e=>Mh(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return tc()}}(e.compositeFilter.op))}(e):tc()}function qh(e){return gh[e]}function Uh(e){return yh[e]}function jh(e){return vh[e]}function Fh(e){return{fieldPath:e.canonicalString()}}function Vh(e){return Tc.fromServerFormat(e.fieldPath)}function zh(e){return e instanceof Al?function(e){if("=="===e.op){if(ml(e.value))return{unaryFilter:{field:Fh(e.field),op:"IS_NAN"}};if(pl(e.value))return{unaryFilter:{field:Fh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ml(e.value))return{unaryFilter:{field:Fh(e.field),op:"IS_NOT_NAN"}};if(pl(e.value))return{unaryFilter:{field:Fh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fh(e.field),op:Uh(e.op),value:e.value}}}(e):e instanceof kl?function(e){const t=e.getFilters().map((e=>zh(e)));return 1===t.length?t[0]:{compositeFilter:{op:jh(e.op),filters:t}}}(e):tc()}function Bh(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Gh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Hh{constructor(e,t,n,i,s=bc.min(),r=bc.min(),a=Kc.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Hh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Hh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $h{constructor(e){this.ut=e}}function Kh(e){const t=Lh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Yl(t,t.limit,"L"):t}class Wh{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Jc(e.integerValue));else if("doubleValue"in e){const n=Jc(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Mc(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt(`${n.seconds||""}`),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Xc(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?yl(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):tc()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const e of Object.keys(n))this.At(e,t),this.Pt(n[e],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const e of n)this.Pt(e,t)}ft(e,t){this.Tt(t,37),Ic.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}Wh.St=new Wh;class Qh{constructor(){this.on=new Jh}addToCollectionParentIndex(e,t){return this.on.add(t),xc.resolve()}getCollectionParents(e,t){return xc.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return xc.resolve()}deleteFieldIndex(e,t){return xc.resolve()}deleteAllFieldIndexes(e){return xc.resolve()}createTargetIndexes(e,t){return xc.resolve()}getDocumentsMatchingTarget(e,t){return xc.resolve(null)}getIndexType(e,t){return xc.resolve(0)}getFieldIndexes(e,t){return xc.resolve([])}getNextCollectionGroupToUpdate(e){return xc.resolve(null)}getMinOffset(e,t){return xc.resolve(Ac.min())}getMinOffsetFromCollectionGroup(e,t){return xc.resolve(Ac.min())}updateCollectionGroup(e,t,n){return xc.resolve()}updateIndexEntries(e,t){return xc.resolve()}}class Jh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Bc(_c.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Bc(_c.comparator)).toArray()}}new Uint8Array(0);class Xh{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Xh(e,Xh.DEFAULT_COLLECTION_PERCENTILE,Xh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Xh.DEFAULT_COLLECTION_PERCENTILE=10,Xh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xh.DEFAULT=new Xh(41943040,Xh.DEFAULT_COLLECTION_PERCENTILE,Xh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xh.DISABLED=new Xh(-1,0,0);class Yh{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Yh(0)}static Nn(){return new Yh(-1)}}class Zh{constructor(){this.changes=new ru((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?xc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ed{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class td{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&ju(n.mutation,e,Hc.empty(),wc.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,gu()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=gu()){const i=hu();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((e=>{let t=lu();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=hu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,gu())))}populateOverlays(e,t,n){const i=[];return n.forEach((e=>{t.has(e)||i.push(e)})),this.documentOverlayCache.getOverlays(e,i).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,i){let s=ou();const r=pu(),a=pu();return t.forEach(((e,t)=>{const a=n.get(t.key);i.has(t.key)&&(void 0===a||a.mutation instanceof Bu)?s=s.insert(t.key,t):void 0!==a?(r.set(t.key,a.mutation.getFieldMask()),ju(a.mutation,t,a.mutation.getFieldMask(),wc.now())):r.set(t.key,Hc.empty())})),this.recalculateAndSaveOverlays(e,s).next((e=>(e.forEach(((e,t)=>r.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new ed(t,null!==(n=r.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=pu();let i=new Fc(((e,t)=>e-t)),s=gu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const s of e)s.keys().forEach((e=>{const r=t.get(e);if(null===r)return;let a=n.get(e)||Hc.empty();a=s.applyToLocalView(r,a),n.set(e,a);const o=(i.get(s.batchId)||gu()).add(e);i=i.insert(s.batchId,o)}))})).next((()=>{const r=[],a=i.getReverseIterator();for(;a.hasNext();){const i=a.getNext(),o=i.key,c=i.value,l=du();c.forEach((e=>{if(!s.has(e)){const i=qu(t.get(e),n.get(e));null!==i&&l.set(e,i),s=s.add(e)}})),r.push(this.documentOverlayCache.saveOverlays(e,o,l))}return xc.waitFor(r)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,i){return function(e){return Ic.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):function(e){return null!==e.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((s=>{const r=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-s.size):xc.resolve(hu());let a=-1,o=s;return r.next((t=>xc.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?xc.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,s))).next((()=>this.computeViews(e,o,t,gu()))).next((e=>({batchId:a,changes:uu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ic(t)).next((e=>{let t=lu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const s=t.collectionGroup;let r=lu();return this.indexManager.getCollectionParents(e,s).next((a=>xc.forEach(a,(a=>{const o=function(e,t){return new Kl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,i).next((e=>{e.forEach(((e,t)=>{r=r.insert(e,t)}))}))})).next((()=>r))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((r=>(s=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,i)))).next((e=>{s.forEach(((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,bl.newInvalidDocument(i)))}));let n=lu();return e.forEach(((e,i)=>{const r=s.get(e);void 0!==r&&ju(r.mutation,i,Hc.empty(),wc.now()),nu(t,i)&&(n=n.insert(e,i))})),n}))}}class nd{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return xc.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Th(e.createTime)}}(t)),xc.resolve()}getNamedQuery(e,t){return xc.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:Kh(e.bundledQuery),readTime:Th(e.readTime)}}(t)),xc.resolve()}}class id{constructor(){this.overlays=new Fc(Ic.comparator),this.lr=new Map}getOverlay(e,t){return xc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=hu();return xc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,i)=>{this.lt(e,t,i)})),xc.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.lr.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),xc.resolve()}getOverlaysForCollection(e,t,n){const i=hu(),s=t.length+1,r=new Ic(t.child("")),a=this.overlays.getIteratorFrom(r);for(;a.hasNext();){const e=a.getNext().value,r=e.getKey();if(!t.isPrefixOf(r.path))break;r.path.length===s&&e.largestBatchId>n&&i.set(e.getKey(),e)}return xc.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new Fc(((e,t)=>e-t));const r=this.overlays.getIterator();for(;r.hasNext();){const e=r.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=hu(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=hu(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=i)););return xc.resolve(a)}lt(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.lr.get(i.largestBatchId).delete(n.key);this.lr.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Xu(t,n));let s=this.lr.get(t);void 0===s&&(s=gu(),this.lr.set(t,s)),this.lr.set(t,s.add(n.key))}}class sd{constructor(){this.hr=new Bc(rd.Pr),this.Ir=new Bc(rd.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new rd(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new rd(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new Ic(new _c([])),n=new rd(t,e),i=new rd(t,e+1),s=[];return this.Ir.forEachInRange([n,i],(e=>{this.dr(e),s.push(e.key)})),s}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new Ic(new _c([])),n=new rd(t,e),i=new rd(t,e+1);let s=gu();return this.Ir.forEachInRange([n,i],(e=>{s=s.add(e.key)})),s}containsKey(e){const t=new rd(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class rd{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return Ic.comparator(e.key,t.key)||yc(e.gr,t.gr)}static Tr(e,t){return yc(e.gr,t.gr)||Ic.comparator(e.key,t.key)}}class ad{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Bc(rd.Pr)}checkEmpty(e){return xc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const r=new Qu(s,t,n,i);this.mutationQueue.push(r);for(const t of i)this.yr=this.yr.add(new rd(t.key,s)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return xc.resolve(r)}lookupMutationBatch(e,t){return xc.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Sr(n),s=i<0?0:i;return xc.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return xc.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return xc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new rd(t,0),i=new rd(t,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([n,i],(e=>{const t=this.wr(e.gr);s.push(t)})),xc.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Bc(yc);return t.forEach((e=>{const t=new rd(e,0),i=new rd(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,i],(e=>{n=n.add(e.gr)}))})),xc.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;Ic.isDocumentKey(s)||(s=s.child(""));const r=new rd(new Ic(s),0);let a=new Bc(yc);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(a=a.add(e.gr)),!0)}),r),xc.resolve(this.br(a))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){nc(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return xc.forEach(t.mutations,(i=>{const s=new rd(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new rd(t,0),i=this.yr.firstAfterOrEqual(n);return xc.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,xc.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class od{constructor(e){this.Cr=e,this.docs=new Fc(Ic.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,r=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:r}),this.size+=r-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return xc.resolve(n?n.document.mutableCopy():bl.newInvalidDocument(t))}getEntries(e,t){let n=ou();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():bl.newInvalidDocument(e))})),xc.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let s=ou();const r=t.path,a=new Ic(r.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!r.isPrefixOf(e.path))break;e.path.length>r.length+1||kc(Sc(a),n)<=0||(i.has(a.key)||nu(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return xc.resolve(s)}getAllFromCollectionGroup(e,t,n,i){tc()}vr(e,t){return xc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new cd(this)}getSize(e){return xc.resolve(this.size)}}class cd extends Zh{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this._r.addEntry(e,i)):this._r.removeEntry(n)})),xc.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class ld{constructor(e){this.persistence=e,this.Fr=new ru((e=>Gl(e)),Hl),this.lastRemoteSnapshotVersion=bc.min(),this.highestTargetId=0,this.Mr=0,this.Or=new sd,this.targetCount=0,this.Nr=Yh.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),xc.resolve()}getLastRemoteSnapshotVersion(e){return xc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xc.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),xc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),xc.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new Yh(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,xc.resolve()}updateTargetData(e,t){return this.kn(t),xc.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,xc.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.Fr.forEach(((r,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Fr.delete(r),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),xc.waitFor(s).next((()=>i))}getTargetCount(e){return xc.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return xc.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),xc.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((t=>{s.push(i.markPotentiallyOrphaned(e,t))})),xc.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),xc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return xc.resolve(n)}containsKey(e,t){return xc.resolve(this.Or.containsKey(t))}}class ud{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Oc(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new ld(this),this.indexManager=new Qh,this.remoteDocumentCache=function(e){return new od(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new $h(t),this.Kr=new nd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new id,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new ad(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){Xo("MemoryPersistence","Starting transaction:",e);const i=new hd(this.Lr.next());return this.referenceDelegate.$r(),n(i).next((e=>this.referenceDelegate.Ur(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Wr(e,t){return xc.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class hd extends Dc{constructor(e){super(),this.currentSequenceNumber=e}}class dd{constructor(e){this.persistence=e,this.Gr=new sd,this.zr=null}static jr(e){return new dd(e)}get Hr(){if(this.zr)return this.zr;throw tc()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),xc.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),xc.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),xc.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xc.forEach(this.Hr,(n=>{const i=Ic.fromPath(n);return this.Jr(e,i).next((e=>{e||t.removeEntry(i,bc.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return xc.or([()=>xc.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class pd{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=i}static Qi(e,t){let n=gu(),i=gu();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new pd(e,t.fromCache,n,i)}}class md{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class fd{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,i){const s={result:null};return this.zi(e,t).next((e=>{s.result=e})).next((()=>{if(!s.result)return this.ji(e,t,i,n).next((e=>{s.result=e}))})).next((()=>{if(s.result)return;const n=new md;return this.Hi(e,t,n).next((i=>{if(s.result=i,this.$i)return this.Ji(e,t,n,i.size)}))})).next((()=>s.result))}Ji(e,t,n,i){return n.documentReadCount<this.Ui?(Jo()<=k.DEBUG&&Xo("QueryEngine","SDK will not create cache indexes for query:",tu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),xc.resolve()):(Jo()<=k.DEBUG&&Xo("QueryEngine","Query:",tu(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Wi*i?(Jo()<=k.DEBUG&&Xo("QueryEngine","The SDK decides to create cache indexes for query:",tu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xl(t))):xc.resolve())}zi(e,t){if(Ql(t))return xc.resolve(null);let n=Xl(t);return this.indexManager.getIndexType(e,n).next((i=>0===i?null:(null!==t.limit&&1===i&&(t=Yl(t,null,"F"),n=Xl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const s=gu(...i);return this.Gi.getDocuments(e,s).next((i=>this.indexManager.getMinOffset(e,n).next((n=>{const r=this.Yi(t,i);return this.Zi(t,r,s,n.readTime)?this.zi(e,Yl(t,null,"F")):this.Xi(e,r,t,n)}))))})))))}ji(e,t,n,i){return Ql(t)||i.isEqual(bc.min())?xc.resolve(null):this.Gi.getDocuments(e,n).next((s=>{const r=this.Yi(t,s);return this.Zi(t,r,n,i)?xc.resolve(null):(Jo()<=k.DEBUG&&Xo("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),tu(t)),this.Xi(e,r,t,function(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=bc.fromTimestamp(1e9===i?new wc(n+1,0):new wc(n,i));return new Ac(s,Ic.empty(),t)}(i,-1)).next((e=>e)))}))}Yi(e,t){let n=new Bc(iu(e));return t.forEach(((t,i)=>{nu(e,i)&&(n=n.add(i))})),n}Zi(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,t,n){return Jo()<=k.DEBUG&&Xo("QueryEngine","Using full collection scan to execute query:",tu(t)),this.Gi.getDocumentsMatchingQuery(e,t,Ac.min(),n)}Xi(e,t,n,i){return this.Gi.getDocumentsMatchingQuery(e,n,i).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class gd{constructor(e,t,n,i){this.persistence=e,this.es=t,this.serializer=i,this.ts=new Fc(yc),this.ns=new ru((e=>Gl(e)),Hl),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new td(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}async function yd(e,t){const n=ic(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next((s=>(i=s,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const s=[],r=[];let a=gu();for(const e of i){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({_s:e,removedBatchIds:s,addedBatchIds:r})))}))}))}function vd(e){const t=ic(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function wd(e,t){const n=ic(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function bd(e,t,n){const i=ic(e),s=i.ts.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,(e=>i.persistence.referenceDelegate.removeTarget(e,s)))}catch(e){if(!Pc(e))throw e;Xo("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}i.ts=i.ts.remove(t),i.ns.delete(s.target)}function Ed(e,t,n){const i=ic(e);let s=bc.min(),r=gu();return i.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const i=ic(e),s=i.ns.get(n);return void 0!==s?xc.resolve(i.ts.get(s)):i.qr.getTargetData(t,n)}(i,e,Xl(t)).next((t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{r=e}))})).next((()=>i.es.getDocumentsMatchingQuery(e,t,n?s:bc.min(),n?r:gu()))).next((e=>(function(e,t,n){let i=e.rs.get(t)||bc.min();n.forEach(((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)})),e.rs.set(t,i)}(i,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,ls:r})))))}class _d{constructor(){this.activeTargetIds=yu}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cd{constructor(){this.eo=new _d,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new _d,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Td{ro(e){}shutdown(){}}class Id{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Xo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Xo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Sd=null;function Ad(){return null===Sd?Sd=268435456+Math.round(2147483648*Math.random()):Sd++,"0x"+Sd.toString(16)}const kd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Nd{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Dd="WebChannelConnection";class Rd extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo=`projects/${n}/databases/${i}`,this.po="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${i}`}get yo(){return!1}wo(e,t,n,i,s){const r=Ad(),a=this.So(e,t);Xo("RestConnection",`Sending RPC '${e}' ${r}:`,a,n);const o={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(o,i,s),this.Do(e,a,o,n).then((t=>(Xo("RestConnection",`Received RPC '${e}' ${r}: `,t),t)),(t=>{throw Zo("RestConnection",`RPC '${e}' ${r} failed with error: `,t,"url: ",a,"request:",n),t}))}Co(e,t,n,i,s,r){return this.wo(e,t,n,i,s)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=kd[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,i){const s=Ad();return new Promise(((r,a)=>{const o=new Bo;o.setWithCredentials(!0),o.listenOnce(Uo.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case qo.NO_ERROR:const t=o.getResponseJson();Xo(Dd,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),r(t);break;case qo.TIMEOUT:Xo(Dd,`RPC '${e}' ${s} timed out`),a(new rc(sc.DEADLINE_EXCEEDED,"Request time out"));break;case qo.HTTP_ERROR:const n=o.getStatus();if(Xo(Dd,`RPC '${e}' ${s} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(sc).indexOf(t)>=0?t:sc.UNKNOWN}(t.status);a(new rc(e,t.message))}else a(new rc(sc.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new rc(sc.UNAVAILABLE,"Connection failed."));break;default:tc()}}finally{Xo(Dd,`RPC '${e}' ${s} completed.`)}}));const c=JSON.stringify(i);Xo(Dd,`RPC '${e}' ${s} sending request:`,i),o.send(t,"POST",c,n,15)}))}vo(e,t,n){const i=Ad(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Lo(),a=Mo(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(o.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(o.xmlHttpFactory=new Vo({})),this.bo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const l=s.join("");Xo(Dd,`Creating RPC '${e}' stream ${i}: ${l}`,o);const u=r.createWebChannel(l,o);let h=!1,d=!1;const p=new Nd({co:t=>{d?Xo(Dd,`Not sending because RPC '${e}' stream ${i} is closed:`,t):(h||(Xo(Dd,`Opening RPC '${e}' stream ${i} transport.`),u.open(),h=!0),Xo(Dd,`RPC '${e}' stream ${i} sending:`,t),u.send(t))},lo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,zo.EventType.OPEN,(()=>{d||Xo(Dd,`RPC '${e}' stream ${i} transport opened.`)})),m(u,zo.EventType.CLOSE,(()=>{d||(d=!0,Xo(Dd,`RPC '${e}' stream ${i} transport closed`),p.Ro())})),m(u,zo.EventType.ERROR,(t=>{d||(d=!0,Zo(Dd,`RPC '${e}' stream ${i} transport errored:`,t),p.Ro(new rc(sc.UNAVAILABLE,"The operation could not be completed")))})),m(u,zo.EventType.MESSAGE,(t=>{var n;if(!d){const s=t.data[0];nc(!!s);const r=s,a=r.error||(null===(n=r[0])||void 0===n?void 0:n.error);if(a){Xo(Dd,`RPC '${e}' stream ${i} received error:`,a);const t=a.status;let n=function(e){const t=Zu[e];if(void 0!==t)return th(t)}(t),s=a.message;void 0===n&&(n=sc.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),d=!0,p.Ro(new rc(n,s)),u.close()}else Xo(Dd,`RPC '${e}' stream ${i} received:`,s),p.Vo(s)}})),m(a,jo.STAT_EVENT,(t=>{t.stat===Fo.PROXY?Xo(Dd,`RPC '${e}' stream ${i} detected buffering proxy`):t.stat===Fo.NOPROXY&&Xo(Dd,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{p.Ao()}),0),p}}function xd(){return"undefined"!=typeof document?document:null}function Pd(e){return new wh(e,!0)}class Od{constructor(e,t,n=1e3,i=1.5,s=6e4){this.si=e,this.timerId=t,this.Fo=n,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),i=Math.max(0,t-n);i>0&&Xo("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Ld{constructor(e,t,n,i,s,r,a,o){this.si=e,this.Ko=n,this.$o=i,this.connection=s,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Od(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===sc.RESOURCE_EXHAUSTED?(Yo(t.toString()),Yo("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===sc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Uo===t&&this.s_(e,n)}),(t=>{e((()=>{const e=new rc(sc.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return Xo("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(Xo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Md extends Ld{constructor(e,t,n,i,s,r){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,r),this.serializer=s}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:tc()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(e,t){return e.useProto3Json?(nc(void 0===t||"string"==typeof t),Kc.fromBase64String(t||"")):(nc(void 0===t||t instanceof Uint8Array),Kc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?sc.UNKNOWN:th(e.code);return new rc(t,e.message||"")}(a);n=new hh(i,s,r,o||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=kh(e,i.document.name),r=Th(i.document.updateTime),a=i.document.createTime?Th(i.document.createTime):bc.min(),o=new vl({mapValue:{fields:i.document.fields}}),c=bl.newFoundDocument(s,r,a,o),l=i.targetIds||[],u=i.removedTargetIds||[];n=new lh(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=kh(e,i.document),r=i.readTime?Th(i.readTime):bc.min(),a=bl.newNoDocument(s,r),o=i.removedTargetIds||[];n=new lh([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=kh(e,i.document),r=i.removedTargetIds||[];n=new lh([],r,s,null)}else{if(!("filter"in t))return tc();{t.filter;const e=t.filter;e.targetId;const{count:i=0,unchangedNames:s}=e,r=new Yu(i,s),a=e.targetId;n=new uh(a,r)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return bc.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?bc.min():t.readTime?Th(t.readTime):bc.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=Dh(this.serializer),t.addTarget=function(e,t){let n;const i=t.target;if(n=$l(i)?{documents:Ph(e,i)}:{query:Oh(e,i)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=_h(e,t.resumeToken);const i=bh(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(bc.min())>0){n.readTime=Eh(e,t.snapshotVersion.toTimestamp());const i=bh(e,t.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tc()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=Dh(this.serializer),t.removeTarget=e,this.e_(t)}}class qd extends Ld{constructor(e,t,n,i,s,r){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,r),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(nc(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(nc(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Th(e.updateTime):Th(t);return n.isEqual(bc.min())&&(n=Th(t)),new Pu(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Th(e.commitTime);return this.listener.I_(n,t)}return nc(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Dh(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof zu)n={update:xh(e,t.key,t.value)};else if(t instanceof Ku)n={delete:Ah(e,t.key)};else if(t instanceof Bu)n={update:xh(e,t.key,t.data),updateMask:Bh(t.fieldMask)};else{if(!(t instanceof Wu))return tc();n={verify:Ah(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Iu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Su)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ku)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Du)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw tc()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ch(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:tc()}(e,t.precondition)),n}(this.serializer,e)))};this.e_(t)}}class Ud extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new rc(sc.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.wo(e,t,n,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===sc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new rc(sc.UNKNOWN,e.toString())}))}Co(e,t,n,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,r])=>this.connection.Co(e,t,n,s,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===sc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new rc(sc.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class jd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(Yo(t),this.f_=!1):Xo("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Fd{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro((e=>{n.enqueueAndForget((async()=>{Qd(this)&&(Xo("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ic(e);t.C_.add(4),await zd(t),t.M_.set("Unknown"),t.C_.delete(4),await Vd(t)}(this))}))})),this.M_=new jd(n,i)}}async function Vd(e){if(Qd(e))for(const t of e.v_)await t(!0)}async function zd(e){for(const t of e.v_)await t(!1)}function Bd(e,t){const n=ic(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),Wd(n)?Kd(n):dp(n).Ho()&&Hd(n,t))}function Gd(e,t){const n=ic(e),i=dp(n);n.D_.delete(t),i.Ho()&&$d(n,t),0===n.D_.size&&(i.Ho()?i.Zo():Qd(n)&&n.M_.set("Unknown"))}function Hd(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(bc.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}dp(e).u_(t)}function $d(e,t){e.x_.Oe(t),dp(e).c_(t)}function Kd(e){e.x_=new ph({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),dp(e).start(),e.M_.g_()}function Wd(e){return Qd(e)&&!dp(e).jo()&&e.D_.size>0}function Qd(e){return 0===ic(e).C_.size}function Jd(e){e.x_=void 0}async function Xd(e){e.D_.forEach(((t,n)=>{Hd(e,t)}))}async function Yd(e,t){Jd(e),Wd(e)?(e.M_.w_(t),Kd(e)):e.M_.set("Unknown")}async function Zd(e,t,n){if(e.M_.set("Online"),t instanceof hh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.D_.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.D_.delete(i),e.x_.removeTarget(i))}(e,t)}catch(n){Xo("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ep(e,n)}else if(t instanceof lh?e.x_.$e(t):t instanceof uh?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(bc.min()))try{const t=await vd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.D_.get(i);s&&e.D_.set(i,s.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const i=e.D_.get(t);if(!i)return;e.D_.set(t,i.withResumeToken(Kc.EMPTY_BYTE_STRING,i.snapshotVersion)),$d(e,t);const s=new Hh(i.target,t,n,i.sequenceNumber);Hd(e,s)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Xo("RemoteStore","Failed to raise snapshot:",t),await ep(e,t)}}async function ep(e,t,n){if(!Pc(t))throw t;e.C_.add(1),await zd(e),e.M_.set("Offline"),n||(n=()=>vd(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Xo("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await Vd(e)}))}function tp(e,t){return t().catch((n=>ep(e,n,t)))}async function np(e){const t=ic(e),n=pp(t);let i=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;ip(t);)try{const e=await wd(t.localStore,i);if(null===e){0===t.b_.length&&n.Zo();break}i=e.batchId,sp(t,e)}catch(e){await ep(t,e)}rp(t)&&ap(t)}function ip(e){return Qd(e)&&e.b_.length<10}function sp(e,t){e.b_.push(t);const n=pp(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function rp(e){return Qd(e)&&!pp(e).jo()&&e.b_.length>0}function ap(e){pp(e).start()}async function op(e){pp(e).E_()}async function cp(e){const t=pp(e);for(const n of e.b_)t.P_(n.mutations)}async function lp(e,t,n){const i=e.b_.shift(),s=Ju.from(i,t,n);await tp(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await np(e)}async function up(e,t){t&&pp(e).h_&&await async function(e,t){if(function(e){return function(e){switch(e){default:return tc();case sc.CANCELLED:case sc.UNKNOWN:case sc.DEADLINE_EXCEEDED:case sc.RESOURCE_EXHAUSTED:case sc.INTERNAL:case sc.UNAVAILABLE:case sc.UNAUTHENTICATED:return!1;case sc.INVALID_ARGUMENT:case sc.NOT_FOUND:case sc.ALREADY_EXISTS:case sc.PERMISSION_DENIED:case sc.FAILED_PRECONDITION:case sc.ABORTED:case sc.OUT_OF_RANGE:case sc.UNIMPLEMENTED:case sc.DATA_LOSS:return!0}}(e)&&e!==sc.ABORTED}(t.code)){const n=e.b_.shift();pp(e).Yo(),await tp(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await np(e)}}(e,t),rp(e)&&ap(e)}async function hp(e,t){const n=ic(e);n.asyncQueue.verifyOperationInProgress(),Xo("RemoteStore","RemoteStore received new credentials");const i=Qd(n);n.C_.add(3),await zd(n),i&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await Vd(n)}function dp(e){return e.O_||(e.O_=function(e,t,n){const i=ic(e);return i.A_(),new Md(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{ho:Xd.bind(null,e),Io:Yd.bind(null,e),a_:Zd.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),Wd(e)?Kd(e):e.M_.set("Unknown")):(await e.O_.stop(),Jd(e))}))),e.O_}function pp(e){return e.N_||(e.N_=function(e,t,n){const i=ic(e);return i.A_(),new qd(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{ho:op.bind(null,e),Io:up.bind(null,e),T_:cp.bind(null,e),I_:lp.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await np(e)):(await e.N_.stop(),e.b_.length>0&&(Xo("RemoteStore",`Stopping write stream with ${e.b_.length} pending writes`),e.b_=[]))}))),e.N_}class mp{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new ac,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,s){const r=Date.now()+n,a=new mp(e,t,r,i,s);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new rc(sc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fp(e,t){if(Yo("AsyncQueue",`${t}: ${e}`),Pc(e))return new rc(sc.UNAVAILABLE,`${t}: ${e}`);throw e}class gp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ic.comparator(t.key,n.key):(e,t)=>Ic.comparator(e.key,t.key),this.keyedMap=lu(),this.sortedSet=new Fc(this.comparator)}static emptySet(e){return new gp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new gp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class yp{constructor(){this.B_=new Fc(Ic.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):tc():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class vp{constructor(e,t,n,i,s,r,a,o,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=r,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,i,s){const r=[];return t.forEach((e=>{r.push({type:0,doc:e})})),new vp(e,t,gp.emptySet(t),r,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class wp{constructor(){this.k_=void 0,this.listeners=[]}}class bp{constructor(){this.queries=new ru((e=>eu(e)),Zl),this.onlineState="Unknown",this.q_=new Set}}function Ep(e,t){const n=ic(e);let i=!1;for(const e of t){const t=e.query,s=n.queries.get(t);if(s){for(const t of s.listeners)t.K_(e)&&(i=!0);s.k_=e}}i&&Cp(n)}function _p(e,t,n){const i=ic(e),s=i.queries.get(t);if(s)for(const e of s.listeners)e.onError(n);i.queries.delete(t)}function Cp(e){e.q_.forEach((e=>{e.next()}))}class Tp{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new vp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=vp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class Ip{constructor(e){this.key=e}}class Sp{constructor(e){this.key=e}}class Ap{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=gu(),this.mutatedKeys=gu(),this._a=iu(e),this.aa=new gp(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new yp,i=t?t.aa:this.aa;let s=t?t.mutatedKeys:this.mutatedKeys,r=i,a=!1;const o="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((e,t)=>{const l=i.get(e),u=nu(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),p=!0):this.ha(l,u)||(n.track({type:2,doc:u}),p=!0,(o&&this._a(u,o)>0||c&&this._a(u,c)<0)&&(a=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(o||c)&&(a=!0)),p&&(u?(r=r.add(u),s=d?s.add(e):s.delete(e)):(r=r.delete(e),s=s.delete(e)))})),null!==this.query.limit)for(;r.size>this.query.limit;){const e="F"===this.query.limitType?r.last():r.first();r=r.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{aa:r,la:n,Zi:a,mutatedKeys:s}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tc()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n);const r=t?this.Ia():[],a=0===this.oa.size&&this.current?1:0,o=a!==this.sa;return this.sa=a,0!==s.length||o?{snapshot:new vp(this.query,e.aa,i,s,e.mutatedKeys,0===a,o,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:r}:{Ta:r}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new yp,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=gu(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new Sp(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new Ip(n))})),t}da(e){this.ia=e.ls,this.oa=gu();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return vp.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class kp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Np{constructor(e){this.key=e,this.Ra=!1}}class Dp{constructor(e,t,n,i,s,r){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=r,this.Va={},this.ma=new ru((e=>eu(e)),Zl),this.fa=new Map,this.ga=new Set,this.pa=new Fc(Ic.comparator),this.ya=new Map,this.wa=new sd,this.Sa={},this.ba=new Map,this.Da=Yh.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function Rp(e,t){const n=function(e){const t=ic(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Pp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lp.bind(null,t),t.Va.a_=Ep.bind(null,t.eventManager),t.Va.Fa=_p.bind(null,t.eventManager),t}(e);let i,s;const r=n.ma.get(t);if(r)i=r.targetId,n.sharedClientState.addLocalQueryTarget(i),s=r.view.Aa();else{const e=await function(e,t){const n=ic(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let i;return n.qr.getTargetData(e,t).next((s=>s?(i=s,xc.resolve(i)):n.qr.allocateTargetId(e).next((s=>(i=new Hh(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,i).next((()=>i)))))))})).then((e=>{const i=n.ts.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}(n.localStore,Xl(t)),r=n.sharedClientState.addLocalQueryTarget(e.targetId);i=e.targetId,s=await async function(e,t,n,i,s){e.va=(t,n,i)=>async function(e,t,n,i){let s=t.view.ca(n);s.Zi&&(s=await Ed(e.localStore,t.query,!1).then((({documents:e})=>t.view.ca(e,s))));const r=i&&i.targetChanges.get(t.targetId),a=t.view.applyChanges(s,e.isPrimaryClient,r);return zp(e,t.targetId,a.Ta),a.snapshot}(e,t,n,i);const r=await Ed(e.localStore,t,!0),a=new Ap(t,r.ls),o=a.ca(r.documents),c=ch.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState,s),l=a.applyChanges(o,e.isPrimaryClient,c);zp(e,n,l.Ta);const u=new kp(t,n,a);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),l.snapshot}(n,t,i,"current"===r,e.resumeToken),n.isPrimaryClient&&Bd(n.remoteStore,e)}return s}async function xp(e,t){const n=ic(e),i=n.ma.get(t),s=n.fa.get(i.targetId);if(s.length>1)return n.fa.set(i.targetId,s.filter((e=>!Zl(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await bd(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),Gd(n.remoteStore,i.targetId),Fp(n,i.targetId)})).catch(Rc)):(Fp(n,i.targetId),await bd(n.localStore,i.targetId,!0))}async function Pp(e,t){const n=ic(e);try{const e=await function(e,t){const n=ic(e),i=t.snapshotVersion;let s=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const r=n.ss.newChangeBuffer({trackRemovals:!0});s=n.ts;const a=[];t.targetChanges.forEach(((r,o)=>{const c=s.get(o);if(!c)return;a.push(n.qr.removeMatchingKeys(e,r.removedDocuments,o).next((()=>n.qr.addMatchingKeys(e,r.addedDocuments,o))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?l=l.withResumeToken(Kc.EMPTY_BYTE_STRING,bc.min()).withLastLimboFreeSnapshotVersion(bc.min()):r.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(r.resumeToken,i)),s=s.insert(o,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,r)&&a.push(n.qr.updateTargetData(e,l))}));let o=ou(),c=gu();if(t.documentUpdates.forEach((i=>{t.resolvedLimboDocuments.has(i)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))})),a.push(function(e,t,n){let i=gu(),s=gu();return n.forEach((e=>i=i.add(e))),t.getEntries(e,i).next((e=>{let i=ou();return n.forEach(((n,r)=>{const a=e.get(n);r.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),r.isNoDocument()&&r.version.isEqual(bc.min())?(t.removeEntry(n,r.readTime),i=i.insert(n,r)):!a.isValidDocument()||r.version.compareTo(a.version)>0||0===r.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(r),i=i.insert(n,r)):Xo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",r.version)})),{us:i,cs:s}}))}(e,r,t.documentUpdates).next((e=>{o=e.us,c=e.cs}))),!i.isEqual(bc.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,i)));a.push(t)}return xc.waitFor(a).next((()=>r.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,c))).next((()=>o))})).then((e=>(n.ts=s,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const i=n.ya.get(t);i&&(nc(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.Ra=!0:e.modifiedDocuments.size>0?nc(i.Ra):e.removedDocuments.size>0&&(nc(i.Ra),i.Ra=!1))})),await Hp(n,e,t)}catch(e){await Rc(e)}}function Op(e,t,n){const i=ic(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.ma.forEach(((n,i)=>{const s=i.view.Q_(t);s.snapshot&&e.push(s.snapshot)})),function(e,t){const n=ic(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.Q_(t)&&(i=!0)})),i&&Cp(n)}(i.eventManager,t),e.length&&i.Va.a_(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Lp(e,t,n){const i=ic(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.ya.get(t),r=s&&s.key;if(r){let e=new Fc(Ic.comparator);e=e.insert(r,bl.newNoDocument(r,bc.min()));const n=gu().add(r),s=new oh(bc.min(),new Map,new Fc(yc),e,n);await Pp(i,s),i.pa=i.pa.remove(r),i.ya.delete(t),Gp(i)}else await bd(i.localStore,t,!1).then((()=>Fp(i,t,n))).catch(Rc)}async function Mp(e,t){const n=ic(e),i=t.batch.batchId;try{const e=await function(e,t){const n=ic(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const s=n.batch,r=s.keys();let a=xc.resolve();return r.forEach((e=>{a=a.next((()=>i.getEntry(t,e))).next((t=>{const r=n.docVersions.get(e);nc(null!==r),t.version.compareTo(r)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,s)))}(n,e,t,s).next((()=>s.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=gu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(n.localStore,t);jp(n,i,null),Up(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Hp(n,e)}catch(e){await Rc(e)}}async function qp(e,t,n){const i=ic(e);try{const e=await function(e,t){const n=ic(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(nc(null!==t),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(i.localStore,t);jp(i,t,n),Up(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Hp(i,e)}catch(n){await Rc(n)}}function Up(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function jp(e,t,n){const i=ic(e);let s=i.Sa[i.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),i.Sa[i.currentUser.toKey()]=s}}function Fp(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.fa.get(t))e.ma.delete(i),n&&e.Va.Fa(i,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||Vp(e,t)}))}function Vp(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(Gd(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),Gp(e))}function zp(e,t,n){for(const i of n)i instanceof Ip?(e.wa.addReference(i.key,t),Bp(e,i)):i instanceof Sp?(Xo("SyncEngine","Document no longer in limbo: "+i.key),e.wa.removeReference(i.key,t),e.wa.containsKey(i.key)||Vp(e,i.key)):tc()}function Bp(e,t){const n=t.key,i=n.path.canonicalString();e.pa.get(n)||e.ga.has(i)||(Xo("SyncEngine","New document in limbo: "+n),e.ga.add(i),Gp(e))}function Gp(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new Ic(_c.fromString(t)),i=e.Da.next();e.ya.set(i,new Np(n)),e.pa=e.pa.insert(n,i),Bd(e.remoteStore,new Hh(Xl(Wl(n.path)),i,"TargetPurposeLimboResolution",Oc._e))}}async function Hp(e,t,n){const i=ic(e),s=[],r=[],a=[];i.ma.isEmpty()||(i.ma.forEach(((e,o)=>{a.push(i.va(o,t,n).then((e=>{if((e||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(o.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){s.push(e);const t=pd.Qi(o.targetId,e);r.push(t)}})))})),await Promise.all(a),i.Va.a_(s),await async function(e,t){const n=ic(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>xc.forEach(t,(t=>xc.forEach(t.ki,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>xc.forEach(t.qi,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!Pc(e))throw e;Xo("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.ts.get(t),i=e.snapshotVersion,s=e.withLastLimboFreeSnapshotVersion(i);n.ts=n.ts.insert(t,s)}}}(i.localStore,r))}async function $p(e,t){const n=ic(e);if(!n.currentUser.isEqual(t)){Xo("SyncEngine","User change. New user:",t.toKey());const e=await yd(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new rc(sc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ba.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Hp(n,e._s)}}function Kp(e,t){const n=ic(e),i=n.ya.get(t);if(i&&i.Ra)return gu().add(i.key);{let e=gu();const i=n.fa.get(t);if(!i)return e;for(const t of i){const i=n.ma.get(t);e=e.unionWith(i.view.ua)}return e}}function Wp(e){const t=ic(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Mp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qp.bind(null,t),t}class Qp{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Pd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(e,t,n,i){return new gd(e,t,n,i)}(this.persistence,new fd,e.initialUser,this.serializer)}createPersistence(e){return new ud(dd.jr,this.serializer)}createSharedClientState(e){return new Cd}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Jp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Op(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=$p.bind(null,this.syncEngine),await async function(e,t){const n=ic(e);t?(n.C_.delete(2),await Vd(n)):t||(n.C_.add(2),await zd(n),n.M_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new bp}createDatastore(e){const t=Pd(e.databaseInfo.databaseId),n=function(e){return new Rd(e)}(e.databaseInfo);return function(e,t,n,i){return new Ud(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,i,s){return new Fd(e,t,n,i,s)}(this.localStore,this.datastore,e.asyncQueue,(e=>Op(this.syncEngine,e,0)),Id.D()?new Id:new Td)}createSyncEngine(e,t){return function(e,t,n,i,s,r,a){const o=new Dp(e,t,n,i,s,r);return a&&(o.Ca=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=ic(e);Xo("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await zd(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}class Xp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Yo("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Yp{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Ko.UNAUTHENTICATED,this.clientId=gc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Xo("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Xo("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new rc(sc.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ac;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=fp(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Zp(e,t){e.asyncQueue.verifyOperationInProgress(),Xo("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await yd(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function em(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Xo("FirestoreClient","Using user provided OfflineComponentProvider");try{await Zp(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===sc.FAILED_PRECONDITION||e.code===sc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Zo("Error using user provided cache. Falling back to memory cache: "+n),await Zp(e,new Qp)}}else Xo("FirestoreClient","Using default OfflineComponentProvider"),await Zp(e,new Qp);return e._offlineComponents}(e);Xo("FirestoreClient","Initializing OnlineComponentProvider");const i=await e.getConfiguration();await t.initialize(n,i),e.setCredentialChangeListener((e=>hp(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>hp(t.remoteStore,n))),e._onlineComponents=t}async function tm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Xo("FirestoreClient","Using user provided OnlineComponentProvider"),await em(e,e._uninitializedComponentsProvider._online)):(Xo("FirestoreClient","Using default OnlineComponentProvider"),await em(e,new Jp))),e._onlineComponents}async function nm(e){const t=await tm(e),n=t.eventManager;return n.onListen=Rp.bind(null,t.syncEngine),n.onUnlisten=xp.bind(null,t.syncEngine),n}function im(e,t,n={}){const i=new ac;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,s){const r=new Xp({next:n=>{t.enqueueAndForget((()=>async function(e,t){const n=ic(e),i=t.query;let s=!1;const r=n.queries.get(i);if(r){const e=r.listeners.indexOf(t);e>=0&&(r.listeners.splice(e,1),s=0===r.listeners.length)}if(s)return n.queries.delete(i),n.onUnlisten(i)}(e,a))),n.fromCache&&"server"===i.source?s.reject(new rc(sc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Tp(n,r,{includeMetadataChanges:!0,J_:!0});return async function(e,t){const n=ic(e),i=t.query;let s=!1,r=n.queries.get(i);if(r||(s=!0,r=new wp),s)try{r.k_=await n.onListen(i)}catch(e){const n=fp(e,`Initialization of query '${tu(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,r),r.listeners.push(t),t.Q_(n.onlineState),r.k_&&t.K_(r.k_)&&Cp(n)}(e,a)}(await nm(e),e.asyncQueue,t,n,i))),i.promise}function sm(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const rm=new Map;function am(e,t,n){if(!n)throw new rc(sc.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function om(e){if(!Ic.isDocumentKey(e))throw new rc(sc.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function cm(e){if(Ic.isDocumentKey(e))throw new rc(sc.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function lm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":tc()}function um(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new rc(sc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lm(e);throw new rc(sc.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class hm{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new rc(sc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new rc(sc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,i){if(!0===t&&!0===i)throw new rc(sc.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sm(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new rc(sc.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new rc(sc.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new rc(sc.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dm{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new rc(sc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new rc(sc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new cc;switch(e.type){case"firstParty":return new dc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new rc(sc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=rm.get(e);t&&(Xo("ComponentProvider","Removing Datastore"),rm.delete(e),t.terminate())}(this),Promise.resolve()}}class pm{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new pm(this.firestore,e,this._query)}}class mm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mm(this.firestore,e,this._key)}}class fm extends pm{constructor(e,t,n){super(e,t,Wl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mm(this.firestore,null,new Ic(e))}withConverter(e){return new fm(this.firestore,e,this._path)}}function gm(e,t,...n){if(e=_(e),am("collection","path",t),e instanceof dm){const i=_c.fromString(t,...n);return cm(i),new fm(e,null,i)}{if(!(e instanceof mm||e instanceof fm))throw new rc(sc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(_c.fromString(t,...n));return cm(i),new fm(e.firestore,null,i)}}class ym{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Od(this,"async_queue_retry"),this.iu=()=>{const e=xd();e&&Xo("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=xd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=xd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new ac;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Pc(e))throw e;Xo("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Yo("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const i=mp.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(i),i}su(){this.eu&&tc()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}class vm extends dm{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new ym,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||bm(this),this._firestoreClient.terminate()}}function wm(e){return e._firestoreClient||bm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function bm(e){var t,n,i;const s=e._freezeSettings(),r=function(e,t,n,i){return new tl(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,sm(i.experimentalLongPollingOptions),i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new Yp(e._authCredentials,e._appCheckCredentials,e._queue,r),(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=s.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}class Em{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Em(Kc.fromBase64String(e))}catch(e){throw new rc(sc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Em(Kc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class _m{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new rc(sc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tc(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cm{constructor(e){this._methodName=e}}class Tm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new rc(sc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new rc(sc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return yc(this._lat,e._lat)||yc(this._long,e._long)}}const Im=/^__.*__$/;class Sm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Bu(e,this.data,this.fieldMask,t,this.fieldTransforms):new zu(e,this.data,t,this.fieldTransforms)}}function Am(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tc()}}class km{constructor(e,t,n,i,s,r){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new km(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Tu({path:n,du:!1});return i.Au(e),i}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Tu({path:n,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return jm(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(Am(this.Iu)&&Im.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class Nm{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Pd(e)}pu(e,t,n,i=!1){return new km({Iu:e,methodName:t,gu:n,path:Tc.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dm(e){const t=e._freezeSettings(),n=Pd(e._databaseId);return new Nm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Rm(e,t,n,i,s,r={}){const a=e.pu(r.merge||r.mergeFields?2:0,t,n,s);Lm("Data must be an object, but it was:",a,i);const o=Pm(i,a);let c,l;if(r.merge)c=new Hc(a.fieldMask),l=a.fieldTransforms;else if(r.mergeFields){const e=[];for(const i of r.mergeFields){const s=Mm(t,i,n);if(!a.contains(s))throw new rc(sc.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Fm(e,s)||e.push(s)}c=new Hc(e),l=a.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=a.fieldTransforms;return new Sm(new vl(o),c,l)}function xm(e,t){if(Om(e=_(e)))return Lm("Unsupported field value:",t,e),Pm(e,t);if(e instanceof Cm)return function(e,t){if(!Am(t.Iu))throw t.mu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.mu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const s of e){let e=xm(s,t.Vu(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=_(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return bu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=wc.fromDate(e);return{timestampValue:Eh(t.serializer,n)}}if(e instanceof wc){const n=new wc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Eh(t.serializer,n)}}if(e instanceof Tm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Em)return{bytesValue:_h(t.serializer,e._byteString)};if(e instanceof mm){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.mu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ih(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu(`Unsupported field value: ${lm(e)}`)}(e,t)}function Pm(e,t){const n={};return jc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Uc(e,((e,i)=>{const s=xm(i,t.Eu(e));null!=s&&(n[e]=s)})),{mapValue:{fields:n}}}function Om(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof wc||e instanceof Tm||e instanceof Em||e instanceof mm||e instanceof Cm)}function Lm(e,t,n){if(!Om(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=lm(n);throw"an object"===i?t.mu(e+" a custom object"):t.mu(e+" "+i)}}function Mm(e,t,n){if((t=_(t))instanceof _m)return t._internalPath;if("string"==typeof t)return Um(e,t);throw jm("Field path arguments must be of type string or ",e,!1,void 0,n)}const qm=new RegExp("[~\\*/\\[\\]]");function Um(e,t,n){if(t.search(qm)>=0)throw jm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new _m(...t.split("."))._internalPath}catch(i){throw jm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function jm(e,t,n,i,s){const r=i&&!i.isEmpty(),a=void 0!==s;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(r||a)&&(c+=" (found",r&&(c+=` in field ${i}`),a&&(c+=` in document ${s}`),c+=")"),new rc(sc.INVALID_ARGUMENT,o+e+c)}function Fm(e,t){return e.some((e=>e.isEqual(t)))}class Vm{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Bm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class zm extends Vm{data(){return super.data()}}function Bm(e,t){return"string"==typeof t?Um(e,t):t instanceof _m?t._internalPath:t._delegate._internalPath}class Gm{convertValue(e,t="none"){switch(sl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tc()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Uc(e,((e,i)=>{n[e]=this.convertValue(i,t)})),n}convertGeoPoint(e){return new Tm(Jc(e.latitude),Jc(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Zc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(el(e));default:return null}}convertTimestamp(e){const t=Qc(e);return new wc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=_c.fromString(e);nc(Gh(n));const i=new nl(n.get(1),n.get(3)),s=new Ic(n.popFirst(5));return i.isEqual(t)||Yo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}class Hm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $m extends Vm{constructor(e,t,n,i,s,r){super(e,t,n,i,r),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Km(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Bm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Km extends $m{data(e={}){return super.data(e)}}class Wm{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hm(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Km(this._firestore,this._userDataWriter,n.key,n,new Hm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new rc(sc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const i=new Km(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Hm(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const i=new Km(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Hm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,r=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),r=n.indexOf(t.doc.key)),{type:Qm(t.type),doc:i,oldIndex:s,newIndex:r}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Qm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tc()}}class Jm extends Gm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Em(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mm(this.firestore,null,t)}}function Xm(e,t){const n=um(e.firestore,vm),i=function(e,t,...n){if(e=_(e),1===arguments.length&&(t=gc.newId()),am("doc","path",t),e instanceof dm){const i=_c.fromString(t,...n);return om(i),new mm(e,null,new Ic(i))}{if(!(e instanceof mm||e instanceof fm))throw new rc(sc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(_c.fromString(t,...n));return om(i),new mm(e.firestore,e instanceof fm?e.converter:null,new Ic(i))}}(e),s=function(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}(e.converter,t);return function(e,t){return function(e,t){const n=new ac;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const i=Wp(e);try{const e=await function(e,t){const n=ic(e),i=wc.now(),s=t.reduce(((e,t)=>e.add(t.key)),gu());let r,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=ou(),c=gu();return n.ss.getEntries(e,s).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((s=>{r=s;const a=[];for(const e of t){const t=Fu(e,r.get(e.key).overlayedDocument);null!=t&&a.push(new Bu(e.key,t,wl(t.value.mapValue),Ou.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,a,t)})).next((t=>{a=t;const i=t.applyToLocalDocumentSet(r,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((()=>({batchId:a.batchId,changes:uu(r)})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.Sa[e.currentUser.toKey()];i||(i=new Fc(yc)),i=i.insert(t,n),e.Sa[e.currentUser.toKey()]=i}(i,e.batchId,n),await Hp(i,e.changes),await np(i.remoteStore)}catch(e){const t=fp(e,"Failed to persist write");n.reject(t)}}(await function(e){return tm(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(wm(e),t)}(n,[Rm(Dm(e.firestore),"addDoc",i._key,s,null!==e.converter,{}).toMutation(i._key,Ou.exists(!1))]).then((()=>i))}new WeakMap,function(e,t=!0){!function(e){Wo=e}(he),oe(new C("firestore",((e,{instanceIdentifier:n,options:i})=>{const s=e.getProvider("app").getImmediate(),r=new vm(new uc(e.getProvider("auth-internal")),new mc(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new rc(sc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nl(e.options.projectId,t)}(s,n),s);return i=Object.assign({useFetchStreams:t},i),r._setSettings(i),r}),"PUBLIC").setMultipleInstances(!0)),me($o,"4.3.2",e),me($o,"4.3.2","esm2017")}();var Ym=function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};const Zm=de({apiKey:"AIzaSyDy4weXhaPsGQMkTHcon0TFV4bR2aHquko",authDomain:"quiwe-22301.firebaseapp.com",projectId:"quiwe-22301",storageBucket:"quiwe-22301.appspot.com",messagingSenderId:"704773895989",appId:"1:704773895989:web:0909719081ce27debcbe7c",measurementId:"G-VJ8F2XEZP3"}),ef=function(e,t){const n="string"==typeof e?e:"(default)",i=ce("object"==typeof e?e:pe(),"firestore").getImmediate({identifier:n});if(!i._initialized){const e=(e=>{const t=o("firestore");if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]})();e&&function(e,t,n,i={}){var r;const a=(e=um(e,dm))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==a.host&&a.host!==o&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=Ko.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const a=i.mockUserToken.sub||i.mockUserToken.user_id;if(!a)throw new rc(sc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ko(a)}e._authCredentials=new lc(new oc(t,n))}}(i,...e)}return i}(Zm),tf=fi(Zm);ln(tf).then((()=>{})).catch((e=>{}));const nf=({email:e,password:t})=>Ym(void 0,void 0,void 0,(function*(){return function(e,t){return _(e).setPersistence(t)}(tf,fn).then((()=>function(e,t,n){return async function(e,t){return on(Rt(e),t)}(_(e),Wt.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&cn(e),t}))}(tf,e,t))).catch((e=>{const t=e.code,n=e.message;console.log(t,n)}))})),sf=()=>Ym(void 0,void 0,void 0,(function*(){const e=[],t=yield function(e){e=um(e,pm);const t=um(e.firestore,vm),n=wm(t),i=new Jm(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new rc(sc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),im(n,e._query).then((n=>new Wm(t,i,e,n)))}(gm(ef,"products"));return t.forEach((t=>{console.log(`${t.id} => ${t.data()}`),e.push(Object.assign({},t.data()))})),e}));var rf=function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};const af=e=>({type:"NAVIGATE",payload:e}),of=e=>({type:wi.SELECT_SPOT,payload:e}),cf=(e,t)=>{var n;const i=e.ownerDocument.createElement("style");i.innerHTML=t,null===(n=e.shadowRoot)||void 0===n||n.appendChild(i)};var lf,uf=n(893),hf=function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};!function(e){e.logo="logo",e.regions="regions",e.climate="climate",e.search="search",e.profile="profile"}(lf||(lf={}));class df extends HTMLElement{static get observedAttributes(){return Object.keys({logo:null,regions:null,climate:null,search:null,profile:null})}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}attributeChangedCallback(e,t,n){switch(e){case lf.logo:this.logo=n?String(n):void 0;break;case lf.regions:this.regions=n?String(n):void 0;break;case lf.climate:this.climate=n?String(n):void 0;break;case lf.search:this.search=n?String(n):void 0;break;case lf.profile:this.profile=n?String(n):void 0;break;default:this.propName=n}}render(){var e;this.shadowRoot&&(this.shadowRoot.innerHTML=""),cf(this,uf.Z);const t=this.ownerDocument.createElement("section");t.classList.add("class-header");const n=this.ownerDocument.createElement("div");n.classList.add("class-left");const i=this.ownerDocument.createElement("img");i.setAttribute("src",`${this.logo}`),i.setAttribute("height","40np"),i.addEventListener("click",(()=>{Ti(af(bi.DASHBOARD))}));const s=this.ownerDocument.createElement("h3");s.classList.add("class-region"),s.innerText=`${this.regions}`,s.addEventListener("click",(()=>{Ti(af(bi.REGIONS))}));const r=this.ownerDocument.createElement("h3");r.classList.add("class-region"),r.innerText=`${this.climate}`,r.addEventListener("click",(()=>{Ti(af(bi.CLIMATE))}));const a=this.ownerDocument.createElement("div");a.classList.add("class-right");const o=this.ownerDocument.createElement("img");o.classList.add("class-icono"),o.setAttribute("src","/src/components/imgheader/menu.png");const c=this.ownerDocument.createElement("input");c.setAttribute("type","search"),c.setAttribute("placeholder","Buscar"),c.setAttribute("id","Buscador");const l=this.ownerDocument.createElement("button");l.classList.add("class-buscador"),l.textContent="Buscar",l.addEventListener("click",(()=>{const e=c.value;console.log(e)}));const u=this.ownerDocument.createElement("img");u.classList.add("class-profile"),u.setAttribute("src",`${this.profile}`),u.setAttribute("height","35np"),u.style.marginLeft="50px";const h=this.ownerDocument.createElement("div");h.classList.add("dropdown-menu"),h.style.display="none";const d=()=>hf(this,void 0,void 0,(function*(){try{const e=fi();yield ln(e),alert("Cierre de sesión exitoso"),Ti(af(bi.LOGIN))}catch(e){alert("Error al cerrar sesión:")}}));["Log out"].forEach((e=>{const t=this.ownerDocument.createElement("div");t.textContent=e,"Log out"===e&&t.addEventListener("click",d),h.appendChild(t)})),u.addEventListener("click",(()=>{console.log("Clic en la foto de perfil"),h.style.display="block"===h.style.display?"none":"block"}));const p=this.ownerDocument.createElement("aside"),m=this.ownerDocument.createElement("div");m.classList.add("class-contenedor");const f=this.ownerDocument.createElement("h3");f.classList.add("class-texto"),f.innerText=`${this.regions}`,f.addEventListener("click",(()=>{Ti(af(bi.REGIONS))}));const g=this.ownerDocument.createElement("h3");g.classList.add("class-texto"),g.innerText=`${this.climate}`,g.addEventListener("click",(()=>{Ti(af(bi.CLIMATE))}));const y=this.ownerDocument.createElement("input");y.setAttribute("type","search"),y.setAttribute("placeholder","Buscar"),y.setAttribute("id","Buscador2");const v=this.ownerDocument.createElement("button");v.classList.add("class-buscar"),v.textContent="Buscar",v.addEventListener("click",(()=>{const e=c.value;console.log(e)}));const w=this.ownerDocument.createElement("img");w.classList.add("class-profile"),w.setAttribute("src",`${this.profile}`),w.setAttribute("height","35np"),w.style.marginLeft="50px";const b=this.ownerDocument.createElement("div");b.classList.add("dropdown-menu"),b.style.display="none";const E=()=>hf(this,void 0,void 0,(function*(){try{const e=fi();yield ln(e),alert("Cierre de sesión exitoso"),Ti(af(bi.LOGIN))}catch(e){alert("Error al cerrar sesión:")}}));["Log out"].forEach((e=>{const t=this.ownerDocument.createElement("div");t.textContent=e,"Log out"===e&&t.addEventListener("click",E),b.appendChild(t)})),w.addEventListener("click",(()=>{console.log("Clic en la foto de perfil"),b.style.display="block"===b.style.display?"none":"block"})),n.appendChild(p),p.appendChild(m),m.appendChild(f),m.appendChild(g),m.appendChild(y),m.appendChild(v),m.appendChild(w),m.appendChild(b),n.appendChild(i),n.appendChild(s),n.appendChild(r),a.appendChild(c),a.appendChild(l),a.appendChild(u),a.appendChild(h),a.appendChild(o),t.appendChild(n),t.appendChild(a),null===(e=this.shadowRoot)||void 0===e||e.appendChild(t)}}customElements.define("app-header",df);var pf,mf,ff=n(946);!function(e){e.img="img",e.title="title",e.spot="spot",e.region="region",e.climate="climate",e.obj="obj"}(pf||(pf={}));class gf extends HTMLElement{static get observedAttributes(){return[pf.img,pf.title,pf.spot,pf.obj]}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}attributeChangedCallback(e,t,n){switch(e){case pf.img:this.img=n?String(n):void 0;break;case pf.title:this.customTitle=n?String(n):void 0;break;case pf.spot:this.spot=n?String(n):void 0;case pf.obj:this.obj=n?String(n):void 0;break;default:this.propName=n}}render(){var e,t,n,i;this.shadowRoot&&(this.shadowRoot.innerHTML=""),cf(this,ff.Z);const s=this.ownerDocument.createElement("section");s.classList.add("class-styles");const r=this.ownerDocument.createElement("img");r.classList.add("class-image"),r.setAttribute("src",`${this.img}`),r.setAttribute("height","267.57px"),r.setAttribute("width","200.68px"),r.addEventListener("click",(()=>{if(this.obj){let e=JSON.parse(this.obj);Ti(of(e)),Ti(af(bi.SPOTSELECT))}}));const a=this.ownerDocument.createElement("h1");a.classList.add("tittle-spot"),a.innerText=`${this.title}`;const o=this.ownerDocument.createElement("h3");o.innerText=`${this.spot}`,null===(e=this.shadowRoot)||void 0===e||e.appendChild(r),null===(t=this.shadowRoot)||void 0===t||t.appendChild(a),null===(n=this.shadowRoot)||void 0===n||n.appendChild(o),null===(i=this.shadowRoot)||void 0===i||i.appendChild(s)}}customElements.define("app-home",gf),function(e){e.img="img",e.title="title",e.spot="spot",e.obj="obj"}(mf||(mf={}));class yf extends HTMLElement{static get observedAttributes(){return[mf.img,mf.title,mf.spot,mf.obj]}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}attributeChangedCallback(e,t,n){switch(e){case mf.img:this.img=n?String(n):void 0;break;case mf.title:this.customTitle=n?String(n):void 0;break;case mf.spot:this.spot=n?String(n):void 0;case mf.obj:this.obj=n?String(n):void 0;default:this.propName=n}}render(){var e,t,n,i;this.shadowRoot&&(this.shadowRoot.innerHTML=""),cf(this,ff.Z);const s=this.ownerDocument.createElement("section");s.classList.add("class-styles");const r=this.ownerDocument.createElement("img");r.classList.add("class-image"),r.setAttribute("src",`${this.img}`),r.setAttribute("height","267.57px"),r.setAttribute("width","200.68px"),r.addEventListener("click",(()=>{if(this.obj){let e=JSON.parse(this.obj);Ti(of(e)),Ti(af(bi.SPOTSELECT))}}));const a=this.ownerDocument.createElement("h1");a.classList.add("tittle-spot"),a.innerText=`${this.title}`;const o=this.ownerDocument.createElement("h3");o.innerText=`${this.spot}`,null===(e=this.shadowRoot)||void 0===e||e.appendChild(r),null===(t=this.shadowRoot)||void 0===t||t.appendChild(a),null===(n=this.shadowRoot)||void 0===n||n.appendChild(o),null===(i=this.shadowRoot)||void 0===i||i.appendChild(s)}}customElements.define("app-recommended",yf);const vf=[{logo:"../src/components/imgheader/quiwe.png",regions:"Regiones",climate:"Climas",profile:"../src/components/imgheader/profile.png"}],wf=[{name:"m_gigante",img:"https://huilamagnifica.com/wp-content/uploads/2019/05/Mirador-La-Mano-del-Gigante-Municipio-de-Gigante-Huila-Magnifica-10.jpg",title:"Mirador La Mano del Gigante",spot:"Gigante, Huila",description:"La mano del gigante abrió al público a inicios del año 2019 y se ha vuelto todo un furor en redes sociales, cada vez son más y más influencers, instragramers, viajeros, moteros y turistas locales y extranjeros en general que visitan este lugar para lograr las fotografías que ofrece este paisaje tan especial, representativo y excepcional que ofrece la ubicación de este monumento.\nLa mano está hecha de manera artesanal pero muy resistente con árbol de eucalipto propio de la zona, al dar esa sensación de estar al aire cuentan que esta mano sostiene el mundo y las 5 falanges de la mano simbolizan los 5 continentes del planeta.",region:"Andina",climate:"Templado"},{name:"p_peñol",img:"https://upload.wikimedia.org/wikipedia/commons/2/26/PIEDRA_DEL_PE%C3%91OL_2.jpg",title:"Piedra del Peñol",spot:"Guatapé, Antioquia",description:"Uno de los atractivos turísticos más importantes para visitar es El Peñón de Guatapé, conocido también como “La piedra del Peñol”. Es un monolito de 220 metros de altura ubicado entre los municipios de Guatapé y El Peñol, que cuenta con 702 escalones hasta la cima. Una maravilla de la naturaleza, desde donde se puede ver la panorámica del embalse de más de 2.200 hectáreas de extensión, que consta de varias islas en tonos verdes rodeadas de aguas tranquilas que invitan a la contemplación y al descanso.\nDesde allí se observa la antigua ubicación del pueblo, puesto que se ha ubicado una cruz que emerge del agua y sirve de símbolo histórico.",region:"Andina",climate:"Templado"},{name:"c_sombrillas",img:"https://voyagesautenteo.com/wp-content/uploads/2021/07/rues-parapluies-guatape.jpg",title:"Callejón de las Sombrillas Coloridas",spot:"Guatapé, Antioquia",description:"Seguido de la plazoleta de los zócalos, encontramos con una calle empedrada y estrecha, para uso peatonal llamada Calle de los paraguas. Allí se ubican principalmente tiendas artesanales y algunos de los zócalos más famosos del municipio; sin duda, por su belleza y color, es uno de los lugares que debes ver en tu visita. Sobre la calle, colgando de un techo a otro, nos encontramos con muchos paraguas de colores vivos, adornando el lugar.\nEs ideal para caminar, hacerse fotos y tomarse un café en las mesas que se ubican en la calle.",region:"Andina",climate:"Templado"},{name:"i_Pedro",img:"https://i0.wp.com/www.turismoreligioso.travel/wp-content/uploads/2021/09/SAN-PEDRO-CLAVER-EDIFICO-TURISMO-RELIGIOSO_1.jpg?fit=750%2C422&ssl=1",title:"Iglesia de San Pedro Claver",spot:"Cartagena de Indias, Bolívar",description:"La construcción del Monasterio y la Iglesia de San Pedro Claver, lo iniciaron los jesuitas en el siglo XVII. Ellos lo pusieron bajo la advocación de San Ignacio de Loyola. El frontis del templo está hecho, como la mayoría de los edificios de la ciudad vieja, con rocas coralinas que son famosas en esta región. A partir de 1888, la iglesia fue restaurada y en 1921 se añadió la actual capilla que es un importante punto de referencia desde muchos lugares de la ciudad e incluso desde el mar.\nEscondido detrás de esa imponente fachada hay un patio colonial con exuberantes jardines. Por eso este espacio es el refugio perfecto para un descanso del ajetreo y el bullicio de Cartagena.",region:"Caribe",climate:"Calido"},{name:"c_cristales",img:"https://www.eluniversal.com.mx/resizer/7Loc41J5hFF0EhhlDfuOFfrixCE=/1100x666/cloudfront-us-east-1.images.arcpublishing.com/eluniversal/PS36GSZDDNBVDF5HUA2KBNKYL4.jpg",title:"Caño Cristales",spot:"Sierra de la Macarena, Meta",description:"Ubicado en el Parque Nacional Serranía de la Macarena. Es conocida por su impactante belleza, con aguas cristalinas que van del verde esmeralda al amarillo, azul y rojo, debido a la presencia de diversas especies de plantas y vida acuática. El principal atractivo es un tipo de planta llamada Macarenia clavigera, que se vuelve de color rojo brillante en el lecho del río durante la temporada de lluvias, creando una vista realmente impresionante.\nA Caño Cristales se le suele llamar el Río de los Cinco Colores o el Arco Iris Líquido y se ha convertido en un popular destino turístico en los últimos años.",region:"Orinoquía",climate:"Calido"},{name:"s_lajas",img:"https://lanotapositiva.com/wp-content/uploads/2019/02/Por-su-arquitectura-y-ubicaci%C3%B3n-la-iglesia-de-Las-Lajas-en-Nari%C3%B1o-es-considerada-como-la-m%C3%A1s-bonita-del-mundo.jpg",title:"Santuario de Las Lajas",spot:"Ipiales, Nariño",description:"Como sacada de un cuento de hadas, entre las montañas, dentro de un cañón se alza majestuosa una construcción neogótica que hipnotiza y enamora. El Santuario de las Lajas es una combinación perfecta entre fe, encanto y creencias populares, unidas para crear una maravilla arquitectónica que ha sido denominada por el periódico The Telegraph como una de las iglesias más hermosas del mundo.\nEste templo se encuentra a 40 metros de altura sobre el río Guátira y debe su nombre a la Laja, una piedra gris y blanca que se encuentra en la zona y que contrasta con el hermoso verde de la Cordillera de los Andes. Esta construcción se realizó entre 1916 y 1949 y se hizo gracias a las donaciones de los feligreses de la zona.",region:"Pacífica",climate:"Frio"}],bf=[{name:"m_gigante",img:"https://huilamagnifica.com/wp-content/uploads/2019/05/Mirador-La-Mano-del-Gigante-Municipio-de-Gigante-Huila-Magnifica-10.jpg",title:"Mirador La Mano del Gigante",spot:"Gigante, Huila",description:"La mano del gigante abrió al público a inicios del año 2019 y se ha vuelto todo un furor en redes sociales, cada vez son más y más influencers, instragramers, viajeros, moteros y turistas locales y extranjeros en general que visitan este lugar para lograr las fotografías que ofrece este paisaje tan especial, representativo y excepcional que ofrece la ubicación de este monumento.\nLa mano está hecha de manera artesanal pero muy resistente con árbol de eucalipto propio de la zona, al dar esa sensación de estar al aire cuentan que esta mano sostiene el mundo y las 5 falanges de la mano simbolizan los 5 continentes del planeta.",region:"Andina",climate:"Templado"},{name:"p_peñol",img:"https://upload.wikimedia.org/wikipedia/commons/2/26/PIEDRA_DEL_PE%C3%91OL_2.jpg",title:"Piedra del Peñol",spot:"Guatapé, Antioquia",description:"Uno de los atractivos turísticos más importantes para visitar es El Peñón de Guatapé, conocido también como “La piedra del Peñol”. Es un monolito de 220 metros de altura ubicado entre los municipios de Guatapé y El Peñol, que cuenta con 702 escalones hasta la cima. Una maravilla de la naturaleza, desde donde se puede ver la panorámica del embalse de más de 2.200 hectáreas de extensión, que consta de varias islas en tonos verdes rodeadas de aguas tranquilas que invitan a la contemplación y al descanso.\nDesde allí se observa la antigua ubicación del pueblo, puesto que se ha ubicado una cruz que emerge del agua y sirve de símbolo histórico.",region:"Andina",climate:"Templado"},{name:"c_sombrillas",img:"https://voyagesautenteo.com/wp-content/uploads/2021/07/rues-parapluies-guatape.jpg",title:"Callejón de las Sombrillas Coloridas",spot:"Guatapé, Antioquia",description:"Seguido de la plazoleta de los zócalos, encontramos con una calle empedrada y estrecha, para uso peatonal llamada Calle de los paraguas. Allí se ubican principalmente tiendas artesanales y algunos de los zócalos más famosos del municipio; sin duda, por su belleza y color, es uno de los lugares que debes ver en tu visita. Sobre la calle, colgando de un techo a otro, nos encontramos con muchos paraguas de colores vivos, adornando el lugar.\nEs ideal para caminar, hacerse fotos y tomarse un café en las mesas que se ubican en la calle.",region:"Andina",climate:"Templado"},{name:"i_Pedro",img:"https://i0.wp.com/www.turismoreligioso.travel/wp-content/uploads/2021/09/SAN-PEDRO-CLAVER-EDIFICO-TURISMO-RELIGIOSO_1.jpg?fit=750%2C422&ssl=1",title:"Iglesia de San Pedro Claver",spot:"Cartagena de Indias, Bolívar",description:"La construcción del Monasterio y la Iglesia de San Pedro Claver, lo iniciaron los jesuitas en el siglo XVII. Ellos lo pusieron bajo la advocación de San Ignacio de Loyola. El frontis del templo está hecho, como la mayoría de los edificios de la ciudad vieja, con rocas coralinas que son famosas en esta región. A partir de 1888, la iglesia fue restaurada y en 1921 se añadió la actual capilla que es un importante punto de referencia desde muchos lugares de la ciudad e incluso desde el mar.\nEscondido detrás de esa imponente fachada hay un patio colonial con exuberantes jardines. Por eso este espacio es el refugio perfecto para un descanso del ajetreo y el bullicio de Cartagena.",region:"Caribe",climate:"Calido"},{name:"c_cristales",img:"https://www.eluniversal.com.mx/resizer/7Loc41J5hFF0EhhlDfuOFfrixCE=/1100x666/cloudfront-us-east-1.images.arcpublishing.com/eluniversal/PS36GSZDDNBVDF5HUA2KBNKYL4.jpg",title:"Caño Cristales",spot:"Sierra de la Macarena, Meta",description:"Ubicado en el Parque Nacional Serranía de la Macarena. Es conocida por su impactante belleza, con aguas cristalinas que van del verde esmeralda al amarillo, azul y rojo, debido a la presencia de diversas especies de plantas y vida acuática. El principal atractivo es un tipo de planta llamada Macarenia clavigera, que se vuelve de color rojo brillante en el lecho del río durante la temporada de lluvias, creando una vista realmente impresionante.\nA Caño Cristales se le suele llamar el Río de los Cinco Colores o el Arco Iris Líquido y se ha convertido en un popular destino turístico en los últimos años.",region:"Orinoquía",climate:"Calido"},{name:"s_lajas",img:"https://lanotapositiva.com/wp-content/uploads/2019/02/Por-su-arquitectura-y-ubicaci%C3%B3n-la-iglesia-de-Las-Lajas-en-Nari%C3%B1o-es-considerada-como-la-m%C3%A1s-bonita-del-mundo.jpg",title:"Santuario de Las Lajas",spot:"Ipiales, Nariño",description:"Como sacada de un cuento de hadas, entre las montañas, dentro de un cañón se alza majestuosa una construcción neogótica que hipnotiza y enamora. El Santuario de las Lajas es una combinación perfecta entre fe, encanto y creencias populares, unidas para crear una maravilla arquitectónica que ha sido denominada por el periódico The Telegraph como una de las iglesias más hermosas del mundo.\nEste templo se encuentra a 40 metros de altura sobre el río Guátira y debe su nombre a la Laja, una piedra gris y blanca que se encuentra en la zona y que contrasta con el hermoso verde de la Cordillera de los Andes. Esta construcción se realizó entre 1916 y 1949 y se hizo gracias a las donaciones de los feligreses de la zona.",region:"Pacífica",climate:"Frio"},{name:"r_victoria",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Cuerpo1-4-1536x864.jpg",title:"Reserva Natural Victoria Regia",spot:"Leticia, Amazonas",description:"El loto o el lirio de agua más grande de Colombia, nativo de las aguas poco profundas del río Amazonas, se conoce como victoria regia y se encuentra en esta reserva que se puede recorrer a través de puentes instalados cerca de los lagos donde viven, lo que permite verlos de cerca.\nAlrededor de esta zona de plantas acuáticas con flores que crecen en lagos, lagunas, charcas, pantanos o arroyos de corriente lenta, estando usualmente enraizadas en el fondo; hay senderos donde se pueden avistar guacamayas, monos bebeleches, entre otras muchas especies de animales.",region:"Amazónica",climate:"Calido"},{name:"p_amacayacu",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Cuerpo-9-1536x864.jpg",title:"Parque Nacional Natural Amacayacu",spot:"Leticia, Amazonas",description:"Es un lugar ideal para conectarse con las experiencias que ofrece la Amazonía colombiana. Los endémicos delfines rosados, los titís pielroja, manatíes, dantas, jaguares y más de 400 especies de aves se pueden observar en los recorridos guiados por las comunidades indígenas tikuna, que prestan los servicios ecoturísticos a este parque.\nTambién es posible cruzar entre las copas de los árboles por el Puente del Dosel, que cuelga a más de 30 metros de altura y desde donde se divisa la selva y el río Amazonas. En este recorrido se observa una ceiba de más de 300 años, se puede ascender a través cuerdas o escalera para alcanzar el puente y luego descender en rappel.",region:"Amazónica",climate:"Calido"},{name:"s_vicente",img:"https://colombiavisible.com/wp-content/uploads/2022/01/Portada-Caguan-Expeditions-1536x864.jpeg",title:"San Vicente del Caguán",spot:"San Vicente del Caguán, Caquetá",description:"San Vicente del Caguán fue por mucho tiempo un municipio al que no se podía acceder a causa del conflicto armado y hoy, después de la firma del Acuerdo de Paz, es sinónimo de ecoturismo y turismo de aventura.\nUna de las opciones es hacer rafting y paseos en balsa por el caudal del río Pato, operado por personas en proceso de reincorporación, así como caminatas por senderos ecológicos y por el casco urbano, que tienen también un componente de memoria histórica y que son operados por guías locales.",region:"Amazónica",climate:"Calido"},{name:"r_dalias",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Las-Dalias-1536x864.jpg",title:"Reserva Natural Las Dalias",spot:" La Montañita, Caquetá",description:"Se trata de una reserva de alrededor de 80 hectáreas que ofrece atractivos naturales como los arroyos Agua Bonita y La Cajona, así como una serie de cuevas con una longitud promedio de 100 metros y una cascada de 12 metros de altura, entre varios otros pozos y piscinas naturales.\nDe la misma manera se pueden avistar varias especies de la fauna amazónica como tigrillos, armadillos y una gran variedad de primates.",region:"Amazónica",climate:"Calido"},{name:"e_fluvial",img:"https://arc-anglerfish-arc2-prod-elespectador.s3.amazonaws.com/public/T2QTFP52DNDENBJ6YGA7S5A4HA.jpg",title:"Estrella fluvial del oriente",spot:"Irínida, Guainía",description:"En este destino se puede observar claramente cómo los ríos Guaviare, Inírida y Atabapo se unen para formar el gran Orinoco, el tercer río más caudaloso del mundo.Este punto de la cuenca fue apodado así por el alemán Alexander von Humboldt en el siglo XIX y allí se pueden observar diez ecosistemas estratégicos pertenecientes al territorio colombiano como bosques heterogéneos no inundables, bosques inundables y zonas cubiertas de arenas blancas con hierbas y arbustos.\nTambién se puede navegar el río Atabapo en la frontera colombo-venezolana, cuyas aguas cambian del color negro hacia el rojo o el amarillo dependiendo de la posición del sol.",region:"Amazónica",climate:"Calido"},{name:"s_lindosa",img:"https://colombiavisible.com/wp-content/uploads/2022/04/WhatsApp-Image-2022-04-19-at-10.00.24-AM-2.jpeg",title:"Serranía de la Lindosa",spot:"San José del Guaviare, Guaviare",description:"En esta formación rocosa, que pertenece al Escudo Guyanés, se encuentran varios atractivos. Uno de los principales son los pictogramas indígenas que tienen alrededor de 12.000 años de antigüedad y se pueden apreciar con particularidad en Cerro Azul y Nuevo Tolima, dos monumentos del lugar. De la misma manera se encuentran caños y ríos coloridos como los de Caño Cristales, así como formaciones de rocas que crean caminos, corredores y túneles, también marcados con pictogramas, que componen La Ciudad de Piedra",region:"Amazónica",climate:"Calido"},{name:"p_orion",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Puerta-de-Orion-1536x864.jpg",title:"Puerta de Orión",spot:"San José del Guaviare, Guaviare",description:"Ubicada a  kilómetros de San José del Guaviare, la Puerta de Orión es una formación rocosa de 12 metros de alto y 15 de ancho. Recibe su nombre porque, desde ese lugar, cada diciembre, entre las siete y las nueve de la noche, se alínea la constelación del Cinturón de Orión.\nAdemás, a su alrededor hay laberintos formados por rocas, así como túneles y puentes naturales desde los que se puede ver la sabana guaverense. La vegetación de los alrededores se puede explorar en un recorrido de, aproximadamente, 40 minutos.",region:"Amazónica",climate:"Calido"},{name:"c_fin",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Cascada-del-Fin-del-Mundo-1536x864.jpg",title:"Cascada del Fin del Mundo",spot:"Mocoa, Putumayo",description:"Se trata de una caída de agua de 70 metros de altura, a pocos kilómetros del casco urbano de la capital del departamento, Mocoa. Desde su cima se puede observar la Serranía de los Churumbelos, un parque nacional en jurisdicción de Putumayo y Cauca.\nDurante el recorrido a la cascada, donde no está permitido bañarse, hay varios pozos naturales, quebradas y cascadas más pequeñas que sí tienen acceso autorizado para los turistas. Entre ellos la quebrada Dantayaco y los pozos Danta, Almorzadero y Pozo Negro.",region:"Amazónica",climate:"Calido"},{name:"r_jiriji",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Raudal-de-Jirijirimo-1536x864.jpg",title:"Raudal de Jirijirimo",spot:"Pacoa, Vaupés",description:"El Raudal de Jirijirimo es un tramo en el curso medio-bajo del río Apaporis que marca el límite entre los departamentos de Vaupés y Amazonas, conocido también como ‘La cama de la anaconda’. Por la manera en que las rocas forman especies de escalones sobre los que cae el agua, es considerada una cascada única en el país.\nAdemás de contemplar la belleza del lugar, otro de los atractivos de la zona es la desembocadura del río Cananarí, cerca del Raudal, en el río Apaporis.",region:"Amazónica",climate:"Calido"},{name:"comuna",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Comuna-13-de-Medellin-1536x864.jpg",title:"Comuna 13",spot:"Medellín, Antioquia",description:"Diversos recorridos de arte urbano y memoria se ofrecen en Medellín y el Valle de Aburrá, el más conocido es el de la Comuna 13, una zona al occidente de la ciudad que, desde hace 10 años, es referente de transformación social después de haber vivido el recrudecimiento de la violencia.\nAllí se encuentra la galería de Graffittis que cuenta la historia del conflicto que atravesó esta comuna durante finales de los años 90 y principios de los 2000, las Escaleras Eléctricas construidas en 2010 como una solución de movilidad para los habitantes del barrio Las Independencias #1 y distintos miradores donde se puede divisar la ciudad mientras se disfruta de una paleta de mango biche, conocida receta de la zona.",region:"Andina",climate:"Templado"},{name:"sf_antioquia",img:"https://travelandservice.com.co/wp-content/uploads/2021/02/tour-pueblos-patrimonio-2.png.jpg",title:"Santa Fe de Antioquia",spot:"Santa Fe de Antioquia, Antioquia",description:"La primera capital del departamento de Antioquia aún conserva su arquitectura colonial, con fachadas y construcciones que datan del siglo XVI. Más vestigios de la historia paisa se pueden observar en sus distintas iglesias, el Museo Juan del Corral y el Museo de Arte Religioso Francisco Cristóbal Toro. Además, la Ciudad Madre solía conectarse con el resto del país a través del Puente de Occidente, una obra arquitectónica de 1887, a 10 minutos del casco urbano del municipio, que todavía cuelga sobre el río Cauca.",region:"Andina",climate:"Calido"},{name:"candelaria",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Candelaria-1536x864.jpg",title:"La Candelaria",spot:"Bogotá, Cundinamarca",description:"En esta zona del centro de Bogotá, en 1538, Gonzalo Jiménez de Quesada fundó la ciudad, que comenzó con 12 casas alrededor de una iglesia, específicamente en el Chorro de Quevedo (calle 12b # 2-98). Por eso, toda el área es perfecta para apreciar las viviendas y el trazado arquitectónico colonial y republicano.\nOtros lugares de interés incluyen el Museo Botero, la Biblioteca Luis Ángel Arango, el Centro Cultural García Márquez; el Teatro Colón, que hace poco inauguró una serie de renovaciones; la Plaza de Bolívar y el Museo de Arte Miguel Urrutia.",region:"Andina",climate:"Frio"},{name:"c_monserrate",img:"https://radionacional-v3.s3.amazonaws.com/s3fs-public/styles/portadas_relaciona_4_3/public/node/article/field_image/MONSERRATE.jpg?h=efd05f9e&itok=uaolkzqm",title:"Cerro de Monserrate",spot:"Bogotá, Cundinamarca",description:"Desde casi cualquier punto de la ciudad puede verse el santuario de Monserrate, en los cerros orientales de Bogotá. Situado a 3,172 metros sobre el nivel del mar, en la cima del cerro de Monserrate o cerro de Las Nieves. La devoción de subir a pie por un camino de casi tres kilómetros hasta este sitio tradicional de peregrinación religiosa se debe a que en su cúspide reposa un santuario que data del año 1620 con la ermita de Nuestra Señora de Monserrate.\nLa basílica alberga la imagen del Señor Caído de Monserrate, un Cristo que según fieles hace milagros, y en la cima los visitantes pueden recorrer un viacrucis.",region:"Andina",climate:"Frio"},{name:"m_nacional",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Museo-Nacional-1536x864.jpg",title:"Museo Nacional de Colombia",spot:"Bogotá, Cundinamarca",description:" El Museo Nacional de Colombia es un lugar que guarda la memoria viva del país; un lugar para encontrar las raíces precolombinas, entender el proceso de independencia y dimensionar la diversidad cultural de Colombia.\nEl Museo Nacional es un escenario que te conmoverá, desde que ingresas experimentarás sensaciones únicas. Aquí viajarás en el tiempo y conocerás en detalle obras y elementos históricos que han forjado el presente del país.",region:"Andina",climate:"Frio"},{name:"l_tota",img:"https://viajescolombiaviva.com/wp-content/uploads/elementor/thumbs/IMG_20191006_152429-1-pdqsmq4bohocie0lmx26tl8ng93zkna56ve4ezk6ms.jpg",title:"Laguna de Tota ",spot:"Aquitania, Boyacá",description:"Se trata de un cuerpo de agua de alrededor de 55 kilómetros cuadrados que se encuentra en jurisdicción de los municipios de Cuítiva, Tota y Aquitania. Es el lago más grande de Colombia y en él se pueden realizar deportes acuáticos, pesca, navegación, caminatas por los bosques aledaños y camping en zonas designadas.\nAdemás, en el borde de la laguna está Playa Blanca, la única playa de clima frío que hay en el país.",region:"Andina",climate:"Frio"},{name:"mongui",img:"https://camicorrecaminos.com/wp-content/uploads/2022/03/QSX-1024x768.jpg",title:"Monguí",spot:"Monguí, Boyacá",description:"Es uno de los 17 pueblos patrimonio de Colombia y conocido por muchos como el pueblo más bonito del departamento. Fue fundado en 1601 y tiene construcciones de la época como el Puente de Calicanto, sobre el río el Morro, y la Basílica de Nuestra Señora de Monguí, declarada patrimonio cultural de Colombia. Además, se puede visitar el Páramo de Ocetá, pues Monguí es el municipio más cercano a este patrimonio natural del país. De la misma manera, el municipio es conocido por la fabricación de balones. De hecho, durante el mes de octubre se lleva a cabo el Festival del Balón.",region:"Andina",climate:"Frio"},{name:"p_cocuy",img:"https://colombiavisible.com/wp-content/uploads/2022/02/IMG_5666-scaled-1-1536x705.jpeg",title:"Parque nacional Natural El Cocuy",spot:"Arauca, Boyacá y Casanare",description:"La Sierra Nevada del Cocuy está compuesta de más de 25 picos cubiertos de hielo y nieve en dos cadenas montañosas de alrededor de 25 kilómetros de longitud que oscilan entre los 4.800 y 5.330 metros sobre el nivel del mar, siendo así la mayor masa glaciar de Colombia.\nSin embargo, solo hay tres senderos autorizados para visitar: el Ritacuba, que lleva hasta el borde del glaciar Ritacuba Blanco; el sendero Laguna Grande de la Sierra, que lleva hasta el borde del glaciar del Pico Cóncavo y el sendero Lagunillas Púlpito, que llega hasta el borde del glaciar del Púlpito del Diablo.",region:"Andina",climate:"Paramo"},{name:"v_leyva",img:"https://mexicorutamagica.mx/wp-content/uploads/2022/03/villa-de-leyva-1024x640.jpg",title:"Villa de Leyva",spot:"Villa de Leyva, Boyacá",description:"Es uno de los municipios más característicos del centro de Colombia y es famoso, entre otras cosas, por su plaza principal que, con 14.000 metros cuadrados, es una de las más grandes de América. Asimismo, es otro de los Pueblos Patrimonio de Colombia, declarado Monumento Nacional y conocido, también, por el Festival del Viento y las Cometas en el mes de agosto.\nDe la misma manera se realiza también el Villa Jazz Festival en junio y la Fiesta de las Luces, en diciembre. Por otra parte, se pueden visitar varios lugares de interés como el Museo El Fósil, el Centro de Investigaciones Paleontológicas, los Pozos Azules y la Laguna de Iguaque, entre varios otros.",region:"Andina",climate:"Templado"},{name:"c_chorrera",img:"https://ecoglobalexpeditions.com/wp-content/uploads/2017/03/Chorrera-2018w-1.jpg",title:"Cascada La Chorrera",spot:"Choachí, Cundinamarca",description:"La cascada más alta de todo el país (590 metros) se encuentra en Choachí y permaneció, por años, como un paraje natural casi que anónimo. Su potencial como atractivo turístico del departamento sólo comenzó a cimentarse en 2007, cuando 50 familias de ese municipio se organizaron para explorar esa posibilidad.\nAsí nacieron una serie de rutas ecoturísticas que, a lo largo de bosques, cuevas y otras cascadas, exploran la historia de la región, su rol como lugar de paso para los comerciantes que llegaban a Cundinamarca desde otras regiones; las diferentes especies que habitan el ecosistema local y hasta la función de La Chorrera como escenario para rituales muiscas.",region:"Andina",climate:"Templado"},{name:"c_zipaquira",img:"https://www.lavanguardia.com/files/og_thumbnail/uploads/2019/01/04/5fa51ae8290ab.jpeg",title:"Catedral de sal de Zipaquirá",spot:"Zipaquirá, Cundinamarca",description:"Construido entre 1950 y 1954, pero renovadp completamente entre el 91 y el 95, este templo subterráneo se ha ganado el título como “la maravilla número uno de Colombia” por ser considerado como toda una proeza arquitectónica: el túnel de 386 metros de longitud y 13 metros de altura, las tres recámaras y todas las figuras, incluidas las 14 del viacrucis y la cruz de 4,20 metros de altura están completamente talladas en sal.\nAdemás de los servicios eclesiásticos, cuenta con otros atractivos como el Museo de la Salmuera, el espejo de agua, un sendero ecológico y hasta un muro de escalar. También se ha convertido en un destino popular para el turismo de reuniones y, ocasionalmente, hasta para fiestas de música electrónica.",region:"Andina",climate:"Frio"},{name:"c_chingaza",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Chingaza-1536x864.jpg",title:"Páramo de Chingaza",spot:"Cundinamarca y Meta",description:"Con una extensión de 76.600 hectáreas e influencia sobre siete municipios de Cundinamarca y cuatro de Meta, se trata de uno de los principales ecosistemas alrededor de Bogotá, así como de la principal fuente de agua para la capital del país. Cuenta con seis senderos ecoturìsticos, aunque en este momento sólo tres están habilitados para los visitantes: Suasie, Laguna de Chingaza y Lagunas de Siecha, siendo este último uno de los más concurridos, por la importancia de estos cuerpos de agua para la comunidad Muisca.\nEl páramo es hogar para numerosas especies, siendo los venados y el oso andino las más reconocidas. Eso sí, avistar al segundo requiere de bastante paciencia y un poco de suerte. Recuerde, además, que para poder ingresar al parque necesita primero contar con la compañía de un guía certificado por Parques Nacionales y asistir a la inducción para visitantes.",region:"Orinoquia",climate:"Frio"},{name:"p_nevados",img:"https://colombiavisible.com/wp-content/uploads/2022/02/shutterstock_405813253-1-1024x678.jpg",title:"Parque Nacional Natural Los Nevados",spot:"Tolima, Caldas, Quindío y Risaralda",description:"Los nevados del Ruiz, Tolima, Santa Isabel, el Cisne, Quindío y el Paramillo de Santa Rosa se encuentran en este Parque Nacional. En múltiples senderos de este Parque de casi 600 km2 de extensión se encuentran lugares como la laguna del Otún y diferentes ecosistemas de bosque andino, páramo y glaciar, además de los cinco nevados.\nEs un lugar idóneo para el avistamiento de fauna como venados, dantas de páramo y aves, por su gran concentración de especies. Entre ellas, se destacan el periquito de los nevados, la cotorra, el cóndor andino, el tororoi de Miller, el pato andino, los pericos paramunos y diferentes especies de colibrí.",region:"Andina",climate:"Paramo"},{name:"s_agustin",img:"https://colombiavisible.com/wp-content/uploads/2022/03/Interna-1024x576.jpg",title:"Parque Arqueológico de San Agustín",spot:"San Agustín, Huila",description:"Conocido como la capital arqueológica de Colombia, este destino alberga tres locaciones patrimonio de la humanidad: el Parque Arqueológico San Agustín, el Alto de las Piedras y el Alto de los Ídolos. En el parque, la necrópolis de mayor extensión a nivel mundial, se encuentran estructuras arqueológicas descubiertas entre los siglos I y VIII d.C., pero que datan de un período aproximado entre los años 3000 hasta el año 1000 a. C. Además, este municipio está rodeado de otros sitios ceremoniales donde se pueden apreciar otras esculturas monolíticas, piezas en barro, tumbas, collares y máscaras.",region:"Andina",climate:"Templado"},{name:"d_tatacoa",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Desierto-de-la-Tatacoa-1024x576.jpg",title:"Desierto de la Tatacoa",spot:"Villavieja, Huila",description:"Es la segunda zona árida más extensa de Colombia, con una temperatura que puede alcanzar los 39 grados centígrados. Se requiere el acompañamiento de un guía para recorrer Cuzco, como se conoce a su parte de color rojizo, y Los Hoyos, su paisaje gris similar a la superficie de la luna. La Tatacoa es también uno de los mejores lugares para observar las estrellas en Colombia, desde el Observatorio Astronómico de Villavieja se pueden apreciar algunas galaxias y estrellas fugaces. En su topografía también se identifica el Valle de los Deseos, un lugar donde los visitantes apilan piedras para pedir un deseo que queda custodiado por los “fantasmas”, figuras de arcilla a las que se atribuye esta forma.",region:"Andina",climate:"Calido"},{name:"t_santarosa",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Cuerpo4-1536x864.jpg",title:"Termales de Santa Rosa de Cabal",spot:"Santa Rosa de Cabal, Risaralda",description:"Gracias a la actividad volcánica del Parque Nacional Natural Los Nevados, en medio del paisaje cafetero se encuentran dos grandes fuentes de agua termal a 9 kilómetros del municipio de Santa Rosa de Cabal, Risaralda. Se puede disfrutar de una experiencia por un día completo u hospedarse en el hotel que rodea uno de los balnearios. Además de disfrutar de piscinas naturales relajantes de hasta 40 grados centígrados de temperatura, en el territorio se hallan opciones de zona de spa y masajes, restaurante, senderismo y otras actividades como rappel por las cascadas.",region:"Andina",climate:"Templado"},{name:"v_cocora",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Valle-del-Cocora-1-1536x864.jpg",title:"Valle del Cocora",spot:"Salento, Quindío",description:"El Valle del Cocora hace parte de las diferentes zonas que existen en el Parque Nacional Natural Los Nevados. Allí, gracias a su ubicación en la cordillera central de los Andes colombianos, se encuentran las famosas Palmas de Cera (que pueden llegar a medir hasta 50 metros).\nDentro del Valle existen diferentes destinos y planes: Senderismo hasta el Cerro Morro Gacho, conocer la Cima del Cóndor (uno de los puntos más altos del valle, destino para el que también es necesario atravesar un puente colgante sobre el Río Quindío) y caminar por la Reserva Natural Acaime.",region:"Andina",climate:"Frio"},{name:"p_cafe",img:"https://i.ytimg.com/vi/9XuMDdFvRW8/maxresdefault.jpg",title:"Parque del Café",spot:"Montenegro, Quindío",description:"El Parque del Café (creado por la Federación Nacional de Cafeteros) es uno de los parques temáticos más atractivos de América Latina tanto por su enfoque hacia un emblemático producto nacional como el café (son siete los tipos de café de denominación de origen) como por la originalidad de sus atracciones: cuenta con montaña acuática, montaña rusa, botes chocones, entre otras. Los visitantes también tienen acceso a un museo arqueológico y un museo y tren del café.",region:"Andina",climate:"Templado"},{name:"barichara",img:"https://colombiavisible.com/wp-content/uploads/2021/12/shutterstock_1636112695-scaled-1-1536x1025.jpg",title:"Barichara ",spot:"Barichara, Santander",description:"Otro serio competidor en las listas detrás del Pueblo más lindo de Colombia, este municipio de la provincia de Guanentá es famoso por su arquitectura en tierra (tapia pisada), una de las mejor conservadas del departamento y del país. Justamente, esa tierra de la zona, insumo que utilizan para la construcción y la artesanía, le dio a sus habitantes, que caminaban sin calzado, el apodo de patiamarillos por su peculiar color.",region:"Andina",climate:"Templado"},{name:"r_luriza",img:"https://www.elheraldo.co/sites/default/files/styles/widht_760/public/articulo/2018/10/24/1.jpg?itok=VrkMN_fe",title:"Reserva Natural Luriza",spot:"Usiacurí, Atlántico",description:"La primera reserva ambiental del Atlántico se encuentra a 6 kilómetros del casco urbano del municipio de Usiacurí, cuenta con un bosque seco tropical de 470 mil hectáreas disponibles para senderismo y avistamiento de aves (hay 138 especies registradas). Alberga, además, especies endémicas como el Tití Cabeciblanco, primate que algunas organizaciones como Proyecto Tití trabajan para preservar. Además, limita con los municipios de Usiacurí, famoso por sus artesanías con palma de iraca, y Piojó, reconocido por sus pozos.",region:"Caribe",climate:"Calido"},{name:"c_salgar",img:"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/04/a0/6a/a8/castillo-de-salgar.jpg?w=1200&h=-1&s=1",title:"Castillo de Salgar",spot:"Puerto Colombia, Atlántico",description:"El Castillo de San Antonio de Salgar es una edificación ubicada en el municipio de Puerto Colombia, al noroccidente del departamento del Atlántico, Colombia. Fue construida en 1848 sobre las ruinas del antiguo fortín de San Antonio, durante la época colonial. Es un lugar de interés histórico, pues el castillo fue un fuerte español que sirvió como presidio, como colonia y más tarde como refugio.",region:"Caribe",climate:"Calido"},{name:"c_sanfelipe",img:"https://colombiavisible.com/wp-content/uploads/2022/01/2-23-1536x864.jpg",title:"Castillo de San Felipe de Barajas",spot:"Cartagena de Indias, Bolívar",description:"Compuesto por una red de 600 metros de túneles utilizados por los españoles durante la Colonia, se encuentra ubicado sobre el Cerro de San Lázaro. Es considerado una de las 7 maravillas de Colombia y fue declarado Patrimonio de la Humanidad por la Unesco en 1984, junto con el Centro Histórico. Actualmente se pueden hacer recorridos educativos donde los visitantes tienen acceso a lugares como el cuarto de armas y el almacén de pólvora, además de una vista completa a la ciudad.",region:"Caribe",climate:"Calido"},{name:"m_zapatosa",img:"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/11/34/bc/48/muelle-turistico-cienaga.jpg?w=1200&h=1200&s=1",title:"Mirador de la Ciénaga de Zapatosa",spot:"Chimichangua, Cesar",description:"Este complejo de humedales de 40.000 hectáreas formados por el río Cesar a unos pocos kilómetros antes de su desembocadura, hace parte de la Depresión Momposina, una zona que se caracteriza por una inmensa riqueza hídrica que significa que habita una gran diversidad de fauna y flora en el territorio.",region:"Caribe",climate:"Calido"},{name:"s_flamencos",img:"https://i0.wp.com/itinerantlawyer.travel/wp-content/uploads/2022/07/Santuario-Los-Flamencos-Portada.jpg?fit=1280%2C860&ssl=1",title:"Santuario Los Flamencos",spot:"Boca, La Guajira",description:"Uno de los espectáculos que podrá disfrutar el visitante es la quietud de los cielos azules y despejados de la península de La Guajira, inte­rrumpida por arreboles de un rosado intenso que se disuelven en espirales sobre las lagunas del Santuario. Se trata de bandadas de flamencos, aves esbeltas de plumaje rosa que dan el nombre a esta área protegida. Los gráciles flamencos y el majestuoso colorido de su plumaje son el principal atractivo del Santuario, que a pesar de su reducida extensión, es considerado una de las áreas protegidas más ricas en variedad de aves acuáticas residentes y migratorias.",region:"Caribe",climate:"Calido"},{name:"d_taroa",img:"https://images.mnstatic.com/49/ab/49ab899b394fa7af7e01b2dd4bafa4de.jpg",title:"Dunas de Taroa",spot:"Punta Gallinas, La Guajira",description:"Ubicadas en Punta Gallinas, el sitio más septentrional de Colombia, son el ideal para los amantes del sandboarding (el descenso en tablas por las dunas o montañas de arena). Las agencias de turismo del lugar ofrecen hospedaje cerca de esta zona donde se puede disfrutar de las playas y del desierto.",region:"Caribe",climate:"Calido"},{name:"p_tayrona",img:"https://colombiavisible.com/wp-content/uploads/2022/02/Tayrona-1536x864.jpeg",title:"Playas Parque Tayrona",spot:"Santa Marta, Magdalena",description:"A 34 kilómetros de Santa Marta se encuentra el Parque Tayrona, un gran atractivo turístico del Magdalena por las más de 30 playas, de diferentes características y posibilidades de acceso, y por su extenso terreno apto para senderismo, avistamiento de aves y gran variedad de fauna. Recuerde que en Colombia existen 21 Parque Nacionales Naturales abiertos al público actualmente.\nAlgunas de las más conocidas son Cabo San Juan del Guía, La Piscina, Bahía Concha y Bahía Gayraca, ideal para practicar Snorkel y Buceo, además de Boca del Saco (la única playa nudista de Colombia).",region:"Caribe",climate:"Calido"},{name:"c_perdida",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Ciudad-perdida-1536x864.jpg",title:"Ciudad perdida",spot:"Santa Marta, Magdalena",description:"Santa Marta es una tierra donde aún está muy marcada la presencia de las comunidades indígenas. De allí salió Diomedes Izquierdo, el primer indígena arqueólogo del país y también José Luis Pérez, nominado al premio Future For Nature 2022, por su trabajo en la conservación de las ranas arlequín de la Sierra.\nCiudad Perdida, construída alrededor del siglo VIII, es uno de los principales sitios arqueológicos de Colombia pues fue el centro de la civilización Tayrona. Fue, además, declarada reserva de la biosfera desde 1979 por la UNESCO.",region:"Caribe",climate:"Calido"},{name:"s_sereno",img:"https://www.sitiosturisticoscolombia.com/wp-content/uploads/cascadas-del-sereno-coloso.jpg",title:"Salto del Sereno",spot:"Colosó, Sucre",description:"Un destino turístico poco explorado pues se trata de una cascada de 20 metros que termina en una piscina natural de agua cristalina, en medio de un predio privado después de una caminata desde la Vereda La Esmeralda, del municipio de Colosó. En el recorrido se puede observar distintas variedades de flora y disfrutar de algunos charcos, arroyos que a pesar de la temperatura de hasta 39 grados que puede alcanzar este territorio, se mantienen fríos.",region:"Caribe",climate:"Calido"},{name:"j_cay",img:"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/12/32/1a/7c/johnny-cay.jpg?w=1200&h=-1&s=1",title:"Johnny Cay",spot:"San Andrés, Providencia y Santa Catalina",description:"Johnny Cay es un cayo a un kilómetro de San Andrés, famoso por sus playas blancas y la oferta de comidas, bebidas y planes. En sus inmediaciones, además, es posible avistar fauna marina, como mantarrayas.",region:"Insular",climate:"Calido"},{name:"m_point",img:"https://i.ytimg.com/vi/GwZsf_zZwDo/maxresdefault.jpg?sqp=-oaymwEmCIAKENAF8quKqQMa8AEB-AHUBoAC4AOKAgwIABABGGUgYygyMA8=&rs=AOn4CLBoyXRb5cTK67XYwk0bjg9vqBGJzA",title:"Manglares de Old Point",spot:"San Andrés, Providencia y Santa Catalina",description:"Al oriente de la isla de San Andrés se encuentra el Parque Regional de Mangle Old Point, un lugar ideal para recorrer en kayak. Aquí puede observarse en detalle un ecosistema que alberga cangrejos, iguanas, lagartos y aves endémicas y migratorias, entre otras especies.\nLa comunidad administra el turismo en el lugar y son los guías de las experiencias de kayak que atraviesan los manglares para avistar la fauna que habita en el territorio. Los recorridos suelen durar dos horas, y también existe la posibilidad de hacer snorkeling.",region:"Insular",climate:"Calido"},{name:"r_cavo",img:"https://laschivasdelllano.com/wp-content/uploads/2023/11/Continua-monitoreo-en-el-rio-Cravo-Sur-tras-movimiento-en-masa-3.jpeg",title:"Río Cravo Sur",spot:"Yopal, Casanare",description:"Este río atraviesa el Casanare desde Yopal hasta desembocar en el río Meta en Orocué. A lo largo de él, varios hatos y Reservas Naturales de la Sociedad Civil se encuentran ofreciendo productos turísticos, la mayoría ligados con la conservación de la cultura y la naturaleza de los llanos orientales.\nLugares como El Paraíso, San Pablo, la reserva Palmarito o La Fortuna, son también visitados frecuentemente por científicos que estudian la flora y la fauna de la Orinoquía, y ofrecen servicios de alojamiento y toures por el río y los bosques, idóneos para el avistamiento de fauna, como aves endémicas de Casanare, chigüiros, caimanes llaneros, entre otros.",region:"Orinoquía",climate:"Templado"},{name:"c_guejar",img:"https://xperiencia.com.co/wp-content/uploads/2022/09/WhatsApp-Image-2022-09-07-at-8.03.57-PM.jpeg",title:"Cañón del río Güejar",spot:"Mesetas, Meta",description:"Ubicado entre los municipios de Mesetas, el punto donde comienza el Parque Nacional Natural Sierra de La Macarena, y Lejanías, la principal actividad que se realiza allí es el rafting a través del caudal del río. Durante el trayecto se realizan una serie de paradas en lugares como El Titanic, una de las más conocidas formaciones rocosas del cañón, y en una cascada desde donde se puede ver el cerro del Indio acostado, una representativa montaña del Meta.",region:"Orinoquia",climate:"Calido"},{name:"p_tuparro",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Tuparro-1-1536x864.jpg",title:"Parque Nacional Natural el Tuparro",spot:"Puerto Carreño, Vichada",description:"Ubicado en jurisdicción de Puerto Carreño, el parque alberga 320 especies de aves, además de pumas, jaguares, dantas, delfines rosados, nutrias, chigüiros y otras especies. Su belleza natural es tal que en el siglo XIX, el naturalista Alexander Von Humboldt calificó como la octava maravilla del mundo al lugar que hoy se conoce como el Raudal de Maypues, uno de los mayores atractivos del parque.\nAdemás, se pueden visitar lugares como la Reserva Bojonawi, donde se encuentra la emblemática laguna El Pañuelo; Caño Peinillas y Pozo Azul, entre otros.",region:"Orinoquia",climate:"Calido"},{name:"r_bita",img:"https://files.worldwildlife.org/wwfcmsprod/images/Bita_River_Sunset_Jorge_Garcia_/story_full_width/jv5wkcgk7_Rio_Bita_Jorge_Garcia__95_.jpg",title:"Río Bita",spot:"Puerto Carreño, Vichada",description:"A la Orinoquía, y en particular al departamento del Vichada, vienen aficionados desde todo el mundo a realizar pesca deportiva pues el departamento guarda uno de los mejores ríos del planeta para esa práctica: el Bita. Allí habitan especies como el pavón gigante, el pavón mariposa, el pinta lapa, bagres, el sinchao, entre varios otros. La mejor temporada para hacerlo es entre diciembre y abril, y los viajes suelen durar mínimo cinco días de los que, al menos, tres son de pesca.",region:"Orinoquia",climate:"Calido"},{name:"p_tierradentro",img:"https://colombiavisible.com/wp-content/uploads/2022/01/5-2-1536x864.jpg",title:"Parque Arqueológico Tierradentro",spot:"Tierradentro, Cauca",description:"Desde 1995, el Parque Arqueológico Nacional de Tierradentro es Patrimonio de la Humanidad de la UNESCO. En esta reserva arqueológica hay vestigios de sociedades agrícolas que habitaron el territorio entre el 600 y el 900 d.C, hoy expuestas en un museo.\nAunque en Tierradentro hay un área extensa de hipogeos y estatuas, tres sitios arqueológicos se destacan sobre los demás: el Alto del Aguacate, el Alto de San Andrés y el Alto del Duende. Además del Museo Arqueológico, el Museo Etnográfico de Tierradentro también abre sus puertas a visitantes.",region:"Pacifico",climate:"Templado"},{name:"p_gorgona",img:"https://colombiavisible.com/wp-content/uploads/2022/02/shutterstock_1495226381-1536x1024.jpg",title:"Parque Nacional Natural Gorgona",spot:"Gorgona, Cauca",description:"La isla, que entre 1960 y 1984 funcionó como una prisión, debe su nombre, según varios cronistas españoles, a causa de las múltiples muertes de colonizadores por mordeduras de serpientes, que abundan en el territorio.\nEl lugar, declarado Parque Nacional Natural, es un paraíso de diversidad en medio del océano Pacífico y se compone de dos islas Gorgona y Gorgonilla. La primera, además, ha sido denominada como Isla Ciencia por la cantidad de información que ha dado a investigadores para entender su ecosistema. Es Patrimonio de la Humanidad desde 1984. Es considerado como el segundo mejor lugar para realizar buceo en el pacífico, después de Malpelo, así como un excelente espacio para avistar ballenas.",region:"Pacifico",climate:"Calido"},{name:"nuqui",img:"https://colombiapais.com/pagina-sol-y-playa/playas-mar-pacifico/imagenes/mar-pacifico-nuqui-panoramica.jpg",title:"Nuquí",spot:"Nuquí, Chocó",description:"Nuquí es un municipio costero compuesto por siete corregimientos, casi todos ellos bañados con los mares del Pacífico y manglares. Entre julio y noviembre, las ballenas jorobadas visitan las costas del municipio y existe una oferta turística amplia para el avistamiento de estos mamíferos.\nAdemás de ello, dentro de la jurisdicción de Nuquí, junto con Bahía Solano, se encuentra el Parque Nacional Natural Utría, una de las zonas de más biodiversidad del chocó biogeográfico, lo que hace del municipio un destino para el turismo de naturaleza.",region:"Pacifico",climate:"Calido"},{name:"b_solano",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Bahia-Solano-1536x864.jpg",title:"Bahía Solano",spot:"Bahía Solano, Chocó",description:"Uno de los destinos ecoturísticos más demandados de Colombia, no solamente porque las ballenas jorobadas se pueden apreciar entre julio y octubre, sino porque también se conservan paisajes de selva virgen y distintas playas para caretear y observar otras especies marinas. Desde Bahía Solano también se llega al Parque Nacional Natural Ensenada de Utría, la zona de partos de ballenas más grande del mundo, donde los ballenatos aprenden sus primeros coletazos. En este destino también se pueden encontrar manglares, arrecifes coralinos y más de 10 mil hectáreas de Océano.",region:"Pacifico",climate:"Calido"},{name:"l_cocha",img:"https://aventurecolombia.com/wp-content/uploads/2021/04/San-Juan-de-Pasto-et-Narino-Laguna-la-Cocha-colombia-%C2%A9_RemySoulard-1.jpg",title:"Laguna de La Cocha",spot:"Pasto, Nariño",description:"Esta laguna se encuentra en el sistema de páramos más bajo del mundo, rodeada de frailejones, encinos, arrayanes, anturios, sietecueros y otras especies de flora propias del clima frío, entre 3 y 15 grados centígrados. A su alrededor se ubican comunidades campesinas descendientes de indígenas quechua, kamsá, kofán y quillacingas que la consideraban lugar sagrado. Es la segunda laguna natural más grande de Colombia, después de La Tota (Boyacá) y posee una isla en el medio, protegida por su riqueza natural.",region:"Pacifico",climate:"Frio"},{name:"p_farallones",img:"https://traveler.marriott.com/es/wp-content/uploads/sites/2/2020/11/GI-1054830418-FarallonesMountains.jpg",title:"Parque Natural Los Farallones",spot:"Cali, Valle del Cauca",description:"Los Farallones de Cali son las formaciones rocosa más jóvenes de la Cordillera Oriental y el parque es el área protegida más grande del Valle del Cauca en la que se conservan más de 540 especies de aves, por lo que el avistamiento es uno de los principales atractivos del lugar. Además, en su territorio nacen 30 ríos y se pueden visitar varias cascadas y senderos, de los cuales el más popular es el Pico del Loro, cuyo recorrido dura aproximadamente 3 horas y desde cuya cima se puede observar la cordillera occidental.",region:"Pacifico",climate:"Páramo"},{name:"b_rio",img:"https://colombiavisible.com/wp-content/uploads/2022/06/Boulevar-del-rio-Cali-1536x864.jpg",title:"Bulevar del Río",spot:"Cali, Valle del Cauca",description:"Caminando alrededor del río de la capital vallecaucana se puede conocer su historia. Desde el Gato de Tejada, una figura sonriente de bronce, de 3,5 metros de altura, esculpida por el pintor pereirano Hernando Tejada; hasta la Ermita, un templo gótico gris de 80 años de Antigüedad, se pueden apreciar en este paseo los encantos de Cali. En este recorrido a pie o en bicicleta, se pasa por el Puente Ortiz, monumento nacional y el primero en construirse sobre el río Cali; el teatro Jorge Isaacs, junto a la estatua de este escritor del Valle, que comparte parque -el Parque de los Poetas- con otros autores que engrandecieron el aporte literario de este departamento, como Carlos Villafañe, Ricardo Nieto, Octavio Gamboa y Octavio Llanos. Acompañando al Gato de Tejada, sobre el otro costado del río se encuentran otras 15 esculturas gatunas elaboradas por distintos artistas para un concurso que realizó la ciudad.",region:"Pacifico",climate:"Templado"},{name:"b_milagros",img:"https://upload.wikimedia.org/wikipedia/commons/5/59/Basilica-nuestro-se%C3%B1or-de-los-milagros-buga.jpg",title:"Basílica del Señor de los Milagros",spot:"Guadalajara de Buga, Valle del Cauca",description:"Basílica de Buga Señor de los Milagros de grandes dimensiones al que acuden los turistas religiosos de todas las clases sociales del país, alberga la imagen del Señor de los Milagros reconocida por la fe de sus devotos. La basílica se ha convertido en un museo por todos los elementos constructivos y de ornamentación que posee, entre los que se cuentan un órgano tubular de 1935 que tiene 25 voces o juegos de flautas, 2 teclados manuales y uno de pedal. El campanario está compuesto de 5 campanas que dan las notas musicales mi, fa, sol, si, y la más grande con un peso mayor de 3 toneladas. El reloj da la hora desde 1909.",region:"Pacifico",climate:"Templado"},{name:"l_calima",img:"https://laqua.com.co/wp-content/uploads/2019/08/lago-calima.png",title:"Lago Calima",spot:"El Darién, Valle del Cauca",description:"El lago Calima, como se conoce al Embalse Calima, se ha convertido en uno de los destinos turísticos más importantes del sur occidente Colombiano, gracias a su clima, paisajes y oferta turística; además, sus fuertes y constantes vientos hacen de esta región, el tercer lago en el mundo que ofrece condiciones muy favorables para el aprendizaje y la práctica de deportes como Kiteboard (Kitesurf), Windsurf, Optimist entre otros.",region:"Pacifico",climate:"Templado"}];var Ef=n(924);class _f extends HTMLElement{constructor(){super(),this.header=[],this.home=[],this.recommended=[],this.attachShadow({mode:"open"}),vf.forEach((e=>{const t=this.ownerDocument.createElement("app-header");t.setAttribute(lf.logo,e.logo),t.setAttribute(lf.regions,e.regions),t.setAttribute(lf.climate,e.climate),t.setAttribute(lf.profile,e.profile),this.header.push(t)})),wf.forEach((e=>{const t=this.ownerDocument.createElement("app-home");t.setAttribute(pf.img,e.img),t.setAttribute(pf.title,e.title),t.setAttribute(pf.spot,e.spot),t.setAttribute(pf.obj,JSON.stringify(e)),this.home.push(t)})),bf.forEach((e=>{const t=this.ownerDocument.createElement("app-recommended");t.setAttribute(mf.img,e.img),t.setAttribute(mf.title,e.title),t.setAttribute(mf.spot,e.spot),t.setAttribute(mf.obj,JSON.stringify(e)),this.recommended.push(t)}))}connectedCallback(){this.render()}render(){var e,t,n,i;this.shadowRoot&&(this.shadowRoot.innerHTML=""),cf(this,Ef.Z),this.header.forEach((e=>{var t;null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}));let s=this.ownerDocument.createElement("h2");null===(e=this.shadowRoot)||void 0===e||e.appendChild(s),s.setAttribute("class","card-title");let r=this.ownerDocument.createElement("main");null===(t=this.shadowRoot)||void 0===t||t.appendChild(r),s.textContent="Ya visitados",r.setAttribute("class","principal"),r&&this.home.forEach((e=>{r.appendChild(e)}));let a=this.ownerDocument.createElement("h2");null===(n=this.shadowRoot)||void 0===n||n.appendChild(a),a.setAttribute("class","card-title");let o=this.ownerDocument.createElement("Recomm");null===(i=this.shadowRoot)||void 0===i||i.appendChild(o),a.textContent="Recomendados",o.setAttribute("class","principal"),o&&this.recommended.forEach((e=>{o.appendChild(e)}))}}customElements.define("app-dashboard",_f);var Cf,Tf=n(671);!function(e){e.headerimg="headerimg",e.title="title",e.spot="spot",e.descript="descript",e.stars="stars",e.hotel="hotel",e.restaurant="restaurant",e.recommend="recommend",e.comment="comment"}(Cf||(Cf={}));class If extends HTMLElement{static get observedAttributes(){return[Cf.headerimg,Cf.title,Cf.spot,Cf.descript,Cf.stars,Cf.hotel,Cf.restaurant,Cf.recommend,Cf.comment]}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}attributeChangedCallback(e,t,n){switch(e){case Cf.headerimg:this.headerimg=n?String(n):void 0;break;case Cf.title:this.sTitle=n?String(n):void 0;break;case Cf.spot:this.spot=n?String(n):void 0;case Cf.descript:this.descript=n?String(n):void 0;break;case Cf.stars:this.stars=n?String(n):void 0;break;case Cf.hotel:this.hotel=n?String(n):void 0;case Cf.restaurant:this.restaurant=n?String(n):void 0;break;case Cf.recommend:this.recommend=n?String(n):void 0;break;case Cf.comment:this.comment=n?String(n):void 0;default:this.propName=n}}render(){var e,t,n,i;this.shadowRoot&&(this.shadowRoot.innerHTML=""),cf(this,Tf.Z);const s=this.ownerDocument.createElement("section");null===(e=this.shadowRoot)||void 0===e||e.appendChild(s);const r=this.ownerDocument.createElement("div");r.setAttribute("class","images"),s.appendChild(r);const a=this.ownerDocument.createElement("img");a.setAttribute("src",null!==(t=this.headerimg)&&void 0!==t?t:""),a.setAttribute("alt",""),r.appendChild(a);const o=this.ownerDocument.createElement("div");o.setAttribute("class","star-text"),s.appendChild(o);const c=this.ownerDocument.createElement("h1");c.textContent=this.title,o.appendChild(c);const l=this.ownerDocument.createElement("div");l.setAttribute("class","stars"),o.appendChild(l);for(let e=0;e<5;e++){const e=this.ownerDocument.createElement("img");e.setAttribute("src","/src/components/selectedspot/img/star_icon.png"),e.setAttribute("alt",""),l.appendChild(e)}const u=this.ownerDocument.createElement("h6");u.textContent=null!==(n=this.spot)&&void 0!==n?n:"",s.appendChild(u);const h=this.ownerDocument.createElement("p");h.setAttribute("class","description"),h.textContent=null!==(i=this.descript)&&void 0!==i?i:"",s.appendChild(h);const d=this.ownerDocument.createElement("div");d.setAttribute("class","establishment"),s.appendChild(d);const p=this.ownerDocument.createElement("label");p.setAttribute("for","establishment"),d.appendChild(p);const m=this.ownerDocument.createElement("img");m.setAttribute("src","/src/components/selectedspot/img/hotel_icon.png"),m.setAttribute("alt",""),p.appendChild(m);const f=this.ownerDocument.createElement("select");d.appendChild(f);const g=this.ownerDocument.createElement("option");g.setAttribute("value",""),g.textContent="Hotel A",f.appendChild(g);const y=this.ownerDocument.createElement("option");y.setAttribute("value","restaurant"),y.textContent="Hotel B",f.appendChild(y);const v=this.ownerDocument.createElement("div");v.setAttribute("class","recommendation"),s.appendChild(v);const w=this.ownerDocument.createElement("label");w.setAttribute("for","recommendation"),v.appendChild(w);const b=this.ownerDocument.createElement("img");b.setAttribute("src","/src/components/selectedspot/img/restaurant_icon.png"),b.setAttribute("alt",""),w.appendChild(b);const E=this.ownerDocument.createElement("select");v.appendChild(E);const _=this.ownerDocument.createElement("option");_.setAttribute("value",""),_.textContent="Restaurante A",E.appendChild(_);const C=this.ownerDocument.createElement("option");C.setAttribute("value","restaurant"),C.textContent="Restaurante B",E.appendChild(C)}}customElements.define("app-spot",If);var Sf=n(333);const Af={comm:""};class kf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var e,t,n;this.shadowRoot&&(this.shadowRoot.innerHTML=""),cf(this,Sf.Z);const i=this.ownerDocument.createElement("section"),s=this.ownerDocument.createElement("textarea");s.addEventListener("change",(e=>{Af.comm=e.target.value}));const r=this.ownerDocument.createElement("button");r.textContent="Publicar",r.addEventListener("click",(()=>function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){var e;console.log(Af),Ti(yield(e=Af,rf(void 0,void 0,void 0,(function*(){return yield(e=>Ym(void 0,void 0,void 0,(function*(){try{yield Xm(gm(ef,"products"),e)}catch(e){console.error("Error adding document: ",e)}})))(e),{type:wi.SAVE_COMMENT,payload:e}}))))})))),null===(e=this.shadowRoot)||void 0===e||e.appendChild(s),null===(t=this.shadowRoot)||void 0===t||t.appendChild(r),null===(n=this.shadowRoot)||void 0===n||n.appendChild(i)}}customElements.define("app-comment",kf);var Nf=n(115);class Df extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),Ii(this)}connectedCallback(){this.render()}render(){this.shadowRoot&&(this.shadowRoot.innerHTML=""),cf(this,Nf.Z),_i.products.forEach((e=>{var t,n;const i=this.ownerDocument.createElement("section"),s=this.ownerDocument.createElement("article"),r=this.ownerDocument.createElement("h3");r.textContent=e.comm,null==s||s.appendChild(r),null===(t=this.shadowRoot)||void 0===t||t.appendChild(s),null===(n=this.shadowRoot)||void 0===n||n.appendChild(i)}))}}customElements.define("comment-list",Df);var Rf=n(916);class xf extends HTMLElement{constructor(){super(),this.header=[],this.recommended=[],this.attachShadow({mode:"open"}),Ii(this),vf.forEach((e=>{const t=this.ownerDocument.createElement("app-header");t.setAttribute(lf.logo,e.logo),t.setAttribute(lf.regions,e.regions),t.setAttribute(lf.climate,e.climate),t.setAttribute(lf.profile,e.profile),this.header.push(t)})),bf.forEach((e=>{const t=this.ownerDocument.createElement("app-recommended");t.setAttribute(mf.img,e.img),t.setAttribute(mf.title,e.title),t.setAttribute(mf.spot,e.spot),t.setAttribute(mf.obj,JSON.stringify(e)),this.recommended.push(t)}))}connectedCallback(){this.render()}render(){var e;this.shadowRoot&&(this.shadowRoot.innerHTML=""),cf(this,Rf.Z);const t=this.ownerDocument.createElement("main");if(t.classList.add("main-container"),this.header.forEach((e=>{t.appendChild(e)})),_i.selectedSpot){const e=this.ownerDocument.createElement("app-spot");e.setAttribute(Cf.headerimg,_i.selectedSpot.img),e.setAttribute(Cf.title,_i.selectedSpot.title),e.setAttribute(Cf.spot,_i.selectedSpot.spot),e.setAttribute(Cf.descript,_i.selectedSpot.description),t.appendChild(e)}const n=this.ownerDocument.createElement("div");n.classList.add("form-container");const i=this.ownerDocument.createElement("app-comment");n.appendChild(i);const s=this.ownerDocument.createElement("div");s.classList.add("comment-container");const r=this.ownerDocument.createElement("comment-list");s.appendChild(r);const a=this.ownerDocument.createElement("div");a.classList.add("recommended-container"),this.recommended.forEach((e=>{a.appendChild(e)}));const o=this.ownerDocument.createElement("h6");o.textContent="Lugares recomendados",o.setAttribute("class","title-recommed"),t.appendChild(n),t.appendChild(s),t.appendChild(o),t.appendChild(a),null===(e=this.shadowRoot)||void 0===e||e.appendChild(t)}}customElements.define("app-place",xf);var Pf=n(46);class Of extends HTMLElement{constructor(){super(),this.header=[],this.home=[],this.attachShadow({mode:"open"}),vf.forEach((e=>{const t=this.ownerDocument.createElement("app-header");t.setAttribute(lf.logo,e.logo),t.setAttribute(lf.regions,e.regions),t.setAttribute(lf.climate,e.climate),t.setAttribute(lf.profile,e.profile),this.header.push(t)})),bf.forEach((e=>{const t=this.ownerDocument.createElement("app-home");t.setAttribute(pf.img,e.img),t.setAttribute(pf.title,e.title),t.setAttribute(pf.spot,e.spot),t.setAttribute(pf.region,e.region),t.setAttribute(pf.obj,JSON.stringify(e)),this.home.push(t)}))}connectedCallback(){this.render()}render(){var e,t,n,i,s,r;function a(e,t,n,i){const s=document.createElement("div"),r=document.createElement("h2");r.setAttribute("class","card-title"),r.textContent=e;const a=document.createElement("h3");a.setAttribute("class","card-description"),a.textContent=t;const o=document.createElement("main");return o.setAttribute("class","principal"),n.filter((e=>e.getAttribute(pf.region)===i)).forEach((e=>{const t=e.cloneNode(!0);o.appendChild(t)})),s.appendChild(r),s.appendChild(a),s.appendChild(o),s}this.shadowRoot&&(this.shadowRoot.innerHTML=""),cf(this,Pf.Z),this.header.forEach((e=>{var t;null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}));const o=this.ownerDocument.createElement("main");o.appendChild(a("Región Amazónica","Es la más extensa ya que ocupa un 40% del territorio colombiano. Cuenta con fauna y flora inmensamente variada que resguarda buena parte de la biodiversidad del planeta. Su cultura está atravesada por la herencia ancestral indígena, pues en esta región se encuentran casi 200 resguardos indígenas, donde conviven más de 20 comunidades con distintas familias lingüísticas como Tukano, Arawak, Tikuna, Huitoto y Tupí.",this.home,"Amazónica")),null===(e=this.shadowRoot)||void 0===e||e.appendChild(o);const c=this.ownerDocument.createElement("main");c.appendChild(a("Región Andina","Con cerca de 30 millones de habitantes, es la región más poblada y de mayor desarrollo económico del país, donde se ubican los 3 centros urbanos más importantes: Bogotá, Medellín y Cali. Allí se encuentran la cultura paisa, la santandereana, la cundiboyacense, la opita, la vallecaucana y la pastusa, que además está en constante contacto con la región del Pacífico colombiano.",this.home,"Andina")),null===(t=this.shadowRoot)||void 0===t||t.appendChild(c);const l=this.ownerDocument.createElement("main");l.appendChild(a("Región Caribe","Históricamente ha sido una de las regiones de Colombia más conectadas con el resto del mundo gracias a los puertos de Barranquilla y Cartagena, que a su vez, son sus dos principales centros urbanos. En esta región surgieron expresiones culturales icónicas como la cumbia, el vallenato, las artesanías del pueblo Zenú y el mundialmente famoso Carnaval de Barranquilla.",this.home,"Caribe")),null===(n=this.shadowRoot)||void 0===n||n.appendChild(l);const u=this.ownerDocument.createElement("main");u.appendChild(a("Región Insular","Agrupa diferentes islas importantes alejadas del territorio continental colombiano. Esto incluye al de San Bernardo y el de San Andrés, Providencia y Santa Catalina (en el mar Caribe) y las islas Gorgona y Malpelo (en el océano Pacífico). Cuenta con una belleza marina destacable y paisajes paradisíacos con playas de arenas blancas, importantes reservas y santuarios naturales.",this.home,"Insular")),null===(i=this.shadowRoot)||void 0===i||i.appendChild(u);const h=this.ownerDocument.createElement("main");h.appendChild(a("Región Orinoquía","Con amplias planicies que parecen infinitas, múltiples ríos, ecosistemas únicos y baja densidad poblacional, la región de la Orinoquía hace parte de la gran cuenca del río Orinoco que comparten Colombia y Venezuela.",this.home,"Orinoquia")),null===(s=this.shadowRoot)||void 0===s||s.appendChild(h);const d=this.ownerDocument.createElement("main");d.appendChild(a("Región Pacífica","El Pacífico colombiano atraviesa 4 departamentos y está compuesto por largas costas y selvas que conforman uno de los territorios más agrestes y húmedos del continente, donde se concentra gran parte de la biodiversidad del país.",this.home,"Pacifico")),null===(r=this.shadowRoot)||void 0===r||r.appendChild(d)}}customElements.define("app-region",Of);var Lf=n(494);class Mf extends HTMLElement{constructor(){super(),this.header=[],this.home=[],this.attachShadow({mode:"open"}),vf.forEach((e=>{const t=this.ownerDocument.createElement("app-header");t.setAttribute(lf.logo,e.logo),t.setAttribute(lf.regions,e.regions),t.setAttribute(lf.climate,e.climate),t.setAttribute(lf.profile,e.profile),this.header.push(t)})),bf.forEach((e=>{const t=this.ownerDocument.createElement("app-home");t.setAttribute(pf.img,e.img),t.setAttribute(pf.title,e.title),t.setAttribute(pf.spot,e.spot),t.setAttribute(pf.climate,e.climate),t.setAttribute(pf.obj,JSON.stringify(e)),this.home.push(t)}))}connectedCallback(){this.render()}render(){var e,t,n,i;function s(e,t,n,i){const s=document.createElement("div"),r=document.createElement("h2");r.setAttribute("class","card-title"),r.textContent=e;const a=document.createElement("h3");a.setAttribute("class","card-description"),a.textContent=t;const o=document.createElement("main");return o.setAttribute("class","principal"),n.filter((e=>e.getAttribute(pf.climate)===i)).forEach((e=>{const t=e.cloneNode(!0);o.appendChild(t)})),s.appendChild(r),s.appendChild(a),s.appendChild(o),s}this.shadowRoot&&(this.shadowRoot.innerHTML=""),cf(this,Lf.Z),this.header.forEach((e=>{var t;null===(t=this.shadowRoot)||void 0===t||t.appendChild(e)}));const r=this.ownerDocument.createElement("main");r.appendChild(s("Clima Cálido","El piso cálido comprende las zonas localizadas entre 0 y 1000 metros de altura sobre el nivel del mar. Su temperatura promedio superior a los 24 grados. En Colombia, este piso abarca cerca de 913.000 Km2, correspondientes al 80% del territorio nacional. Se localiza en las llanuras costeras tanto del Pacifico como del Caribe, en los valles del río Magdalena, Cauca, Cesar, Catatumbo, entre otros, así como también, en las extensas llanuras del Orinoco y la Amazonía.",this.home,"Calido")),null===(e=this.shadowRoot)||void 0===e||e.appendChild(r);const a=this.ownerDocument.createElement("main");a.appendChild(s("Clima Templado","Comprende todas las áreas ubicadas entre los 1.000 y 2.000 metros de altura sobre el nivel del mar. Sus temperaturas oscilan entre los 17 y 24 grados. En Colombia este piso cubre 114.000 Km2 correspondientes al 10% del territorio nacional, ubicándose en las zonas bajas de las montañas.",this.home,"Templado")),null===(t=this.shadowRoot)||void 0===t||t.appendChild(a);const o=this.ownerDocument.createElement("main");o.appendChild(s("Clima Frío","Corresponde a las zonas localizadas entre los 2.000 y 3.000 metros de altura. Presenta temperaturas que oscilan entre los 12 y 17 grados. Cubriendo 93.000 Km2, lo que corresponde al 7.9% del territorio nacional. Este piso tiene más diversidad de temperaturas, según su altura. En las noches las temperaturas son un poco más bajas que en el día.",this.home,"Frio")),null===(n=this.shadowRoot)||void 0===n||n.appendChild(o);const c=this.ownerDocument.createElement("main");c.appendChild(s("Clima de Páramo","Se presenta en las áreas situadas entre los 3.300 - 3-500 a 4.000 metros de altura. Presenta temperaturas entre los 6 y 12 °C. Abarcan 23.000 Km cuadrados, equivalentes al 2% del territorio nacional. Se localiza en la parte superior de las cordilleras. Cerca del 70% de los ríos del país nacen en páramos Se caracteriza por tener una vegetación baja y plantas como los frailejones y numerosas lagunas",this.home,"Páramo")),null===(i=this.shadowRoot)||void 0===i||i.appendChild(c)}}customElements.define("app-climate",Mf);var qf=n(463);const Uf={email:"",password:""};class jf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),Ii(this)}connectedCallback(){this.render()}handleLoginButton(){return function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const e=yield nf(Uf);null==e?alert("Can't login, try again!"):e&&(alert("Correctly logged!"),Ti(af(bi.DASHBOARD)))}))}render(){var e;this.shadowRoot&&(this.shadowRoot.innerHTML=""),cf(this,qf.Z);const t=this.ownerDocument.createElement("section");t.classList.add("class-container");const n=this.ownerDocument.createElement("section");n.classList.add("class-login");const i=this.ownerDocument.createElement("div");i.classList.add("class-logo");const s=document.createElement("img");s.setAttribute("src","/src/screens/img/quiwe2.png");const r=this.ownerDocument.createElement("div"),a=this.ownerDocument.createElement("h3");a.textContent="Correo electrónico";const o=this.ownerDocument.createElement("input");o.setAttribute("placeholder","Correo electrónico"),o.setAttribute("id","Correo electrónico"),o.addEventListener("change",(e=>{Uf.email=e.target.value}));const c=this.ownerDocument.createElement("h3");c.textContent="Contraseña";const l=this.ownerDocument.createElement("input");l.setAttribute("placeholder","Contraseña"),l.setAttribute("id","Contraseña"),l.setAttribute("type","password"),l.addEventListener("change",(e=>{Uf.password=e.target.value}));const u=this.ownerDocument.createElement("div"),h=this.ownerDocument.createElement("button");h.textContent="Ingresar",h.addEventListener("click",(()=>{this.handleLoginButton()}));const d=this.ownerDocument.createElement("div");d.classList.add("class-acc");const p=this.ownerDocument.createElement("h3");p.textContent="No tengo una cuenta",p.addEventListener("click",(()=>{Ti(af(bi.SIGNIN))})),i.appendChild(s),r.appendChild(a),r.appendChild(o),r.appendChild(c),r.appendChild(l),u.appendChild(h),d.appendChild(p),n.appendChild(i),n.appendChild(r),n.appendChild(u),n.appendChild(d),t.appendChild(n),null===(e=this.shadowRoot)||void 0===e||e.appendChild(t)}}customElements.define("log-in",jf);var Ff=n(719);const Vf={username:"",email:"",password:""};class zf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),Ii(this)}connectedCallback(){this.render()}handleSignUpButton(){return function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){const e=yield(({email:e,username:t,password:n})=>Ym(void 0,void 0,void 0,(function*(){try{const t=yield async function(e,t,n){const i=Rt(e),s=qt(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tn),r=await s.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&cn(e),t})),a=await nn._fromIdTokenResponse(i,"signIn",r);return await i._updateCurrentUser(a.user),a}(tf,e,n);return console.log(t.user),!0}catch(e){const t=e.code,n=e.message;return console.log(t,n),!1}})))(Vf);null==e?alert("Can't register, try again!"):e&&(alert("Correctly registered!"),Ti(af(bi.LOGIN)))}))}render(){var e;this.shadowRoot&&(this.shadowRoot.innerHTML=""),cf(this,Ff.Z);const t=this.ownerDocument.createElement("section");t.classList.add("class-container");const n=this.ownerDocument.createElement("section");n.classList.add("class-signin");const i=this.ownerDocument.createElement("div");i.classList.add("class-logo");const s=document.createElement("img");s.setAttribute("src","/src/screens/img/quiwe2.png");const r=this.ownerDocument.createElement("div"),a=this.ownerDocument.createElement("h3");a.textContent="Nombre";const o=this.ownerDocument.createElement("input");o.setAttribute("placeholder","Nombre"),o.setAttribute("id","Nombre"),o.addEventListener("change",(e=>{Vf.username=e.target.value}));const c=this.ownerDocument.createElement("h3");c.textContent="Correo electrónico";const l=this.ownerDocument.createElement("input");l.setAttribute("placeholder","Correo electrónico"),l.setAttribute("id","Correo electrónico"),l.addEventListener("change",(e=>{Vf.email=e.target.value}));const u=this.ownerDocument.createElement("h3");u.textContent="Contraseña";const h=this.ownerDocument.createElement("input");h.setAttribute("placeholder","Contraseña"),h.setAttribute("id","Contraseña"),h.addEventListener("change",(e=>{Vf.password=e.target.value}));const d=this.ownerDocument.createElement("h3");d.textContent="Confirmar contraseña";const p=this.ownerDocument.createElement("input");p.setAttribute("placeholder","Confirmar contraseña"),p.setAttribute("id","Contraseña"),p.addEventListener("change",(e=>{Vf.password!==e.target.value&&(console.log("Password do not match :("),alert("The passwords aren't the same"))}));const m=this.ownerDocument.createElement("div"),f=this.ownerDocument.createElement("button");f.textContent="Registrarse",f.addEventListener("click",(()=>{this.handleSignUpButton()}));const g=this.ownerDocument.createElement("div");g.classList.add("class-acc");const y=this.ownerDocument.createElement("h3");y.textContent="Ya tengo una cuenta",y.addEventListener("click",(()=>{Ti(af(bi.LOGIN))})),i.appendChild(s),r.appendChild(a),r.appendChild(o),r.appendChild(c),r.appendChild(l),r.appendChild(u),r.appendChild(h),r.appendChild(d),r.appendChild(p),m.appendChild(f),g.appendChild(y),n.appendChild(i),n.appendChild(r),n.appendChild(m),n.appendChild(g),t.appendChild(n),null===(e=this.shadowRoot)||void 0===e||e.appendChild(t)}}customElements.define("sign-in",zf);class Bf extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),Ii(this)}connectedCallback(){return function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function o(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){Ti(yield rf(void 0,void 0,void 0,(function*(){const e=yield sf();return{type:wi.GET_COMMENT,payload:e}}))),this.render()}))}render(){var e,t,n,i,s,r;if(this.shadowRoot)switch(this.shadowRoot.innerHTML="",_i.screen){case bi.LOGIN:const a=this.ownerDocument.createElement("log-in");null===(e=this.shadowRoot)||void 0===e||e.appendChild(a);break;case bi.SIGNIN:const o=this.ownerDocument.createElement("sign-in");null===(t=this.shadowRoot)||void 0===t||t.appendChild(o);break;case bi.DASHBOARD:const c=this.ownerDocument.createElement("app-dashboard");null===(n=this.shadowRoot)||void 0===n||n.appendChild(c);break;case bi.SPOTSELECT:const l=this.ownerDocument.createElement("app-place");null===(i=this.shadowRoot)||void 0===i||i.appendChild(l);break;case bi.REGIONS:const u=this.ownerDocument.createElement("app-region");null===(s=this.shadowRoot)||void 0===s||s.appendChild(u);break;case bi.CLIMATE:const h=this.ownerDocument.createElement("app-climate");null===(r=this.shadowRoot)||void 0===r||r.appendChild(h)}}}customElements.define("app-container",Bf)})()})();